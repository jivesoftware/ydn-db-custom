(function (name, definition, context) {if (typeof context['module'] !== 'undefined' && context['module']['exports']) {context['module']['exports'] = definition.apply(context);}else if (typeof context['define'] !== 'undefined' && context['define'] === 'function' && context['define']['amd']) {define(name, [], definition);}else {context[name] = definition();}})('ydn', function () {var h,m=this;function p(a){return void 0!==a}
function aa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return"array"==aa(a)}function w(a){var b=aa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function ba(a){return"boolean"==typeof a}function y(a){return"number"==typeof a}function ca(a){return"function"==aa(a)}function A(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var da="closure_uid_"+(1E9*Math.random()>>>0),ea=0;
function fa(a,b,c){return a.call.apply(a.bind,arguments)}function ga(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ha(a,b,c){ha=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fa:ga;return ha.apply(null,arguments)}var ia=Date.now||function(){return+new Date};
function ja(a,b){var c=a.split("."),d=m;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&p(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}function B(a,b){function c(){}c.prototype=b.prototype;a.p=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.hb=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function ka(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function la(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function C(a){if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}B(C,Error);C.prototype.name="CustomError";var ma;function na(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}var oa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function qa(a){if(!ra.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(sa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(ta,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ua,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(va,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(wa,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(xa,"&#0;"));return a}var sa=/&/g,ta=/</g,ua=/>/g,va=/"/g,wa=/'/g,xa=/\x00/g,ra=/[\x00&<>"']/;
function ya(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var za={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Aa={"'":"\\'"};
function Ba(a){a=String(a);if(!a.quote){for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=c+1,g;if(!(g=za[d])){if(!(31<e&&127>e))if(d in Aa)d=Aa[d];else if(d in za)d=Aa[d]=za[d];else{e=d;g=d.charCodeAt(0);if(31<g&&127>g)e=d;else{if(256>g){if(e="\\x",16>g||256<g)e+="0"}else e="\\u",4096>g&&(e+="0");e+=g.toString(16).toUpperCase()}d=Aa[d]=e}g=d}b[f]=g}b.push('"')}}function Ca(a,b){return a<b?-1:a>b?1:0};function Da(a,b){b.unshift(a);C.call(this,na.apply(null,b));b.shift()}B(Da,C);Da.prototype.name="AssertionError";function Ea(a,b){throw new Da("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Fa=Array.prototype,Ga=Fa.indexOf?function(a,b,c){return Fa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ha=Fa.forEach?function(a,b,c){Fa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ja=Fa.map?function(a,b,c){return Fa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ka=Fa.some?function(a,b,c){return Fa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function La(a,b){var c=Ma(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}function Ma(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}
function Na(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Oa(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=Pa,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Pa(a,b){return a===b};var Qa;a:{var Ra=m.navigator;if(Ra){var Sa=Ra.userAgent;if(Sa){Qa=Sa;break a}}Qa=""}function D(a){return-1!=Qa.indexOf(a)};function Ta(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Ua(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],p(a));c++);return a}var Va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Va.length;f++)c=Va[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function Xa(a){var b=arguments.length;if(1==b&&u(arguments[0]))return Xa.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};function Ya(a){m.setTimeout(function(){throw a;},0)}var Za;
function $a(){var a=m.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(a=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=ha(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!D("Trident")&&!D("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(p(c.next)){c=c.next;var a=c.ya;c.ya=null;a()}};return function(a){d.next={ya:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=
null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){m.setTimeout(a,0)}};function ab(a,b){bb||cb();db||(bb(),db=!0);eb.push(new fb(a,b))}var bb;function cb(){if(m.Promise&&m.Promise.resolve){var a=m.Promise.resolve();bb=function(){a.then(gb)}}else bb=function(){var a=gb;!ca(m.setImmediate)||m.Window&&m.Window.prototype.setImmediate==m.setImmediate?(Za||(Za=$a()),Za(a)):m.setImmediate(a)}}var db=!1,eb=[];[].push(function(){db=!1;eb=[]});function gb(){for(;eb.length;){var a=eb;eb=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.a.call(c.b)}catch(d){Ya(d)}}}db=!1}
function fb(a,b){this.a=a;this.b=b};function hb(a,b){this.b=ib;this.f=void 0;this.a=this.c=null;this.d=this.e=!1;try{var c=this;a.call(b,function(a){jb(c,kb,a)},function(a){if(!(a instanceof lb))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(b){}jb(c,mb,a)})}catch(d){jb(this,mb,d)}}var ib=0,kb=2,mb=3;hb.prototype.then=function(a,b,c){return nb(this,ca(a)?a:null,ca(b)?b:null,c)};ka(hb);function ob(a){a.b==ib&&ab(function(){var a=new lb(void 0);pb(this,a)},a)}
function pb(a,b){if(a.b==ib)if(a.c){var c=a.c;if(c.a){for(var d=0,e=-1,f=0,g;g=c.a[f];f++)if(g=g.V)if(d++,g==a&&(e=f),0<=e&&1<d)break;0<=e&&(c.b==ib&&1==d?pb(c,b):(d=c.a.splice(e,1)[0],qb(c,d,mb,b)))}}else jb(a,mb,b)}function rb(a,b){a.a&&a.a.length||a.b!=kb&&a.b!=mb||sb(a);a.a||(a.a=[]);a.a.push(b)}
function nb(a,b,c,d){var e={V:null,Fa:null,Ga:null};e.V=new hb(function(a,g){e.Fa=b?function(c){try{var e=b.call(d,c);a(e)}catch(n){g(n)}}:a;e.Ga=c?function(b){try{var e=c.call(d,b);!p(e)&&b instanceof lb?g(b):a(e)}catch(n){g(n)}}:g});e.V.c=a;rb(a,e);return e.V}hb.prototype.g=function(a){this.b=ib;jb(this,kb,a)};hb.prototype.i=function(a){this.b=ib;jb(this,mb,a)};
function jb(a,b,c){if(a.b==ib){if(a==c)b=mb,c=new TypeError("Promise cannot resolve to itself");else{if(la(c)){a.b=1;c.then(a.g,a.i,a);return}if(A(c))try{var d=c.then;if(ca(d)){tb(a,c,d);return}}catch(e){b=mb,c=e}}a.f=c;a.b=b;sb(a);b!=mb||c instanceof lb||ub(a,c)}}function tb(a,b,c){function d(b){f||(f=!0,a.i(b))}function e(b){f||(f=!0,a.g(b))}a.b=1;var f=!1;try{c.call(b,e,d)}catch(g){d(g)}}function sb(a){a.e||(a.e=!0,ab(a.j,a))}
hb.prototype.j=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;b++)qb(this,a[b],this.b,this.f)}this.e=!1};function qb(a,b,c,d){if(c==kb)b.Fa(d);else{if(b.V)for(;a&&a.d;a=a.c)a.d=!1;b.Ga(d)}}function ub(a,b){a.d=!0;ab(function(){a.d&&vb.call(null,b)})}var vb=Ya;function lb(a){C.call(this,a)}B(lb,C);lb.prototype.name="cancel";/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function E(a,b){this.g=[];this.K=b||null;this.b=this.c=!1;this.d=void 0;this.L=this.A=this.i=!1;this.e=0;this.f=null;this.D=0}h=E.prototype;h.da=function(a,b){this.i=!1;wb(this,a,b)};function wb(a,b,c){a.c=!0;a.d=c;a.b=!b;a.qa()}function xb(a){if(a.c){if(!a.L)throw new yb;a.L=!1}}h.callback=function(a){xb(this);wb(this,!0,a)};h.k=function(a){xb(this);wb(this,!1,a)};h.F=function(a,b){return zb(this,a,null,b)};h.Ma=function(a,b){return zb(this,null,a,b)};h.xa=function(a,b){return zb(this,a,a,b)};
function zb(a,b,c,d){a.g.push([b,c,d]);a.c&&a.qa();return a}h.then=function(a,b,c){var d,e,f=new hb(function(a,b){d=a;e=b});zb(this,d,function(a){e(a)});return f.then(a,b,c)};ka(E);function Ab(a){return Ka(a.g,function(a){return ca(a[1])})}
E.prototype.qa=function(){this.e&&this.c&&Ab(this)&&(Bb(this.e),this.e=0);this.f&&(this.f.D--,delete this.f);for(var a=this.d,b=!1,c=!1;this.g.length&&!this.i;){var d=this.g.shift(),e=d[0],f=d[1],d=d[2];if(e=this.b?f:e)try{var g=e.call(d||this.K,a);p(g)&&(this.b=this.b&&(g==a||g instanceof Error),this.d=a=g);la(a)&&(this.i=c=!0)}catch(k){a=k,this.b=!0,Ab(this)||(b=!0)}}this.d=a;c&&(c=ha(this.da,this,!0),g=ha(this.da,this,!1),a instanceof E?(zb(a,c,g),a.A=!0):a.then(c,g));b&&(a=new Cb(a),Db[a.ga]=
a,this.e=a.ga)};function Eb(a){var b=new E;b.callback(a);return b}function yb(){C.call(this)}B(yb,C);yb.prototype.message="Deferred has already fired";yb.prototype.name="AlreadyCalledError";function Cb(a){this.ga=m.setTimeout(ha(this.b,this),0);this.a=a}Cb.prototype.b=function(){delete Db[this.ga];throw this.a;};var Db={};function Bb(a){var b=Db[a];b&&(m.clearTimeout(b.ga),delete Db[a])};function F(a){C.call(this,a);this.name="ydn.error.ArgumentException"}B(F,C);function Fb(a){C.call(this,a);this.name="ydn.error.NotSupportedException"}B(Fb,C);function Gb(a){C.call(this,a);this.name="ydn.error.NotImplementedException"}B(Gb,C);function Hb(a){C.call(this,a);this.name="ydn.error.InvalidOperationException"}B(Hb,C);function Ib(a){Error.captureStackTrace?Error.captureStackTrace(this,Ib):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}B(Ib,Error);
Ib.prototype.name="ydn.error.InternalError";var Jb="StopIteration"in m?m.StopIteration:Error("StopIteration");function Kb(){}Kb.prototype.next=function(){throw Jb;};Kb.prototype.U=function(){return this};function Lb(a){if(a instanceof Kb)return a;if("function"==typeof a.U)return a.U(!1);if(w(a)){var b=0,c=new Kb;c.next=function(){for(;;){if(b>=a.length)throw Jb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Mb(a,b,c){if(w(a))try{Ha(a,b,c)}catch(d){if(d!==Jb)throw d;}else{a=Lb(a);try{for(;;)b.call(c,a.next(),void 0,a)}catch(e){if(e!==Jb)throw e;}}}function Nb(a){if(w(a))return Na(a);a=Lb(a);var b=[];Mb(a,function(a){b.push(a)});return b};function Ob(a,b){this.b={};this.a=[];this.d=this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)Pb(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof Ob)e=a.fa(),d=a.Aa();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)Pb(this,e[c],d[c])}}h=Ob.prototype;h.Aa=function(){Qb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};
h.fa=function(){Qb(this);return this.a.concat()};h.clear=function(){this.b={};this.d=this.c=this.a.length=0};function Qb(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}h.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.b,a)?this.b[a]:b};
function Pb(a,b,c){Object.prototype.hasOwnProperty.call(a.b,b)||(a.c++,a.a.push(b),a.d++);a.b[b]=c}h.forEach=function(a,b){for(var c=this.fa(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};h.clone=function(){return new Ob(this)};h.U=function(a){Qb(this);var b=0,c=this.a,d=this.b,e=this.d,f=this,g=new Kb;g.next=function(){for(;;){if(e!=f.d)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw Jb;var g=c[b++];return a?g:d[g]}};return g};var Rb=D("Opera")||D("OPR"),G=D("Trident")||D("MSIE"),Sb=D("Gecko")&&-1==Qa.toLowerCase().indexOf("webkit")&&!(D("Trident")||D("MSIE")),Tb=-1!=Qa.toLowerCase().indexOf("webkit");Tb&&D("Mobile");D("Macintosh");D("Windows");D("Linux");var Ub=m.navigator||null;Ub&&(Ub.appVersion||"").indexOf("X11");D("Android");!D("iPhone")||D("iPod")||D("iPad");D("iPad");function Vb(){var a=m.document;return a?a.documentMode:void 0}
var Wb=function(){var a="",b;if(Rb&&m.opera)return a=m.opera.version,ca(a)?a():a;Sb?b=/rv\:([^\);]+)(\)|;)/:G?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Tb&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Qa))?a[1]:"");return G&&(b=Vb(),b>parseFloat(a))?String(b):a}(),Xb={};
function Yb(a){var b;if(!(b=Xb[a])){b=0;for(var c=oa(String(Wb)).split("."),d=oa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var q=l.exec(g)||["","",""],r=n.exec(k)||["","",""];if(0==q[0].length&&0==r[0].length)break;b=Ca(0==q[1].length?0:parseInt(q[1],10),0==r[1].length?0:parseInt(r[1],10))||Ca(0==q[2].length,0==r[2].length)||Ca(q[2],r[2])}while(0==b)}b=Xb[a]=0<=b}return b}
var Zb=m.document,$b=Zb&&G?Vb()||("CSS1Compat"==Zb.compatMode?parseInt(Wb,10):5):void 0;function ac(a){var b;b||(b=bc(a||arguments.callee.caller,[]));return b}
function bc(a,b){var c=[];if(0<=Ga(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(cc(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=cc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(bc(a.caller,
b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?c.push("[...long stack...]"):c.push("[end]");return c.join("")}function cc(a){if(dc[a])return dc[a];a=String(a);if(!dc[a]){var b=/function ([^\(]+)/.exec(a);dc[a]=b?b[1]:"[Anonymous]"}return dc[a]}var dc={};function ec(a,b,c,d,e){"number"==typeof e||fc++;this.f=d||ia();this.e=a;this.d=b;this.c=c;delete this.b;delete this.a}ec.prototype.b=null;ec.prototype.a=null;var fc=0;function gc(a){this.e=a;this.a=this.d=this.b=this.c=null}function hc(a,b){this.name=a;this.value=b}hc.prototype.toString=function(){return this.name};var ic=new hc("SHOUT",1200),jc=new hc("SEVERE",1E3),kc=new hc("WARNING",900),lc=new hc("INFO",800),mc=new hc("CONFIG",700),nc=new hc("FINE",500),oc=new hc("FINER",400),pc=new hc("FINEST",300),qc=[new hc("OFF",Infinity),ic,jc,kc,lc,mc,nc,oc,pc,new hc("ALL",0)],rc=null;gc.prototype.getName=function(){return this.e};
function sc(a){if(a.b)return a.b;if(a.c)return sc(a.c);Ea("Root logger has no level set.");return null}gc.prototype.log=function(a,b,c){if(a.value>=sc(this).value)for(ca(b)&&(b=b()),a=this.f(a,b,c,gc.prototype.log),b="log:"+a.d,m.console&&(m.console.timeStamp?m.console.timeStamp(b):m.console.markTimeline&&m.console.markTimeline(b)),m.msWriteProfilerMark&&m.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.c}};
gc.prototype.f=function(a,b,c,d){var e=new ec(a,String(b),this.e);if(c){var f;f=d||arguments.callee.caller;e.b=c;var g;try{var k;var l;c:{for(var n=["window","location","href"],q=m,r;r=n.shift();)if(null!=q[r])q=q[r];else{l=null;break c}l=q}if(x(c))k={message:c,name:"Unknown error",lineNumber:"Not available",fileName:l,stack:"Not available"};else{var t,v,n=!1;try{t=c.lineNumber||c.ib||"Not available"}catch(z){t="Not available",n=!0}try{v=c.fileName||c.filename||c.sourceURL||m.$googDebugFname||l}catch(H){v=
"Not available",n=!0}k=!n&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||"Not available",name:c.name||"UnknownError",lineNumber:t,fileName:v,stack:c.stack||"Not available"}}g="Message: "+qa(k.message)+'\nUrl: <a href="view-source:'+k.fileName+'" target="_new">'+k.fileName+"</a>\nLine: "+k.lineNumber+"\n\nBrowser stack:\n"+qa(k.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+qa(ac(f)+"-> ")}catch(pa){g="Exception trying to expose exception! You win, we lose. "+pa}e.a=g}return e};
var tc={},uc=null;function vc(){uc||(uc=new gc(""),tc[""]=uc,uc.b=mc)}function wc(){vc();return uc}function I(a){vc();var b;if(!(b=tc[a])){b=new gc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=I(a.substr(0,c));c.d||(c.d={});c.d[d]=b;b.c=c;tc[a]=b}return b};function xc(a,b){a&&a.log(kc,b,void 0)}function zc(a,b){a&&a.log(nc,b,void 0)};function J(a,b){a&&a.log(pc,b,void 0)}function K(a,b){a&&a.log(oc,b,void 0)};function Ac(a,b){E.call(this,0,b);this.n=[]}B(Ac,E);Ac.prototype.ta=function(a,b){this.n.push([a,b]);return this};Ac.prototype.callback=function(a){this.n.length=0;Ac.p.callback.call(this,a)};Ac.prototype.k=function(a){this.n.length=0;Ac.p.k.call(this,a)};Ac.prototype.ua=function(){return this};var Bc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Cc=Bc.READ_ONLY,L=Bc.READ_WRITE,Dc=Bc.VERSION_CHANGE,Ec=m.indexedDB||m.mozIndexedDB||m.webkitIndexedDB||m.moz_indexedDB||m.msIndexedDB;E.prototype.done=E.prototype.F;E.prototype.fail=E.prototype.Ma;E.prototype.always=E.prototype.xa;Ac.prototype.then=Ac.prototype.then;function Fc(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],p(a));c++);return a}var Gc={};
function Hc(a){var b=[a];a=new Ic;for(var c=0,d,e;void 0!==(e=b.pop());){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(Gc);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),Jc(a,e);else if(e instanceof Date)c+=2,a.write(c),Jc(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,
f>>2|255,(f|3)<<6)}c.write(0)}else if(e===Gc)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}
function Jc(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Kc(a){var b=Lc(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=Lc(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(Lc(a)|0):Lc(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Mc(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=Lc(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Nc(a){this.a=null;this.b=a;this.c=this.b.length-1;this.index=-1}function Lc(a){return a.a=a.index<a.c?parseInt(a.b.charAt(++a.index)+a.b.charAt(++a.index),16):null}
function Ic(){this.a=[];this.b=void 0}Ic.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};Ic.prototype.toString=function(){return this.a.length?this.a.join(""):""};function Oc(a,b){var c=Hc(a),d=Hc(b);return c>d?1:c==d?0:-1};function M(a,b,c){Ac.call(this,0,c);this.s=a;this.n=[];this.j=[];this.ja=[];this.a=null;this.Z=""}B(M,Ac);h=M.prototype;h.Z="";h.logger=I("ydn.db.Request");function Pc(a,b,c){a.a=b;a.Z=c;K(a.logger,a+" BEGIN");if(b){for(c=0;c<a.j.length;c++)a.j[c][0].call(a.j[c][1],b);a.j.length=0}}function Qc(a){K(a.logger,a+" END");a.a=null}h.Na=function(){return!!this.a};
h.abort=function(){K(this.logger,this+" aborting "+this.a);if(this.a)if(ca(this.a.abort))this.a.abort();else if(ca(this.a.executeSql))this.a.executeSql("ABORT",[],function(){},function(){return!0});else throw new Fb;else throw new Rc(this+" No active transaction");};function N(a,b,c){var d=a.ja.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){N(a,b,c)}):c?a.k(b):a.callback(b)}function Sc(a,b,c){a.ja.push([b,c])}function O(a,b,c){a.a?b.call(c,a.a):a.j.push([b,c])}
h.callback=function(a){K(this.logger,this+" SUCCESS");M.p.callback.call(this,a)};h.k=function(a){K(this.logger,this+" ERROR");M.p.k.call(this,a)};h.state=function(){return this.c?this.b?"rejected":"resolved":"pending"};function Tc(a){var b="";a.Z&&(b=a.a?"*":"",b="["+a.Z+b+"]");return a.s+b}function Uc(a,b){var c=new M(a);N(c,b);return c}h.toString=function(){return"Request:"+Tc(this)};
h.qa=function(){this.e&&this.c&&Ab(this)&&(Bb(this.e),this.e=0);this.f&&(this.f.D--,delete this.f);for(var a=this.d,b=!1;this.g.length&&!this.i;){var c=this.g.shift(),d=c[0],e=c[1],c=c[2];if(d=this.b?e:d)d=d.call(c||this.K,a),p(d)&&(this.b=this.b&&(d==a||d instanceof Error),this.d=a=d),la(a)&&(this.i=b=!0)}this.d=a;b&&(b=ha(this.da,this,!0),d=ha(this.da,this,!1),a instanceof E?(zb(a,b,d),a.A=!0):a.then(b,d))};
h.toJSON=function(){var a=(this.Z||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.s?this.s.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var P=Ec&&Ec.cmp?ha(Ec.cmp,Ec):Oc,Vc=[];function Wc(){0!=Xc&&(this[da]||(this[da]=++ea));this.D=this.D;this.ja=this.ja}var Xc=0;Wc.prototype.D=!1;function Yc(a,b){this.type=a;this.target=b}Yc.prototype.preventDefault=function(){};function Zc(a,b){Yc.call(this,a,b)}B(Zc,Yc);Zc.prototype.a=function(){return this.m};function $c(a,b,c,d,e){Yc.call(this,a,b);this.version=c;this.Ia=d;this.Ea=e}B($c,Zc);h=$c.prototype;h.name="ReadyEvent";h.version=NaN;h.Ia=NaN;h.Ea=null;h.eb=function(){return this.version};h.Qa=function(){return this.Ia};h.Pa=function(){return this.Ea};function ad(a,b,c){Yc.call(this,c||"error",a);this.error=b}B(ad,Zc);ad.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};
ad.prototype.name="ErrorEvent";ad.prototype.error=null;ad.prototype.b=function(){return this.error};function bd(a,b){ad.call(this,a,b,"fail")}B(bd,ad);bd.prototype.name="FailEvent";function Q(a,b,c){var d;if(A(a))d=a.store,b=a.id,null!=a.parent&&(c=new Q(a.parent));else if(p(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new Q(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!p(b))throw Error("Invalid key value: "+a);this.m=d;this.a=b;this.parent=c||null}h=Q.prototype;h.toJSON=function(){var a={store:this.m,id:this.a};this.parent&&(a.parent=this.parent.toJSON());return a};h.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.m+"^:"+this.a};
h.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};h.Za=function(){return this.m};h.Oa=function(){return this.a};h.Ya=function(){return this.parent};function cd(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function R(a,b,c,d){a>b&&(b=a=void 0);null===a&&(a=void 0);null===b&&(b=void 0);this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d}R.prototype.lower=void 0;R.prototype.upper=void 0;R.prototype.toJSON=function(){return dd(this)};R.only=function(a){return new R(a,a,!1,!1)};R.bound=function(a,b,c,d){return new R(a,b,c,d)};R.upperBound=function(a,b){return new R(void 0,a,void 0,!!b)};R.lowerBound=function(a,b){return new R(a,void 0,!!b,void 0)};
function ed(a){var b;if(u(a))b=Na(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else if(y(a))b=a+2.220460492503131E-16,a-=2.220460492503131E-16;else return R.only(a);return R.bound(a,b,!1,!0)}function dd(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}
function fd(a){return null!=a?null!=a.upper&&null!=a.lower?gd.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?gd.upperBound(a.upper,a.upperOpen):null!=a.lower?gd.lowerBound(a.lower,a.lowerOpen):null:null}function hd(a){if(a instanceof R)return"";if(null!=a){if(A(a)){for(var b in a){var c;if(c=a.hasOwnProperty(b))c=!(0<=Ga(["lower","upper","lowerOpen","upperOpen"],b));if(c)return'invalid attribute "'+b+'" in key range object'}return""}return"key range must be an object"}return""}
R.prototype.oa=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return R.bound(b,c,d,e)};function id(a){if(!a)return"";var b=a.lowerOpen?"(":"[";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
var gd=m.IDBKeyRange||m.webkitIDBKeyRange||R;function jd(a,b,c,d,e,f){p(e)||(e=u(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new F("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);u(a)&&Object.freeze&&Object.freeze(a);!p(a)&&p(e)&&(a=e);this.keyPath=a;this.g=w(this.keyPath);this.b=e;this.type=kd(b);if(p(b)){if(!p(this.type))throw new F("type invalid in index: "+this.b);if(u(this.keyPath))throw new F('composite key for store "'+this.b+'" must not specified type');}this.d=!!c;this.c=!!d;this.f=x(e)?e:u(a)?this.keyPath.join(","):
a;Ba(this.f);this.a=this.g?null:this.keyPath.split(".");this.e=f||null}function ld(a,b){if(null!=b){if(w(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=Fc(b,a.keyPath[d]);c[d]=f}return c}return Fc(b,a.keyPath)}}var md=["BLOB","DATE","INTEGER","NUMERIC","TEXT"];function kd(a){if(x(a))return a=Ga(md,a),md[a]}h=jd.prototype;h.getName=function(){return this.b};h.toJSON=function(){return{name:this.b,keyPath:this.keyPath,type:this.type,unique:this.d,multiEntry:this.c}};
h.clone=function(){var a=u(this.keyPath)?Na(this.keyPath):this.keyPath;return new jd(a,this.type,this.d,this.c,this.b,this.e)};function nd(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?Oa(a,b)?null:"expect: "+a+", but: "+b:od(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}h.hint=function(a){if(!a)return this;var b=u(this.keyPath)?Na(this.keyPath):this.keyPath,c=this.type;p(a.type)||"TEXT"!=c||(c=void 0);return new jd(b,c,this.d,this.c,a.b)};
h.toString=function(){var a=this.c?"MultiEntry":"";this.a&&1<this.a.length&&(a+="Compound");return a+"Index:"+this.b};function pd(a,b,c,d,e,f,g,k){if(!x(a))throw new F("store name must be a string");this.b=a;this.keyPath=p(b)?b:null;this.e=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.e)throw new F("keyPath must be a string or array");if(null!=c&&!ba(c))throw new F('invalid autoIncrement value in store "'+a+'"');this.c=!!c;var l;if(null!=d){l=kd(d);if(!p(l))throw new F('type "'+d+'" for primary key in store "'+this.b+'" is invalid.');if(this.e)throw new F('composite key for store "'+this.b+'" must not specified type');
}this.type=null!=l?l:this.c?"INTEGER":void 0;this.d=x(this.keyPath)?this.keyPath.split("."):[];this.a=e||[];this.H=!!f;this.Ja=!!g;this.i=u(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";Ba(this.i);if(this.g=!!k){if(this.keyPath)throw new F('encrypted store "'+this.b+'" must not use inline key');if(this.c)throw new F('encrypted store "'+this.b+'" must not use key generator');}this.f=[]}h=pd.prototype;h.H=!1;h.Ja=!1;
h.toJSON=function(){for(var a=[],b=0;b<this.a.length;b++)a.push(this.a[b].toJSON());return{name:this.b,keyPath:this.keyPath,autoIncrement:this.c,type:this.type,indexes:a}};
function qd(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ga(b,c))throw new F('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(u(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==Ga(f,g))throw new F("Unknown field: "+g+" in "+S(e));e=new jd(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);
p(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new pd(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}h.clone=function(){return qd(this.toJSON())};h.index=function(a){return this.a[a]||null};function rd(a,b){return La(a.a,function(a){return a.getName()==b})}function sd(a,b){return b===a.keyPath?!0:Ka(a.a,function(a){return a.getName()==b})}h.getName=function(){return this.b};
function td(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.e){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(Fc(b,a.keyPath[d]));return c}if(a.keyPath)return Ua(b,a.d)}}function ud(a,b,c){for(var d=0;d<a.d.length;d++){var e=a.d[d];if(d==a.d.length-1){b[e]=c;break}p(b[e])||(b[e]={});b=b[e]}}
function vd(a,b){if(!b)return"missing store: "+a.b;if(a.b!=b.b)return"store name, expect: "+a.b+", but: "+b.b;var c=nd(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(p(a.c)&&p(b.c)&&a.c!=b.c)return"autoIncrement, expect:  "+a.c+", but: "+b.c;if(a.a.length!=b.a.length)return"indexes length, expect:  "+a.a.length+", but: "+b.a.length;if(p(a.type)&&p(b.type)&&(w(a.type)?!Oa(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.a.length;c++){var d=rd(b,a.a[c].getName()),
e;e=a.a[c];if(d)if(e.b!=d.b)e="name, expect: "+e.b+", but: "+d.b;else{var f=nd(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.d&&null!=d.d&&e.d!=d.d?"unique, expect: "+e.d+", but: "+d.d:null!=e.c&&null!=d.c&&e.c!=d.c?"multiEntry, expect: "+e.c+", but: "+d.c:p(e.type)&&p(d.type)&&(w(e.type)?!Oa(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.b;if(0<e.length)return'index "'+a.a[c].getName()+'" '+e}return""}
function wd(a,b){if(b)for(var c=0;c<a.a.length;c++){var d=a.a[c],e=b;if(d.e){var f=d.e(e),g=typeof f;if("string"==g||"number"==g||f instanceof Date||u(f)){for(g=0;g<d.a.length-1;g++)A(e[d.a[g]])||(e[d.a[g]]={});e[d.a[d.a.length-1]]=f}}}}function T(a,b,c,d,e){for(var f=0;f<a.f.length;f++)d!==f&&a.f[f].call(e,b,c)}h.toString=function(){return"Store:"+this.b+"["+this.a.length+"index]"};function xd(a){return eval("("+a+")")}function yd(){}
function zd(a,b,c){switch(typeof b){case "string":Ad(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(u(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),zd(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),Ad(e,c),c.push(":"),zd(a,f,c),d=","));c.push("}");
break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var Bd={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Cd=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function Ad(a,b){b.push('"',a.replace(Cd,function(a){if(a in Bd)return Bd[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return Bd[a]=e+b.toString(16)}),'"')};I("ydn");function Dd(a){return!x(a)||/^[\s\xa0]*$/.test(a)?{}:"undefined"==typeof m.JSON?xd(a):JSON.parse(a)}function Ed(a){var b;try{b=S(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function S(a){if("undefined"==typeof m.JSON){var b=[];zd(new yd,a,b);a=b.join("")}else a=JSON.stringify(a,void 0,void 0);return a};function Fd(a,b){if(!a||/^[\s\xa0]*$/.test(a))throw new F("store_name must be provided for primary full text index");if(!b||/^[\s\xa0]*$/.test(b))throw new F("index_name must be provided for primary full text index");this.m=a};function Gd(a,b,c){this.name=a;this.a=b;this.b=c||"";if(-1==["","en","fr"].indexOf(this.b))throw new F('Unsupported lang "'+c+" for full text search index "+a);}Gd.prototype.getName=function(){return this.name};Gd.prototype.count=function(){return this.a.length};Gd.prototype.index=function(a){return this.a[a]};
function Hd(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ga(b,c))throw new F("Unknown field: "+c+" in "+S(a));if(!u(a.sources))throw new F("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ga(b,c))throw new F("Unknown field: "+c+" in "+Ed(a));return new Fd(a.storeName,a.keyPath)});return new Gd(a.name,
b,a.lang)};function Id(a,b){var c,d,e=b;if(A(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==Ga(c,f))throw new F("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!u(g))throw new F("stores must be array");for(f=0;f<g.length;f++){var k=qd(g[f]);if(-1!=Ma(e,function(a){return a.name==k.getName()}))throw new F('duplicate store name "'+k.getName()+'".');e.push(k)}}else x(a)?c=0==a.length?void 0:parseFloat(a):y(a)&&(c=a);if(p(c)){if(!y(c)||0>c)throw new F("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(p(b)&&(!u(b)||0<b.length&&!(b[0]instanceof pd)))throw new F("stores");this.version=c;this.sa=!p(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=Hd(d.fullTextCatalogs[f]),c[f]=e,U(this,e.getName())||(g=[new jd("k","TEXT"),new jd("v","TEXT")],e=new pd(e.getName(),"id",!1,void 0,g,!1,!1,!1),this.stores.push(e));this.a=c}h=Id.prototype;
h.toJSON=function(){var a=Ja(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;p(this.version)&&(b.version=this.version);return b};h.sa=!1;h.v=function(){return!1};function Jd(a){return Ja(a.stores,function(a){return a.getName()})}h.ka=function(a){return this.stores[a]||null};h.count=function(){return this.stores.length};function U(a,b){return La(a.stores,function(a){return a.getName()==b})}function Kd(a,b){return Ka(a.stores,function(a){return a.getName()==b})}
function Ld(a,b){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var c=0;c<a.stores.length;c++){var d=U(b,a.stores[c].getName());if(d){if(d=vd(a.stores[c],d),0<d.length)return'store: "'+a.stores[c].getName()+'" '+d}else return'missing object store "'+a.stores[c].getName()+'"'}return""};function Md(a,b){Id.call(this,a,b)}B(Md,Id);Md.prototype.v=function(){return!0};function Nd(a){Error.captureStackTrace?Error.captureStackTrace(this,Nd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}B(Nd,Error);function Od(a){Error.captureStackTrace?Error.captureStackTrace(this,Od):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}B(Nd,Error);Od.prototype.name="ydn.error.NotSupportedException";
function Pd(a){Error.captureStackTrace?Error.captureStackTrace(this,Pd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}B(Pd,Error);Pd.prototype.name="ydn.error.ConstraintError";B(Nd,Error);function Qd(a){Error.captureStackTrace?Error.captureStackTrace(this,Qd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}B(Qd,Error);function od(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==La(b,function(b){return od(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&od(a[0],b);if(w(b))return 1==b.length&&od(b[0],a);if(A(a)&&A(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=od(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=od(a[e],b[e]),!f))return!1;return!0}return a===b}return!1};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function V(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ga(d,e))throw new F('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!u(c.mechanisms))throw new F("mechanisms attribute must be an array but "+aa(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!(0<=Ga(Rd,c.mechanisms[e])))throw new F('Invalid mechanism "'+c.mechanisms[e]+'"');}this.j=c.mechanisms||Rd;this.a=null;this.d=
[];this.ha=!1;var f;if(b instanceof Id)f=b;else if(A(b))for(c.autoSchema||!p(b.stores)?f=new Md(b):f=new Id(b),c=b.stores?b.stores.length:0,e=0;e<c;e++)d=U(f,b.stores[e].name),b.stores[e].Sync&&xc(this.logger,"Synchronization option for "+d.getName()+" ignored.");else f=new Md;this.b=f;for(e=0;e<this.b.count();e++)if(this.b.ka(e).g)throw Error("encryption option must be defined");p(a)&&this.i(a);this.e=new E}V.prototype.logger=I("ydn.db.con.Storage");
V.prototype.n=function(a){if(p(a)){var b=function(b){a(b.toJSON());a=void 0};if(this.a)Sd(this.a,b);else{var c=this;this.aa(function(){Sd(c.a,b)},null,Cc)}}return this.b?this.b.toJSON():null};V.prototype.i=function(a){if(this.a)throw new Hb("Already connected with "+this.f);this.f=a;Td(this)};V.prototype.getName=function(){return this.f};var Rd="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");h=V.prototype;h.pa=function(){return null};
function Td(a){function b(b,e){b?(J(a.logger,a+": ready."),a.Ba=NaN,d.$a=function(){},d.ab=function(){a.a=null},d.Ta=function(){},setTimeout(function(){Ud(a,e);Vd(a)},10),c.callback(e)):(xc(a.logger,a+": database connection fail "+e.name),setTimeout(function(){Ud(a,new bd(a,e));if(a.d){var b=a.logger;for(b&&b.log(lc,"Purging "+a.d.length+" transactions request.",void 0);b=a.d.shift();)b.t&&b.t("error",e)}},10),c.k(e))}for(var c=new E,d=null,e=a.j,f=0;f<e.length;f++){var g=e[f].toLowerCase();if(d=
a.pa(g)){d=a.pa(g);break}}null===d?(e=new Pd("No storage mechanism found."),b(!1,new bd(a,e))):zb(Wd(d,a.f,a.b),function(a){this.a=d;b(!0,new $c("ready",this,parseFloat(d.b),parseFloat(a),null))},function(a){xc(this.logger,this+": opening fail");b(!1,a)},a)}h.ma=function(){if(this.a)return this.a.$()};h.ia=function(a,b){this.e.xa(a,b)};function Ud(a,b){setTimeout(function(){a.b.sa&&a.e.c||(b instanceof ad?a.e.k(b.error):a.e.callback())},4)}function Xd(a){return!!a.a&&!!a.a.c}
h.close=function(){this.a&&(this.a.close(),this.a=null,J(this.logger,this+" closed"))};h.bb=function(){return this.a?this.a.d||null:null};h.Ba=NaN;function Vd(a){var b=a.d.shift();b&&(J(a.logger,"pop tx queue["+(a.d.length+1)+"]"),a.aa(b.ea,b.Va,b.mode,b.t));a.Ba=ia()}
function Yd(a,b,c,d,e){J(a.logger,"push tx queue["+a.d.length+"]");a.d.push({ea:b,Va:c,mode:d,t:e});100<a.d.length&&0==a.d.length%100&&xc(a.logger,"Transaction queue stack size is "+a.d.length+". It is too large, possibility due to incorrect usage.")}h.ha=!1;
h.aa=function(a,b,c,d){var e=b;if(x(b))e=[b];else if(null!=b)if(w(b)){if(0==b.length)throw new F("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!x(b[f]))throw new F("store name at "+f+" must be string but found "+typeof b[f]);}else throw new F("store names must be an array");else e=null;if(this.a&&this.a.c&&!this.ha){var g=this,k=p(c)?c:Cc;k==Dc&&(this.ha=!0);Zd(this.a,function(b){a(b);a=null},function(a,b){ca(d)&&(d(a,b),d=void 0);k==Dc&&(g.ha=!1);Vd(g)})}else Yd(this,a,
e,c,d)};h.toString=function(){return"Storage:"+this.a};V.prototype.close=V.prototype.close;V.prototype.getType=V.prototype.ma;V.prototype.getName=V.prototype.getName;V.prototype.getSchema=V.prototype.n;V.prototype.onReady=V.prototype.ia;V.prototype.setName=V.prototype.i;V.prototype.transaction=V.prototype.aa;V.prototype.db=V.prototype.bb;ja("ydn.db.version","1.1.2");ja("ydn.db.cmp",P);ja("ydn.db.deleteDatabase",function(a,b){for(var c,d=0;d<Vc.length;d++){var e=Vc[d](a,b);e&&(c=e)}return c||Uc("IDBVersionChangeEvent ",null)});$c.prototype.name=$c.prototype.name;
$c.prototype.getVersion=$c.prototype.eb;$c.prototype.getOldVersion=$c.prototype.Qa;$c.prototype.getOldSchema=$c.prototype.Pa;ad.prototype.getError=ad.prototype.b;M.prototype.abort=M.prototype.abort;M.prototype.canAbort=M.prototype.Na;Ac.prototype.progress=Ac.prototype.ta;Ac.prototype.promise=Ac.prototype.ua;function $d(a){Error.captureStackTrace?Error.captureStackTrace(this,$d):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}B($d,Error);$d.prototype.name="ConstraintError";$d.prototype.toString=function(){return this.name+": "+this.message};function ae(a){Error.captureStackTrace?Error.captureStackTrace(this,ae):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}B(ae,Error);ae.prototype.name="ydn.db.VersionError";
ae.prototype.toString=function(){return this.name+": "+this.message};function Rc(a){Error.captureStackTrace?Error.captureStackTrace(this,Rc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}B(Rc,Error);function be(a){Error.captureStackTrace?Error.captureStackTrace(this,be):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}B(be,Error);be.prototype.name="NotFoundError";be.prototype.toString=function(){return this.name+": "+this.message};
function ce(a){Error.captureStackTrace?Error.captureStackTrace(this,ce):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}B(ce,Error);function de(a){Error.captureStackTrace?Error.captureStackTrace(this,de):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}B(de,Error);function ee(a,b){this.a=b}ee.prototype.logger=I("ydn.db.crud.req.RequestExecuto");ee.prototype.toString=function(){return"RequestExecutor"};function fe(a){this.c=a;this.a=null;this.b=0}fe.prototype.logger=I("ydn.db.tr.Mutex");fe.prototype.u=null;function ge(a){return!!a.a&&!a.d}fe.prototype.t=null;fe.prototype.toString=function(){return"Mutex:"+("B"+this.c+"T"+this.b)+(this.a?"*":"")};function he(a,b,c,d,e,f){this.D=a;this.K=b;this.a=this.d=0;this.A=d;this.s=e;this.e=c||ie;this.i=f||0}he.prototype.logger=I("ydn.db.tr.Thread");he.prototype.type=function(){return this.D.ma()};he.prototype.h=function(){return this.D};he.prototype.r=function(){return"B"+this.K+"T"+this.d};var ie="single";function je(a){if(a)if(ca(a.abort))a.abort();else if(ca(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new Fb;else throw new Rc("No active transaction");};function ke(a,b,c,d,e,f){he.call(this,a,b,c,d,e,f);this.c=[];this.f=[];this.g=null;this.b=new fe(b);this.j=f||0;this.n=!1}B(ke,he);h=ke.prototype;h.logger=I("ydn.db.tr.Serial");
function le(a,b,c){if("multi"==a.e)a:if(a=a.b,!a.u||!a.mode||c!=a.mode&&(a.mode!=L||c!=Cc)||b.length>a.u.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.u.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.e)a:if(a=a.b,a.u&&a.mode&&c==a.mode&&a.u.length==b.length){for(c=0;c<b.length;c++)if(-1==a.u.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.e?!0:!1;return b}function me(a){var b=0<a.c.length?a.c[0].u:null,c=0<a.c.length?a.c[0].mode:null;return null!=b&&null!=c?le(a,b,c):!1}
function ne(a,b,c,d,e){J(a.logger,"push tx queue["+a.c.length+"]");a.c.push({ea:b,u:c,mode:d,t:e})}h.abort=function(){K(this.logger,this+": aborting");je(this.g)};
h.M=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new F("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!x(e[f]))throw new F("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.L&&!(0<=Ga(this.L,e[f])))throw new F('store name "'+f+e[f]+'" in scope of '+this);}}else throw new F("store names must be an array");var g=p(c)?c:Cc,k=this;if(this.b.a||!Xd(this.h())&&this.n)ne(this,a,b,g,d);else{var l=this.r();d&&this.f.push(d);
if(this.j&&this.d>=this.j)throw new Hb("Exceed maximum number of transactions of "+this.j);this.n=!0;this.h().aa(function(c){var d=k.b;d.a=c;d.d=!1;d.u=b;d.mode=g;d.b++;d.t=null;l=k.r();zc(k.logger,l+" BEGIN "+S(b)+" "+g);a(k);for(a=null;me(k);)c=k.c.shift(),c.t&&k.f.push(c.t),J(k.logger,"pop tx queue"+(k.c.length+1)+" reusing T"+k.d),c.ea()},e,g,function(a,b){zc(k.logger,l+" "+a);var c=k.b;c.a?(c.a=null,c.u=null,c.mode=null,ca(c.t)&&c.t(a,b),c.t=null):xc(c.logger,c+" has no TX to be unlocked for "+
a);for(c=0;c<k.f.length;c++)(0,k.f[c])(a,b);k.f.length=0;(c=k.c.shift())&&k.M(c.ea,c.u,c.mode,c.t);k.a=0})}};h.r=function(){var a=this.b;return"B"+a.c+"T"+a.b};h.request=function(a,b,c,d){function e(a,b){Qc(f);d&&d(a,b)}var f=new M(a);a=c||Cc;var g=this;ge(this.b)&&le(this,b,a)?(b=this.b.a,this.a++,Pc(f,b,this.r()+"R"+this.a),this.f.push(e)):g.M(function(){var a=g.b.a;g.a++;Pc(f,a,g.r()+"R"+g.a)},b,a,e);return f};
h.P=function(a,b,c,d,e){d=d||Cc;var f=this,g;if(ge(f.b)&&le(this,c,d)){var k=f.b.a;f.a++;g=f.r()+"R"+f.a;K(f.logger,g+" BEGIN");b(k,g,function(b,c){f.g=k;c?(K(f.logger,g+" ERROR"),a.k(b)):(K(f.logger,g+" SUCCESS"),a.callback(b));f.g=null});K(f.logger,g+" END");b=null}else f.M(function(){var c=f.b.a;f.a++;g=f.r()+"R"+f.a;K(f.logger,g+" BEGIN");b(c,g,function(b,d){f.g=c;d?(K(f.logger,g+" ERROR"),a.k(b)):(K(f.logger,g+" SUCCESS"),a.callback(b));f.g=null});K(f.logger,g+" END");b=null},c,d,e)};
h.getName=function(){return this.h().getName()};h.toString=function(){return"Serial:"+this.r()+(this.g?"*":"")};function oe(a,b){ke.call(this,a,b)}B(oe,ke);oe.prototype.logger=I("ydn.db.tr.AtomicSerial");oe.prototype.request=function(a,b,c){var d,e,f,g=oe.p.request.call(this,a,b,c,function(a,b){Qc(g);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new de;N(g,c,!0)}});Sc(g,function(a,b,c){f=b;e=a;d=c});return g};
oe.prototype.P=function(a,b,c,d,e){var f,g,k=new E;zb(k,function(a){g=!1;f=a},function(a){g=!0;f=a});oe.p.P.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.k(c);else if(!0===g)a.k(f);else if(!1===g)a.callback(f);else{var d=new de;a.k(d)}e&&(e(b,c),e=void 0)})};oe.prototype.toString=function(){return"Atomic"+oe.p.toString.call(this)};function pe(a,b,c){this.d=a;this.b=b;this.a=c;this.c=null}h=pe.prototype;h.logger=I("ydn.db.tr.DbOperator");h.fb=function(){return this.a.d};h.abort=function(){this.a.abort()};function W(a){if(!a.c){var b;b=a.d;var c=b.ma();if("memory"==c||"localstorage"==c||"userdata"==c||"sessionstorage"==c)b=new qe(0,b.b);else throw new Ib("No executor for "+c);a.c=b}return a.c}h.h=function(){return this.d};
function re(a,b){var c=a.h(),d=b instanceof pd?b:qd(b),e=b.name,f=U(c.b,e);if(0==vd(d,f).length)Eb(!1);else if(f=f?"update":"add",c.b instanceof Md)c.b.stores.push(d),c.a?(c.a.close(),c.a=null,Td(c)):Eb(!1);else throw new Pd("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}h.toString=function(){return"TxStorage:"+this.h().getName()};function X(a,b,c){pe.call(this,a,b,c)}B(X,pe);h=X.prototype;h.logger=I("ydn.db.crud.DbOperator");
h.count=function(a,b,c,d){var e,f,g,k;if(null!=a)if(u(a)){if(p(c)||p(b))throw new F("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!Kd(this.b,f[l]))throw new F('store name "'+f[l]+'" at '+l+" not found.");K(this.logger,"countStores: "+S(f));e=this.a.request("count",f);O(e,function(){se(W(this),e,f)},this)}else if(x(a)){l=U(this.b,a);if(!l)throw new F('store name "'+a+'" not found.');if(p(d)&&!ba(d))throw new F('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(x(b))if(g=
b,A(c)){var n=hd(c);if(n)throw new F("invalid key range: "+Ed(c)+" "+n);k=fd(c)}else{if(null!=c)throw new F("invalid key range: "+Ed(c)+" of type "+typeof c);k=null}else if(A(b)||null==b)if(A(b)){if(n=hd(b))throw new F("invalid key range: "+Ed(b)+" "+n);k=fd(b)}else{if(null!=b)throw new F("key range must be  an object but found "+Ed(b)+" of type "+typeof b);k=null}else throw new F('invalid second argument for count "'+Ed(c)+'" of type '+typeof b);K(this.logger,"countKeyRange: "+a+" "+(g?g:"")+S(k));
e=this.a.request("count",f);T(l,e,arguments);O(e,function(){te(W(this),e,f[0],k,g)},this)}else throw new F("Invalid store name or store names.");else xc(this.logger,"count method requires store name(s)"),l=Jd(this.b),e=this.a.request("count",l),Sc(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),O(e,function(){se(W(this),e,f)},this);return e};
h.get=function(a,b){var c=this,d;if(a instanceof Q){var e=a,f=e.m,g=U(this.b,f);if(!g){if(this.b.v()){if(Xd(this.h()))return Uc("get",void 0);d=new M("get");this.h().ia(function(){zb(c.get(a,b),function(a){d.callback(a)},function(a){d.k(a)})});return d}throw new F("Store: "+f+" not found.");}var k=e.a;K(this.logger,"getByKey: "+f+":"+k);d=this.a.request("get:key",[f]);T(g,d,arguments,void 0,this);O(d,function(){ue(W(this),d,f,k)},this)}else if(x(a)&&p(b)){var l=a,g=U(this.b,l);if(!g){if(this.b.v()){if(Xd(this.h()))return Uc("get",
void 0);d=new M("get");this.h().ia(function(){zb(c.get(a,b),function(a){d.callback(a)},function(a){d.k(a)})});return d}throw new F('Store name "'+l+'" not found.');}var n=b;K(this.logger,"getById: "+l+":"+n);d=this.a.request("get",[l]);T(g,d,arguments,void 0,this);O(d,function(){ue(W(this),d,l,n)},this)}else throw new F("get require valid input arguments.");return d};
h.Sa=function(a,b,c,d,e){var f=U(this.b,a),g,k,l,n=null;if(A(b)){var q=hd(b);if(q)throw new F("invalid key range: "+b+" "+q);n=fd(b)}else if(null!=b)throw new F('expect key range object, but found "'+Ed(b)+'" of type '+typeof b);if(p(c))if(y(c))g=c;else throw new F("limit must be a number, but "+c+" is "+typeof c);else g=100;if(p(d))if(y(d))k=d;else throw new F("offset must be a number, but "+d+" is "+typeof d);else k=0;if(p(e))if(ba(e))l=e;else throw new F("reverse must be a boolean, but "+e+" is "+
typeof e);K(this.logger,"keysByKeyRange: "+a);var r=this.a.request("keys",[a]);T(f,r,arguments);O(r,function(){ve(W(this),r,2,a,null,n,g,k,l,!1)},this);return r};
h.Ra=function(a,b,c,d,e,f,g){var k,l,n,q,r,t=hd(c);if(t)throw new F("invalid key range: "+c+" "+t);t=U(this.b,a);k=fd(c);if(y(d))l=d;else{if(p(d))throw new F("limit must be a number");l=100}if(y(e))n=e;else{if(p(e))throw new F("offset must be a number");n=0}if(p(f))if(ba(f))q=f;else throw new F("reverse must be a boolean");if(p(g))if(ba(g))r=g;else throw new F("unique must be a boolean");K(this.logger,"keysByIndexKeyRange: "+a);var v=this.a.request("keys:iter:index",[a]);T(t,v,arguments);O(v,function(){ve(W(this),
v,2,a,b,k,l,n,q,r)},this);return v};h.keys=function(a,b,c,d,e,f,g){var k=U(this.b,a);if(!x(a))throw new F("store name must be a string, but "+a+" of type "+typeof a+" is not.");if(!this.b.v()){if(!k)throw new F('store name "'+a+'" not found.');if(x(b)&&!rd(k,b))throw new F('index "'+b+'" not found in store "'+a+'".');}return this.b.v()&&!k?Uc("keys",[]):x(b)?this.Ra(a,b,c,d,e,f,g):this.Sa(a,b,c,d,e)};
h.O=function(a,b,c,d,e,f,g){var k=this,l;if(x(a)){var n=a,q=U(this.b,n);if(!q){if(this.b.v()){if(Xd(this.h()))return Uc("values",[]);l=new M("values");this.h().ia(function(){zb(k.O(a,b,c,d,e,f),function(a){l.callback(a)},function(a){l.k(a)})});return l}throw new be(n);}if(u(b)){if(p(c)||p(d))throw new F("too many input arguments");var r=b;K(this.logger,"listByIds: "+n+" "+r.length+" ids");l=this.a.request("values:array",[n]);T(q,l,arguments,void 0,this);O(l,function(){var a=W(this);we(a,l,n,r)},this)}else l=
x(b)?this.Wa(n,b,c,d,e,f,g):this.Xa(n,b,c,d,e)}else if(u(a))if(a[0]instanceof Q){for(var q=[],t=a,v=0;v<t.length;v++){var z=t[v].m;if(!Kd(this.b,z)){if(this.b.v())return q=[],q[t.length-1]=void 0,Uc("get",q);throw new F("Store: "+z+" not found.");}0<=Ga(q,z)||q.push(z)}K(this.logger,"listByKeys: "+S(q)+" "+t.length+" keys");l=this.a.request("values:keys",q);O(l,function(){var a=W(this);we(a,l,null,t)},this)}else throw new F("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+
" found.");else throw new F("first argument "+a+" is invalid.");return l};
h.Xa=function(a,b,c,d,e){var f=U(this.b,a),g,k,l,n=null;if(A(b)){var q=hd(b);if(q)throw new F("invalid key range: "+b+" "+q);n=fd(b)}else if(null!=b)throw new F('expect key range object, but found "'+Ed(b)+'" of type '+typeof b);if(p(c))if(y(c))g=c;else throw new F("limit must be a number, but "+c+" is "+typeof c);else g=100;if(p(d))if(y(d))k=d;else throw new F("offset must be a number, but "+d+" is "+typeof d);else k=0;if(p(e))if(ba(e))l=e;else throw new F("reverse must be a boolean, but "+e+" is "+
typeof e);K(this.logger,(n?"listByKeyRange: ":"listByStore: ")+a);var r=this.a.request("values",[a]);T(f,r,arguments);O(r,function(){ve(W(this),r,4,a,null,n,g,k,l,!1)},this);return r};
h.Wa=function(a,b,c,d,e,f,g){var k=U(this.b,a),l,n,q,r;if(!sd(k,b))throw new F('index "'+b+'" not found in store "'+a+'"');var t=hd(c);if(t)throw new F("invalid key range: "+c+" "+t);var v=fd(c);if(p(d))if(y(d))l=d;else throw new F("limit must be a number.");else l=100;if(p(e))if(y(e))n=e;else throw new F("offset must be a number.");else n=0;if(ba(f))q=f;else if(p(f))throw new F("reverse must be a boolean, but "+f);if(p(g))if(ba(g))r=g;else throw new F("unique must be a boolean");K(this.logger,"listByIndexKeyRange: "+
a+":"+b);var z=this.a.request("values:iter:index",[a]);T(k,z,arguments);O(z,function(){ve(W(this),z,4,a,b,v,l,n,q,r)},this);return z};
h.add=function(a,b,c){var d=x(a)?a:A(a)?a.name:void 0;if(!x(d))throw new F("store name "+d+" must be a string, but "+typeof d);var e=U(this.b,d);if(!e){if(!this.b.v())throw new F('store name "'+d+'" not found.');e=qd(A(a)?a:{name:d});K(this.logger,"Adding object store: "+d);re(this,e)}else if(this.b.v()&&A(a)&&(a=qd(a),a=vd(e,a)))throw new Fb(a);var f;if(!e)throw new F('store name "'+d+'" not found.');if(x(e.keyPath)&&p(c))throw new F("key must not be provided while the store uses in-line key.");
if(!e.keyPath&&!e.c&&!p(c))throw new F("out-of-line key must be provided.");if(u(b)){K(this.logger,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)wd(e,b[a]);f=this.a.request("add:array",[d],L);O(f,function(){xe(W(this),f,!1,!1,d,b,c)},this);e.H&&f.F(function(){this.h();e.getName();this.h()},this)}else if(A(b))a="store: "+d+" key: "+td(e,b,c),K(this.logger,"addObject: "+a),wd(e,b),f=this.a.request("add",[d],L),O(f,function(){xe(W(this),f,!1,!0,d,[b],[c])},this),e.H&&f.F(function(){this.h();
e.getName();this.h()},this);else throw new F("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};function ye(a,b){var c=x(b)?b:A(b)?b.name:void 0;if(!x(c))throw new F("store name must be a string");var d=U(a.b,c);if(!d){if(!a.b.v())throw new be(c);d=qd(A(b)?b:{name:c});K(a.logger,"Adding object store: "+c);re(a,d)}else if(a.b.v()&&A(b)){var e=qd(b);if(e=vd(d,e))throw new Fb(e);}if(!d)throw new be(c);return d}
h.load=function(a){a=ye(this,a).getName();var b=this.a.request("load",[a]),c=this;this.a.P(b,function(){W(c);throw new Gb("putData");},[a],L);return b};
h.put=function(a,b,c){var d,e=this;if(a instanceof Q){var f=a,g=f.m,k=U(this.b,g);if(!k)throw new F('store "'+g+'" not found.');if(k.keyPath){var l=td(k,b);if(null!=l){if(0!=P(l,f.a))throw new F("Inline key must be "+f+" but "+l+" found.");}else ud(k,b,f.a);return this.put(g,b)}return this.put(g,b,f.a)}if(u(a)){if(p(c))throw new F("too many arguments");var n=a;if(!p(b))throw new F("record values required");for(var q=b,f=[],g=0,k=n.length;g<k;g++){l=n[g].m;-1==Ga(f,l)&&f.push(l);var r=U(this.b,l);
if(!r)throw new F('store "'+l+'" not found.');r.keyPath&&ud(r,q[g],n[g].a)}K(this.logger,"putByKeys: to "+S(f)+" "+q.length+" objects");for(g=0;g<q.length;g++)wd(r,q[g]);d=this.a.request("put:keys",f,L);T(r,d,arguments);O(d,function(){var a=W(e);xe(a,d,!0,!1,null,q,n)},this)}else if(x(a)||A(a)){var r=ye(this,a),t=r.getName();if(r.keyPath&&p(c))throw new F("key must not be provided while the store uses in-line key.");if(!r.keyPath&&!r.c&&!p(c))throw new F("out-of-line key must be provided.");if(u(b)){var v=
b,z=c;K(this.logger,"putObjects: "+t+" "+v.length+" objects");for(g=0;g<v.length;g++)wd(r,v[g]);d=this.a.request("put:array",[t],L);T(r,d,arguments);O(d,function(){xe(W(this),d,!0,!1,t,v,z)},this);r.H&&d.F(function(){this.h();this.h()},this)}else if(A(b)){var H=b,pa=c;K(this.logger,"putObject: "+t+" "+(p(pa)?pa:"(without-key)"));if(p(m.Blob)&&H instanceof Blob&&r.Ja&&!r.keyPath&&0==r.a.length&&Tb)d=new M("put"),f=new FileReader,f.onload=function(a){var b=a.target.result,c=e.a.request("put",[t],L);
T(r,c,[t,H,pa]);O(c,function(){xe(W(e),c,!0,!0,t,[b],[pa])},this);zb(c,function(a){d.callback(a)},function(a){d.k(a)})},f.onerror=function(a){d.k(a)},f.onabort=function(a){d.k(a)},f.readAsDataURL(H);else{wd(r,H);d=this.a.request("put",[t],L);var Ia=[t,H,pa];T(r,d,Ia);O(d,function(){var a=p(pa)?[Ia[2]]:void 0;xe(W(e),d,!0,!0,t,[Ia[1]],a)},this)}r.H&&d.F(function(){this.h();this.h()},this)}else throw new F("put record value must be Object or array of Objects");}else throw new F("the first argument of put must be store name, store schema or array of keys.");
return d};
h.clear=function(a,b,c){if(p(c))throw new F("too many input arguments");var d;if(x(a)){c=U(this.b,a);if(!c)throw new F('store name "'+a+'" not found.');if(A(b)){var e=fd(b);if(null===e)throw new F("clear method requires a valid non-null KeyRange object.");K(this.logger,"clearByKeyRange: "+a+":"+S(e));d=this.a.request("clear",[a],L);T(c,d,[a,e]);O(d,function(){var b=W(this);ze(b,d,a,e)},this)}else{if(p(b))throw new F("clear method requires a valid KeyRange object as second argument, but found "+b+
" of type "+typeof b);K(this.logger,"clearByStore: "+a);d=this.a.request("clear",[a],L);O(d,function(){Ae(W(this),d,[a])},this)}}else if(!p(a)||u(a)&&x(a[0])){var f=a||Jd(this.b);K(this.logger,"clearByStores: "+S(f));d=this.a.request("clear",f,L);O(d,function(){Ae(W(this),d,f)},this)}else throw new F('first argument "'+a+'" is invalid.');return d};
h.na=function(a,b,c){var d;if(x(a)){var e=U(this.b,a);if(!e)throw new F('store name "'+a+'" not found.');if(p(c))if(x(b)){var f=rd(e,b);if(!f)throw new F("index: "+b+" not found in "+a);if(A(c)||null===c){var g=fd(c);K(this.logger,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.a.request("rm:iter:index",[a],L);O(d,function(){Be(W(this),d,a,f.getName(),g)},this)}else throw new F("key range "+c+' is invalid type "'+typeof c+'".');}else throw new F('index name "'+b+'" must be a string, but '+
typeof b+" found.");else if(x(b)||y(b)||w(b)||b instanceof Date){K(this.logger,"removeById: "+a+":"+b);d=this.a.request("rm",[a],L);var k=[a,b];T(e,d,k);O(d,function(){Ce(W(this),d,a,k[1])},this);e.H&&d.F(function(){this.h();this.h()},this)}else if(A(b))g=fd(b),K(this.logger,"removeByKeyRange: "+a+":"+S(g)),d=this.a.request("rm:iter",[a],L),T(e,d,[a,g]),O(d,function(){ze(W(this),d,a,g)},this),e.H&&d.F(function(){this.h();this.h()},this);else throw new F('Invalid key or key range "'+b+'" of type '+
typeof b);}else if(a instanceof Q){var l=a.m,e=U(this.b,l);d=this.a.request("rm",[l],L);var n=[l,a.a];T(e,d,n);O(d,function(){Ce(W(this),d,l,n[1])},this)}else if(u(a)){b=[];c=0;for(e=a.length;c<e;c++){if(!(a[c]instanceof Q))throw new F("key list element at "+c+" of "+e+' must be yn.db.Key, but "'+Ed(a[c])+'" ('+aa(a[c])+") is not ydn.db.Key.");var q=a[c].m;-1==Ga(b,q)&&b.push(q)}if(1>b.length)throw new F('at least one valid key required in key list "'+Ed(a)+'"');d=this.a.request("rm:keys",b,L);O(d,
function(){De(W(this),d,a)},this)}else throw new F('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+Ed(a)+'" ('+aa(a)+") found.");return d};h.toString=function(){return"DbOperator:"+this.h().getName()};function Ee(a,b,c,d){this.d=a;this.e=b;this.a=Na(c);this.b=d;this.c=[]}Ee.prototype.d=null;function Fe(a,b,c){if(a.d)c&&a.c.push(c),b(a.d);else throw new Ib("tx committed on ParallelTxExecutor");}Ee.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.e+" mode:"+this.b+" scopes:"+S(this.a)};function Ge(a,b,c,d,e,f){he.call(this,a,b,c,d,e,f);this.c=this.b=null}B(Ge,he);h=Ge.prototype;h.logger=I("ydn.db.tr.Parallel");h.abort=function(){K(this.logger,this+": aborting");je(this.c)};
h.Ka=function(a,b){var c;if("multi"==this.e)a:if(c=this.b,!c.a||!c.b||b!=c.b&&(c.b!=L||b!=Cc)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.e)a:if(c=this.b,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.e?!0:!1;return c};
h.M=function(a,b,c,d){function e(c){l.d++;n=new Ee(c,l.d,b,k);g=l.r();zc(l.logger,g+" BEGIN "+S(b)+" "+k);l.b=n;Fe(l.b,a,d)}function f(a,b){zc(l.logger,g+" "+a);if(n){for(var c=n,d=0;d<c.c.length;d++)c.c[d](a,b);c.c.length=0;c.d=null;c.a=null;c.c=null}l.a=0}var g;this.A&&(b=this.A);this.s&&(c=this.s);var k=p(c)?c:Cc,l=this,n;if(this.b&&this.b.d&&this.Ka(b,k))Fe(this.b,a,d);else{if(this.i&&this.d>=this.i)throw new Hb("Exceed maximum number of transactions of "+this.i);this.h().aa(e,b,k,f)}};
h.request=function(a,b,c,d){var e=new M(a),f=this;this.M(function(a){f.a++;Pc(e,a,f.r()+"R"+f.a)},b,c||Cc,function(a,b){Qc(e);d&&d(a,b)});return e};h.P=function(a,b,c,d,e){var f=this,g;this.M(function(c){f.a++;g=f.r()+"R"+f.a;K(f.logger,g+" BEGIN");b(c,g,function(b,d){f.c=c;g=f.r()+"R"+f.a;d?(K(f.logger,g+" ERROR"),a.k(b)):(K(f.logger,g+" SUCCESS"),a.callback(b));f.c=null});b=null;K(f.logger,g+" END")},c,d,e)};h.toString=function(){return"Parallel:"+this.e+":"+this.r()+(this.c?"*":"")};function He(a,b){Ge.call(this,a,b,ie)}B(He,Ge);h=He.prototype;h.logger=I("ydn.db.tr.AtomicParallel");h.Ka=function(){return!1};h.request=function(a,b,c){var d,e,f,g=this,k=He.p.request.call(this,a,b,c,function(a,b){Qc(k);K(g.logger,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new de;N(k,c,!0)}});Sc(k,function(a,b,c){f=b;e=a;d=c});return k};
h.P=function(a,b,c,d,e){var f,g,k=new E;zb(k,function(a){g=!1;f=a},function(a){g=!0;f=a});He.p.P.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.k(c);else if(!0===g)a.k(f);else if(!1===g)a.callback(f);else{var d=new de;a.k(d)}e&&(e(b,c),e=void 0)})};h.toString=function(){return"Atomic"+He.p.toString.call(this)};function Ie(a,b,c){V.call(this,a,b,c);this.T=0;a=!0;b=ie;c&&(p(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=Je(this,b,a);this.g=Je(this,"atomic",!1);this.c=this.S(c,this.g)}B(Ie,V);h=Ie.prototype;h.T=0;h.La=function(a,b,c,d,e,f){a=a||ie;var g;"readonly"==d?g=Cc:"readwrite"==d&&(g=L);a=Je(this,a,b,c,g,e);return this.S(a,f?null:this.g)};h.S=function(a){return new pe(this,this.b,a)};
function Je(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==ie)return new ke(a,a.T++,b,d,e,f);if("atomic"==b)return new oe(a,a.T++);throw new F('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==ie)return new Ge(a,a.T++,b,d,e,f);if("atomic"==b)return new He(a,a.T++);throw new F('Invalid requestType "'+b+'"');}
h.Ua=function(a,b,c){if(3<arguments.length)throw new F("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.T++;var d=b||Jd(this.b),e=Cc;if(c)if("readwrite"==c)e=L;else if("readonly"!=c)throw new F('Invalid transaction mode "'+c+'"');var f=Je(this,"all",!1,d,e,1),g=this.S(f,this.g),k=new M("run"),l=this;f.M(function(b){J(l.logger,"executing run in transaction on "+f);Pc(k,b,f.r()+"R0");a(g)},d,e,function(a){Qc(k);N(k,f.d,"complete"!==a)});return k};
h.gb=function(){return this.c?this.c.a.d:NaN};function Y(a,b,c){Ie.call(this,a,b,c);a=this.b;for(b=0;b<a.a.length;b++){c=a.a[b];var d=U(a,c.getName());if(d){if(!sd(d,"k"))throw new F('full text index store "'+d.getName()+'" must have "keyword" index');if(!sd(d,"v"))throw new F('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new F('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new F('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=U(a,e.m);if(f)xc(this.logger,"Full text indexer option for "+f.getName()+" ignored.");else throw new F('full text source store "'+e.m+'" does not exist for full text index "'+c.getName()+'"');}}}B(Y,Ie);h=Y.prototype;h.S=function(a){return new X(this,this.b,a)};h.add=function(a,b,c){return this.c.add(a,b,c)};h.count=function(a,b,c,d){return this.c.count(a,b,c,d)};h.get=function(a,b){return this.c.get(a,b)};h.keys=function(a,b,c,d,e,f,g){return this.c.keys(a,b,c,d,e,f,g)};
h.O=function(a,b,c,d,e,f){return this.c.O(a,b,c,d,e,f)};h.load=function(a,b,c){return this.c.load(a,b,c)};h.put=function(a,b,c){return this.c.put(a,b,c)};h.clear=function(a,b,c){return this.c.clear(a,b,c)};h.na=function(a,b,c){return this.c.na(a,b,c)};h.toString=function(){var a="Storage:"+this.getName();Xd(this)&&(a+=" ["+this.ma()+"]");return a};Ie.prototype.branch=Ie.prototype.La;Ie.prototype.getTxNo=Ie.prototype.gb;pe.prototype.getTxNo=pe.prototype.fb;Ie.prototype.run=Ie.prototype.Ua;Y.prototype.branch=Y.prototype.La;Y.prototype.add=Y.prototype.add;Y.prototype.get=Y.prototype.get;Y.prototype.keys=Y.prototype.keys;Y.prototype.values=Y.prototype.O;Y.prototype.put=Y.prototype.put;Y.prototype.clear=Y.prototype.clear;Y.prototype.remove=Y.prototype.na;Y.prototype.count=Y.prototype.count;X.prototype.add=X.prototype.add;X.prototype.get=X.prototype.get;X.prototype.keys=X.prototype.keys;X.prototype.values=X.prototype.O;X.prototype.put=X.prototype.put;X.prototype.clear=X.prototype.clear;
X.prototype.remove=X.prototype.na;X.prototype.count=X.prototype.count;ja("ydn.db.Key",Q);Q.prototype.id=Q.prototype.Oa;Q.prototype.parent=Q.prototype.Ya;Q.prototype.storeName=Q.prototype.Za;ja("ydn.db.KeyRange",R);R.upperBound=R.upperBound;R.lowerBound=R.lowerBound;R.bound=R.bound;R.only=R.only;R.starts=ed;Zc.prototype.store_name=Zc.prototype.m;Zc.prototype.getStoreName=Zc.prototype.a;function Ke(a,b,c,d,e){if(!(b instanceof R))if(x(b)&&p(c)){var f,g,k,l;if("starts"==b||"^"==b)b=ed(c);else{if("<"==b||"<="==b)f=c,k="<"==b;else if(">"==b||">="==b)g=c,l=">"==b;else if("="==b||"=="==b)f=g=c;else throw new F("invalid op: "+b);if("<"==d||"<="==d)f=e,k="<"==d;else if(">"==d||">="==d)g=e,l=">"==d;else if(p(d))throw new F("invalid op2: "+d);b=R.bound(g,f,l,k)}}else if(null!=b){if(!(b instanceof R))if(A(b))b=new R(b.lower,b.upper,b.lowerOpen,b.upperOpen);else throw new F("Invalid key range: "+
b+" of type "+typeof b);}else b=null;this.a=b;this.I=a}Ke.prototype.I="";Ke.prototype.oa=function(a){if(this.I!=a.I)return null;a=null!=this.a&&null!=a.a?this.a.oa(a.a):this.a||a.a;return new Ke(this.I,a)};function Le(a,b,c,d){Wc.call(this);this.ua=c;this.m=c.getName();this.W=void 0;this.e=!1;this.l=null;this.A=a;this.L=b;this.i=this.g=!1;this.ta=d||4;this.c=this.b=this.a=void 0;this.f=function(){throw new Ib;};this.j=function(){throw new Ib;};this.K=function(){}}B(Le,Wc);
function Me(a,b,c,d,e){if(p(b)){var f=a.ua,g,k=b;if(u(b)){a:{for(g=0;g<f.a.length;g++)if(!nd(f.a[g].keyPath,b)){g=f.a[g];break a}g=null}k=b.join(", ")}else g=rd(f,b);if(!g)throw new F('require index "'+k+'" not found in store "'+f.getName()+'"');b=g.getName();a.W=b}a.e=x(a.W);a.l=c||null;a.g=!1;a.i=!1;a.reverse="prev"==d||"prevunique"==d;a.Ha="nextunique"==d||"prevunique"==d;a.cb=d;a.X=e;a.a=void 0;a.b=void 0;a.c=void 0}h=Le.prototype;h.cb="";h.l=null;h.Ha=!1;h.reverse=!1;h.X=!0;h.logger=I("ydn.db.core.req.AbstractCursor");
h.toString=function(){return"Cursor:"+this.m+(p(this.W)?":"+this.W:"")+"["+(this.A?"":"~")+this.L+"]"};function Ne(a){null!=a.b?a.b=cd(a.b):a.b=void 0;null!=a.a?a.a=cd(a.a):a.a=void 0;a.K(a.i,a.a,a.b)}h.open=function(a,b,c,d){this.A=a;this.L=b;this.g=this.i=!1;this.a=c;this.b=d;this.openCursor(this.a,this.b)};function Oe(a){a.i=!0;J(a.logger,a+": exit");Ne(a)}function Pe(a){return a.e?a.b:a.a}h.za=function(){};h.ca=function(){};
function Qe(a,b,c){J(a.logger,a+" restarting");a.g=!1;a.i=!1;a.openCursor(c,b)};function Re(){};function Se(a,b,c,d,e,f,g){if(!x(a))throw new TypeError("store name must be a string, but "+a+" found.");this.c=a;this.b=b;this.f=g;this.g=!!this.b;if(p(d)&&!ba(d))throw new F("reverse value must be a boolean, but "+typeof d+" found");if(p(e)&&!ba(e))throw new F("unique value must be a boolean, but "+typeof e+" found");if(p(f)&&!ba(f))throw new F("key_only value must be a boolean, but "+typeof f+" found");this.a=p(f)?f:!!x(this.b);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.d=
a;if(d=hd(c))throw new F("Invalid key range: "+d);this.e=fd(c);this.i=Te;this.s=NaN}B(Se,Re);Se.prototype.a=!0;function Ue(a,b,c){if(3<arguments.length)throw new F("too many argument");Se.call(this,a,void 0,b,c,void 0,!1)}B(Ue,Se);function Ve(a,b,c,d,e){if(!x(b))throw new F("index name must be string");Se.call(this,a,b,c,d,e,!1)}B(Ve,Se);var Te="init";h=Se.prototype;h.logger=I("ydn.db.Iterator");
h.clone=function(){var a=new Se(this.c,this.b,this.e,"prev"===this.d||"prevunique"===this.d,We(this),this.a,this.f);a.s=this.s;return a};h.toJSON=function(){return{store:this.c,index:this.b,keyRange:this.e?dd(this.e):null,direction:this.d}};h.toString=function(){var a=p(this.f)?":"+this.f.join(","):p(this.b)?":"+this.b:"",a=a+id(this.e);this.i!=Te&&(a+=this.i+"{"+this.j,this.g&&(a+=", "+this.n),a+="}");var b=this.g?"Index":"",b=b+(this.a?"Key":"Value");return b+"Iterator:"+this.c+a};
h.reverse=function(){return new Se(this.c,this.b,this.e,!("prev"===this.d||"prevunique"===this.d),We(this),this.a,this.f)};function We(a){return"nextunique"===a.d||"prevunique"===a.d}h.load=function(a){a=a[0];Me(a,this.f||this.b,this.e,this.d,this.a);this.i="busy";var b=this;a.K=function(a,d,e){b.j=d;b.n=e;b.i=a?"rest":"done"};a.openCursor(this.j,this.n);return a};h.stores=function(){return[this.c]};(function(a){if(null!=a&&!("push"in a))throw new Nd('output receiver object must have "push" method.');}).prototype.logger=I("ydn.db.algo.AbstractSolver");function Ye(a,b,c){pe.call(this,a,b,c)}B(Ye,X);h=Ye.prototype;h.logger=I("ydn.db.core.DbOperator");h.get=function(a,b){if(a instanceof Se){var c=a.c,d=U(this.b,c);if(!d)throw new F('store "'+c+'" not found.');var e=a.b;if(p(e)&&!sd(d,e))throw new F('index "'+e+'" not found in store "'+c+'".');K(this.logger,"getByIterator:"+a);var f=this.a.request("get:iter",[c]);O(f,function(){Ze(this,5,f,a,1)},this);return f}return Ye.p.get.call(this,a,b)};
h.keys=function(a,b,c,d,e,f,g){if(a instanceof Se){var k=100;if(y(b)){if(k=b,1>k)throw new F("limit must be a positive value, but "+b);}else if(p(b))throw new F("limit must be a number,  but "+b);if(p(c))throw new F("offset must not be specified");K(this.logger,"keysByIterator:"+a);var l=this.a.request("keys:iter",[a.c]);O(l,function(){a.g?Ze(this,1,l,a,k):Ze(this,2,l,a,k)},this);return l}return Ye.p.keys.call(this,a,b,c,d,e,f,g)};
h.count=function(a,b,c,d){if(a instanceof Se){if(p(b)||p(c))throw new F("too many arguments.");K(this.logger,"countIterator:"+a);var e=this.a.request("count",[a.c]);O(e,function(){Ze(this,6,e,a)},this);return e}return Ye.p.count.call(this,a,b,c,d)};
h.O=function(a,b,c,d,e,f){if(a instanceof Se){var g;if(y(b)){if(g=b,1>g)throw new F("limit must be a positive value, but "+g);}else if(p(b))throw new F("limit must be a number, but "+b);if(p(c))throw new F("offset must not be specified");K(this.logger,"listByIterator:"+a);var k=this.a.request("values:iter",[a.c]);O(k,function(){a.a?Ze(this,2,k,a,g):Ze(this,4,k,a,g)},this);return k}return Ye.p.O.call(this,a,b,c,d,e,f)};
h.open=function(a,b,c,d){if(!(b instanceof Se))throw new F("Second argument must be cursor range iterator.");for(var e=b.stores(),f=0;f<e.length;f++)if(!U(this.b,e[f]))throw new F('Store "'+e[f]+'" not found.');c=c||Cc;var g=this,k=this.a.request("open",b.stores(),c);K(this.logger,"open:"+c+" "+b);O(k,function(c){var e=Tc(k);K(g.logger,e+" iterating "+b);for(var f=b.stores(),r=[],t=0;t<f.length;t++)r[t]=$e(W(g),c,e,f[t]);var v=b.load(r);v.j=function(a){N(k,a,!0)};v.f=function(b){null!=b?(b=a.call(d,
v),!0===b?Qe(v):A(b)?!0===b.restart?Qe(v,b["continue"],b.continuePrimary):null!=b["continue"]?v.ca(b["continue"]):null!=b.continuePrimary?v.za(b.continuePrimary):(Oe(v),N(k,void 0)):null===b?(Oe(v),N(k,void 0)):null!=b?v.ca(b):v.advance(1)):(Oe(v),N(k,void 0))}},this);return k};
h.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new F('Store "'+e+'" not found.');e=this.a.request("map",d);J(this.logger,"map:"+a);this.a.P(e,function(d,e,f){J(c.logger,e+" iterating "+a);for(var n=a.stores(),q=[],r=0;r<n.length;r++)q[r]=$e(W(c),d,e,n[r]);var t=a.load(q);t.j=function(a){f(a,!1)};t.f=function(c){if(null!=c){var d;a.g?a.a?d=c:d=Pe(t):a.a?d=c:d=t.X?Pe(t):t.c;b(d);t.advance(1)}else f(void 0),b=null}},d,Cc);return e};
function Ze(a,b,c,d,e){var f=[],g=c.a,k=Tc(c),l=k+" "+b+"ByIterator "+d;0<e&&(l+=" limit "+e);K(a.logger,l);for(var n=W(a),q=[],r=d.stores(),t=0;t<r.length;t++)q[t]=$e(n,g,k,r[t]);var v=d.load(q);v.j=function(a){Oe(v);N(c,a,!0)};var z=0,H=!1;v.f=function(d){H||(J(a.logger,l+" starting"),H=!0);null!=d?(Pe(v),z++,1==b?f.push(d):2==b?f.push(Pe(v)):3==b?f.push([d,Pe(v)]):6!=b&&f.push(v.X?Pe(v):v.c),5==b?(Oe(v),N(c,f[0])):6==b||!p(e)||z<e?v.ca():(K(a.logger,"success:"+l+" yields "+f.length+" records"),
Oe(v),N(c,f))):(K(a.logger,"success:"+l+" yields "+f.length+" records"),Oe(v),N(c,5==b?f[0]:6==b?z:f))}};function af(a,b,c){Y.call(this,a,b,c)}B(af,Y);af.prototype.S=function(a){return new Ye(this,this.b,a)};af.prototype.open=function(a,b,c,d){return this.c.open(a,b,c,d)};af.prototype.map=function(a,b){return this.c.map(a,b)};function bf(a){if(!x(a))throw new Nd;this.N=a;this.c=L;this.b=[];cf(this,a);this.Y=""}h=bf.prototype;h.N="";h.Ca=NaN;h.Da=NaN;h.wa=!1;h.Y="";
function cf(a,b){var c=b.split(/\sFROM\s/i);if(2==c.length){var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==c.length){a.d=c[1].toUpperCase();if("SELECT"==a.d)a.c=Cc;else if("INSERT"==a.d)a.c=L;else if("UPDATE"==a.d)a.c=L;else if("DELETE"==a.d)a.c=L;else return;var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.e=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.e=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-
1):new ce("missing closing parentheses"));a.j=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.a=d.substring(c),d=d.substring(0,c)):a.a="";c=d.search(/WHERE/i);0<c?(a.f=d.substring(c+6).trim(),d=d.substring(0,c)):a.f="";a.b=d.trim().split(",").map(function(a){a=ya(a,'"');a=ya(a,"'");return a.trim()})}}}function df(a){if("*"==a.j)return null;a=a.j.split(",");return a=a.map(function(a){return ya(a.trim(),'"')})}h.toJSON=function(){return{sql:this.N}};
function ef(a){function b(a){return Ma(c,function(b){return b.I==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.f.length)for(var e=a.f.split("AND"),f=0;f<e.length;f++){var g=e[f],k=d.exec(g);if(k){var l=k[1].trim(),l=ya(l,'"'),l=ya(l,"'");if(0<l.length){var n=k[3].trim();0==n.lastIndexOf('"',0)?n=ya(n,'"'):0==n.lastIndexOf("'",0)?n=ya(n,"'"):n=parseFloat(n);k=new Ke(l,k[2],n);l=b(l);if(0<=l){if(c[l]=c[l].oa(k),!c[l])return a.Y='where clause "'+g+'" conflict',null}else c.push(k)}else return a.Y='Invalid clause "'+
g+'"',null}else return a.Y='Invalid clause "'+g+'"',null}return c}h.toString=function(){return"query:"+this.N};function ff(a,b){this.a=b;this.c=a}ff.prototype.logger=I("ydn.db.sql.req.nosql.Node");ff.prototype.toJSON=function(){return{sql:this.a}};ff.prototype.toString=function(){return"idb.Node:"};
ff.prototype.b=function(a,b){var c=Na(this.a.b)[0],d=this.a.g,e=this.a.Ca,e=isNaN(e)?100:e,f=this.a.Da,f=isNaN(f)?0:f,g=this.a.i,k=df(this.a),l=null,n=this.a.wa;if(0==d.length)l=null;else if(1==d.length)l=fd(d[0].a);else throw new Fb("too many conditions.");null===k||Sc(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=k.length;if(1==b)return Fc(a,k[0]);for(var c={},d=0;d<b;d++)c[k[d]]=Fc(a,k[d]);return c}));c(d,b)});var d=0<d.length?d[0].I:void 0,q=Tc(a)+" executing on"+c;d&&(q+=":"+d);q+=
" "+id(l);K(this.logger,q);g&&g!=this.c.keyPath?ve(b,a,4,c,g,l,e,f,n,!1):p(d)&&d!=this.c.keyPath?ve(b,a,4,c,d,l,e,f,n,!1):ve(b,a,4,c,null,l,e,f,n,!1)};function gf(a,b){ff.call(this,a,b)}B(gf,ff);
gf.prototype.b=function(a,b){var c,d=Na(this.a.b)[0],e=this.a.g,f=null;if(0==e.length)f=null;else if(1==e.length)f=fd(e[0].a);else throw new Fb("too many conditions.");var g=this.a.e,e=0<e.length?e[0].I:void 0,k=Tc(a)+" executing "+g+" on "+d;e&&(k+=":"+e);k+=" "+id(f);K(this.logger,k);if("COUNT"==g)f?te(b,a,d,f,e):te(b,a,d,null,void 0);else{var l,k=df(this.a);if(!k||0==k.length)throw new Qd("field name require for reduce operation: "+g);k=k[0];if("MIN"==g)l=hf(k);else if("MAX"==g)l=jf(k);else if("AVG"==
g)c=0,l=kf(k);else if("SUM"==g)c=0,l=lf(k);else throw new Od(g);var n;p(e)?n=new Ve(d,e,f):n=new Ue(d,f);var d=$e(b,a.a,Tc(a),d,4),q=n.load([d]);q.j=function(b){N(a,b,!0)};var r=0;q.f=function(b){null!=b?(b=n.a?Pe(q):q.X?Pe(q):q.c,c=l(b,c,r),q.advance(1),r++):N(a,c)}}};function kf(a){return function(b,c,d){p(c)||(c=0);return(c*d+b[a])/(d+1)}}function lf(a){return function(b,c){return c+b[a]}}function hf(a){return function(b,c){var d=b[a];return p(c)?c<d?c:d:d}}
function jf(a){return function(b,c){var d=b[a];return p(c)?c>d?c:d:d}};function mf(){this.a=!1}mf.prototype.a=!1;mf.prototype.state=function(){return this.a};function nf(a,b,c,d){Le.call(this,a,b,c,d);this.c=this.b=this.a=void 0;this.n=this.d=null;this.s=new mf;this.la=this.G=null}B(nf,Le);h=nf.prototype;h.logger=I("ydn.db.core.req.SimpleCursor");h.update=function(a){of(this.la,Pe(this),a);return Eb()};h.advance=function(a){function b(b){d++;if(!b||d>=a)return pf(c,b)}var c=this,d=this.d?-1:0;this.reverse?qf(this.G,b,this.d):rf(this.G,b,this.d)};
h.ca=function(a){if(null!=a){var b=this,c=new Z(a),d=function(c){b.d=c;if(!c)return pf(b,c);var d=P(c.value.key,a);if(b.reverse){if(1!=d)return pf(b,c)}else if(-1!=d)return pf(b,c)};this.reverse?qf(this.G,d,c):rf(this.G,d,c)}else this.advance(1)};
function sf(a){setTimeout(function(){if(a.s.state()){a.s.a=!1;var b=a.a,c=a.b,d=a.c;null==b&&(K(a.logger,a+" finished."),a.g=!0);a.a=b;a.b=c;a.c=d;a.g?(J(a.logger,a+" DONE."),a.f(),Ne(a)):(J(a.logger,a+" new cursor position {"+(a.e?a.a+", "+a.b:a.a)+"}"),a.f(a.a));sf(a)}else a.n(),a.n=null},4)}
function pf(a,b){if(a.d=b){var c=b.value;if(a.l)if(a.reverse||null==a.l.upper)a.reverse&&null!=a.l.lower&&(d=P(c.key,a.l.lower),-1==d||0==d&&a.l.lowerOpen)&&(a.d=null);else{var d=P(c.key,a.l.upper);if(1==d||0==d&&a.l.upperOpen)a.d=null}if(a.d){if(a.Ha&&null!=a.a&&null!=c.key&&0==P(a.a,c.key))return;a.a=c.key;a.b=a.e?c.a:a.a;4==a.ta&&(a.X?a.c=a.b:a.c=tf(a.la,a.b))}}a.d||(a.a=void 0,a.b=void 0,a.c=void 0);return a.s.a=!0}
h.openCursor=function(a,b){var c=null;if(this.l)if(this.reverse){var d=this.e?"\uffff":void 0;null!=this.l.upper&&(c=new Z(this.l.upper,d))}else null!=this.l.lower&&(c=new Z(this.l.lower));null!=a&&(c=this.e?new Z(a,b):new Z(a));this.n=this.A.h(function(b){function d(b){var e=b.value,f=e.key;if(b&&null!=f)if(null!=a){if(0==uf(c,e))return}else if(this.l&&(!this.reverse&&this.l.lowerOpen&&null!=this.l.lower&&(e=P(f,this.l.lower),0==e)||this.reverse&&this.l.upperOpen&&null!=this.l.upper&&(e=P(f,this.l.upper),
0==e)))return;return pf(this,b)}this.la=vf(b,this.m);this.G=wf(this.la,this.W);this.reverse?qf(this.G,ha(d,this),c):rf(this.G,ha(d,this),c);sf(this)},this)};h.clear=function(){throw new Gb;};h.za=function(){throw new Gb;};h.toString=function(){return"Simple"+nf.p.toString.call(this)};function xf(a,b,c){a=["ydn.db",a];p(b)&&(a.push(b),p(c)&&(a.push(c),p(void 0)&&a.push(Hc(void 0))));return a.join("^|")};function Z(a,b){this.key=a;this.a=b}Z.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.a?", "+this.a+")":")")};function uf(a,b){var c=P(a.key,b.key);return 0===c?null!=a.a?null!=b.a?P(a.a,b.a):1:null!=b.a?-1:0:c};function yf(a){this.w=a||zf}function zf(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}h=yf.prototype;h.q=null;h.w=null;h.C=null;h.B=null;
h.add=function(a){if(null==this.q)return this.B=this.C=this.q=new Af(a),!0;var b=null;Bf(this,function(c){var d=null,e=this.w(c.value,a);0<e?(d=c.left,null==c.left&&(b=new Af(a,c),c.left=b,c==this.C&&(this.C=b))):0>e&&(d=c.right,null==c.right&&(b=new Af(a,c),c.right=b,c==this.B&&(this.B=b)));return d});b&&(Bf(this,function(a){a.count++;return a.parent},b.parent),Cf(this,b.parent));return!!b};
function Df(a,b){Bf(a,function(a){var d=null,e=this.w(a.value,b);0<e?d=a.left:0>e?d=a.right:Ef(this,a);return d})}h.clear=function(){this.B=this.C=this.q=null};h.contains=function(a){var b=!1;Bf(this,function(c){var d=null,e=this.w(c.value,a);0<e?d=c.left:0>e?d=c.right:b=!0;return d});return b};h.indexOf=function(a){var b=-1,c=0;Bf(this,function(d){var e=this.w(d.value,a);if(0<e)return d.left;d.left&&(c+=d.left.count);if(0>e)return c++,d.right;b=c;return null});return b};
h.Aa=function(){var a=[];Ff(this,function(b){a.push(b)});return a};function Ff(a,b){if(a.q){var c,d=c=Gf(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Bf(a,b,c){for(c=c?c:a.q;c&&null!=c;)c=b.call(a,c)}
function Cf(a,b){Bf(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Hf(this,a.left),If(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&If(this,a.right),Hf(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Hf(a,b){Jf(b)?(b.parent.left=b.right,b.right.parent=b.parent):Kf(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.q=b.right,a.q.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function If(a,b){Jf(b)?(b.parent.left=b.left,b.left.parent=b.parent):Kf(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.q=b.left,a.q.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function Ef(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=Lf(a,b.left);Bf(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.B&&(a.B=d)}else{d=Gf(a,b.right);Bf(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.C&&(a.C=d)}d.count=b.count;Jf(b)?b.parent.left=d:Kf(b)?b.parent.right=d:a.q=d;Cf(a,c?c:d)}else Bf(a,function(a){a.count--;return a.parent},b.parent),Jf(b)?(b.parent.left=null,b==a.C&&(a.C=b.parent),Cf(a,b.parent)):Kf(b)?(b.parent.right=null,b==a.B&&(a.B=b.parent),Cf(a,b.parent)):a.clear()}function Gf(a,b){if(!b)return a.C;var c=b;Bf(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function Lf(a,b){if(!b)return a.B;var c=b;Bf(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Af(a,b){this.value=a;this.parent=b?b:null;this.count=1}Af.prototype.left=null;Af.prototype.right=null;Af.prototype.height=1;function Kf(a){return!!a.parent&&a.parent.right==a}function Jf(a){return!!a.parent&&a.parent.left==a};function Mf(a){this.w=a||zf}B(Mf,yf);function rf(a,b,c){if(a.q){var d;if(c instanceof Af)d=c;else if(c){if(Bf(a,function(a){var b=null;0<this.w(a.value,c)?(b=a.left,d=a):0>this.w(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Gf(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function qf(a,b,c){if(a.q){var d;if(c instanceof Af)d=c;else if(c){if(Bf(a,ha(function(a){var b=null;0<this.w(a.value,c)?b=a.left:(0>this.w(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=Lf(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function Nf(a,b,c){this.e=a;this.storage=b;this.b=c;this.a={};a=this.b.keyPath;this.c=u(a)?a.join(","):a||"_ROWID_";this.a[this.c]=null;this.d=xf(this.e,this.b.getName(),this.c)+"^|"}
function wf(a,b){var c=b||a.c;if(!a.a[c]){a.a[c]=new Mf(uf);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&0==f.lastIndexOf(a.d,0)){for(var g,k=g=[],l=void 0,n=[],q=void 0,r=void 0,t=new Nc(f.substr(a.d.length));null!=Lc(t);)if(0===t.a)k=n.pop();else{if(null===t.a)break;do{for(var q=t.a/4|0,l=t.a%4,v=0;v<q;v++)r=[],k.push(r),n.push(k),k=r;if(0===l&&12<t.a+4)Lc(t);else break}while(1);1===l?k.push(Kc(t)):2===l?k.push(new Date(Kc(t))):3===l?k.push(Mc(t)):0===l&&(k=n.pop())}g=
g[0];if(c==a.c)a.a[c].add(new Z(g));else if(k=a.storage.getItem(f),null!==k)if(f=rd(a.b,c),k=Dd(k),k=ld(f,k),f.c){if(u(k))for(f=0;f<k.length;f++)a.a[c].add(new Z(k[f],g))}else a.a[c].add(new Z(k,g))}}}return a.a[c]}function Of(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.c)Df(e,new Z(b));else{var f=rd(a.b,d),f=Fc(c,f.keyPath);Df(e,new Z(b,f))}}}function Pf(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function of(a,b,c,d){if(null==b&&(a.b.keyPath&&(b=td(a.b,c)),a.b.c&&null==b)){b=a.d+Hc(void 0);var e=Dd(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,S(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.d+Hc(b)));if(d)return null;a.storage.setItem(a.d+Hc(b),S(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.c)e.add(new Z(d));else{var g=rd(a.b,f),g=Fc(c,g.keyPath);null!=g&&e.add(new Z(d,g))}return b}
function Qf(a,b){var c=a.d+Hc(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=Dd(d);Of(a,b,c);return 1}Nf.prototype.clear=function(){Pf(this);Rf(this)};function tf(a,b){var c=a.storage.getItem(a.d+Hc(b)),d=void 0;if(null!==c)for(var d=Dd(c),c=0,e=a.b.a.length;c<e;c++){var f=a.b.index(c);if("DATE"==f.type){var g=ld(f,d);if(g)for(var k=d,g=new Date(g),l=0;l<f.a.length;l++)l==f.a.length-1?k[f.a[l]]=g:A(k[f.a[l]])||(k[f.a[l]]={})}}return d}Nf.prototype.getName=function(){return this.b.getName()};
function Sf(a,b,c){b=b||a.c;a=wf(a,b);var d=null,e=null,f=0,g=!1,k=!1;null!=c&&(null!=c.lower&&(d=new Z(c.lower)),null!=c.upper&&(e=new Z(c.upper)),g=c.lowerOpen,k=c.upperOpen);rf(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=P(a.key,d.key))){if(null!=e&&(a=P(a.key,e.key),1===a||0===a&&k))return!0;f++}},d);return f}
function Rf(a,b){var c=wf(a,a.c),d=null,e=null,f=0,g=[],k=[],l=!1,n=!1;null!=b&&(null!=b.lower&&(d=new Z(b.lower)),null!=b.upper&&(e=new Z(b.upper)),l=b.lowerOpen,n=b.upperOpen);rf(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=uf(b,d))){if(null!=e){var c=uf(b,e);if(1===c||0===c&&n)return!0}var c=a.d+Hc(b.key),t=a.storage.getItem(c);null!==t&&(a.storage.removeItem(c),f++,10>g.length&&(g.push(b.key),k.push(Dd(t))))}},d);if(10>g.length)for(c=0;c<g.length;c++)Of(a,g[c],k[c]);else Pf(a);return f}
function Tf(a,b,c,d,e,f,g,k,l){function n(c){if(c&&(pa++,!(pa<g))){var d=c.value;if(e){if(yc&&null!=H&&(c=t?uf(d,H):P(d.key,H.key),0==c))return;if(null!=z&&(c=t?uf(d,z):P(d.key,z.key),-1==c||0==c&&Ia))return l&&(l[0]=void 0,l[1]=void 0),!0}else{if(Ia&&null!=z&&(c=t?uf(d,z):P(d.key,z.key),0==c))return;if(null!=H&&(c=t?uf(d,H):P(d.key,H.key),1==c||0==c&&yc))return l&&(l[0]=void 0,l[1]=void 0),!0}c=d.key;if(!k||!v||null==r||0!=P(r,c)){d=v?d.a:c;if(2==b)q.push(d);else if(1==b)q.push(c);else if(3==b)q.push([c,
d]);else if(4==b){var n=tf(a,d);q.push(n)}else q.push([c,d,tf(a,d)]);l&&(l[0]=c,l[1]=d)}r=c;if(p(f)&&q.length>=f)return!0}}var q=[],r,t=!!l&&null!=l[0];c=c||a.c;var v=c!=a.c;c=wf(a,c);var z=null,H=null;p(g)||(g=0);var pa=-1,Ia=!1,yc=!1;null!=d&&(null!=d.lower&&(z=v&&e?new Z(d.lower,"\uffff"):new Z(d.lower)),null!=d.upper&&(H=v&&!e?new Z(d.upper,"\uffff"):new Z(d.upper)),Ia=!!d.lowerOpen,yc=!!d.upperOpen);if(t){e?yc=!0:Ia=!0;d=l[0];var Xe=p(l[1])?l[1]:"\uffff";e?H=v?new Z(d,Xe):new Z(d):z=v?new Z(d,
Xe):new Z(d)}e?qf(c,n,H):rf(c,n,z);return q}Nf.prototype.fa=function(a,b,c,d,e){return Tf(this,2,a,b,c,d,e)};Nf.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.e+":"+this.b.getName()};function Uf(){this.clear()}h=Uf.prototype;h.ba=function(){return this};h.setItem=function(a,b){p(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};h.getItem=function(a){return p(this.a[a])?this.a[a]:null};h.removeItem=function(a){delete this.a[a];var b=this.keys;a=Ga(b,a.toString());0<=a&&Fa.splice.call(b,a,1);this.length=this.keys.length};h.length=0;h.key=function(a){a=this.keys[a];return p(a)?this.a[a]:null};
h.clear=function(){this.a={};this.keys=[];this.length=0};function Vf(a){this.f=a||new Uf;this.e={}}function vf(a,b){var c=U(a.a,b);if(c)a.e[b]||(a.e[b]=new Nf(a.c,a.d,c));else throw new Ib('store name "'+b+'" not found.');return a.e[b]}function Sd(a,b){setTimeout(function(){var c=xf(a.c),c=a.d.getItem(c),c=new Id(c);b(c)},10)};function Wf(a,b){this.b=a;this.a=b}Wf.prototype.h=function(a,b){var c=this.b;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.a("complete",null);d.a=null;d.b=null}};function Xf(a,b){this.a=b}B(Xf,ee);Xf.prototype.logger=I("ydn.db.crud.req.SimpleStore");
function xe(a,b,c,d,e,f,g){J(a.logger,Tc(b)+" "+(c?"put":"add")+"Object"+(d?"":"s "+f.length+" objects"));var k=b.a.h(function(a){var n;if(d)n=vf(a,e),a=g?g[0]:void 0,a=of(n,a,f[0],!c),null!=a?N(b,a):(n=Ed(a),n=new $d(n),N(b,n,!0));else{for(var q=e,r=[],t=!1,v=g||{},z=0;z<f.length;z++){var H;e?H=v[z]:(q=g[z],H=q.a,q=q.m);n&&n.getName()==q||(n=vf(a,q));H=of(n,H,f[z],!c);null!=H?r.push(H):(t=!0,r.push(new $d))}N(b,r,t)}k();k=null},a)}
function ue(a,b,c,d){var e=b.a.h(function(a){a=tf(vf(a,c),d);N(b,a);e();e=null},a)}function we(a,b,c,d){var e=b.a.h(function(a){for(var g=[],k=c,l,n=0;n<d.length;n++){var q=d[n];q instanceof Q&&(k=q,q=k.a,k=k.m);l&&l.getName()==k||(l=vf(a,k));q=tf(l,q);g[n]=q}N(b,g,!1);e();e=null},a)}function Ce(a,b,c,d){var e=Tc(b)+" removeById "+c+" "+d;J(a.logger,e);var f=b.a.h(function(g){g=Qf(vf(g,c),d);K(a.logger,"success "+e+(0==g?" [not found]":""));N(b,g);f();f=null},a)}
function De(a,b,c){J(a.logger,Tc(b)+" removeByKeys "+c.length+" keys");var d,e=0,f=b.a.h(function(a){for(var k=0;k<c.length;k++){var l=c[k].m,n=c[k].a;d&&d.getName()==l||(d=vf(a,l));e+=Qf(d,n)}N(b,e);f();f=null},a)}function ze(a,b,c,d){var e=Tc(b)+" removeByKeyRange "+(d?S(d):"");J(a.logger,e);var f=b.a.h(function(g){g=Rf(vf(g,c),d);K(a.logger,e+" deleted "+g+" records.");N(b,g);f();f=null},a)}
function Be(a,b,c,d,e){var f=Tc(b)+" removeByIndexKeyRange "+(e?S(e):"");J(a.logger,f);var g=b.a.h(function(a){a=vf(a,c);for(var f=a.fa(d,e),n=f.length,q=0;q<n;q++)Qf(a,f[q]);N(b,n);g();g=null},a)}function Ae(a,b,c){var d=Tc(b)+" clearByStores";J(a.logger,d);var e=b.a.h(function(a){for(var g=0;g<c.length;g++)vf(a,c[g]).clear();K(this.logger,"success "+d);N(b,c.length);e();e=null},a)}
function se(a,b,c){var d=b.a.h(function(a){for(var f=[],g=0;g<c.length;g++){var k=vf(a,c[g]);f.push(Sf(k))}N(b,f);d();d=null},a)}function te(a,b,c,d,e){var f=Tc(b)+" count"+(null!=e?"Index":"")+(null!=d?"KeyRange":"Store");J(a.logger,f);var g=b.a.h(function(a){a=Sf(vf(a,c),e,d);K(this.logger,"success "+f);N(b,a);g();g=null},a)}
function ve(a,b,c,d,e,f,g,k,l,n){var q=Tc(b)+" "+d+" "+(f?Ed(f):"");J(a.logger,q);var r=b.a.h(function(a){a=Tf(vf(a,d),c,e,f,l,g,k,n,void 0);K(this.logger,q+" "+a.length+" records found.");N(b,a);r();r=null},a)};function Yf(a,b){this.a=b}B(Yf,Xf);function $e(a,b,c,d,e){a=U(a.a,d);return new nf(b,c,a,e)};function qe(a,b){this.a=b}B(qe,Yf);qe.prototype.logger=I("ydn.db.sql.req.SimpleStore");
qe.prototype.executeSql=function(a,b,c){if(c){for(var d=0;d<c.length;d++)b.N=b.N.replace("?",c[d]);cf(b,b.N)}b.g=ef(b);if(b.g){c=b.a.length;if(d=/OFFSET\s+(\d+)/i.exec(b.a))b.Da=parseInt(d[1],10),c=b.a.search(/OFFSET/i);if(d=/LIMIT\s+(\d+)/i.exec(b.a))b.Ca=parseInt(d[1],10),d=b.a.search(/LIMIT/i),d<c&&(c=d);(c=/ORDER BY\s+(.+)/i.exec(b.a.substr(0,c)))?(c=c[1].trim(),(d=c.match(/(ASC|DESC)/i))?(b.wa="DESC"==d[0].toUpperCase(),c=c.replace(/\s+(ASC|DESC)/i,"")):b.wa=!1,b.i=ya(ya(c,'"'),"'")):b.i=void 0;
c=""}else c=b.Y;if(c)throw new ce(c);c=Na(b.b);if(1==c.length){d=U(this.a,c[0]);if(!d)throw new be(c[0]);var e=df(b);if(e)for(var f=0;f<e.length;f++)if(!sd(d,e[f]))throw new F('Index "'+e[f]+'" not found in '+c[0]);var g;b.e?g=new gf(d,b):g=new ff(d,b);g.b(a,this)}else throw new Fb(b.N);};function Zf(a,b,c){pe.call(this,a,b,c)}B(Zf,Ye);Zf.prototype.executeSql=function(a,b){for(var c=new bf(a),d=Na(c.b),e=0;e<d.length;e++){var f=U(this.b,d[e]);if(!f)throw new F("store: "+f+" not exists.");}K(this.logger,"executeSql: "+a+" params: "+b);var g=this.a.request("sql",Na(c.b),c.c);O(g,function(){W(this).executeSql(g,c,b||[])},this);return g};function $f(a,b,c){Y.call(this,a,b,c)}B($f,af);$f.prototype.S=function(a){return new Zf(this,this.b,a)};$f.prototype.executeSql=function(a,b){return this.c.executeSql(a,b)};function ag(a){Vf.call(this,a);this.b=NaN}B(ag,Vf);h=ag.prototype;h.logger=I("ydn.db.con.SimpleStorage");
function Wd(a,b,c){function d(b,c){setTimeout(function(){c?(K(a.logger,a+" opening fail"),e.k(c)):(K(a.logger,a+" version "+a.b+" open"),e.callback(b))},10)}var e=new E;a.d=a.f.ba(b);a.c=b;a.a=c;b=xf(a.c);a.b=NaN;var f=Dd(a.d.getItem(b));p(f.version)&&!y(f.version)&&(f.version=NaN);if(f)if(c=new Id(f),Ld(a.a,c))if(!a.a.sa&&!isNaN(c.version)&&a.a.version>c.version)d(NaN,new ae("existing version "+c.version+" is larger than "+a.a.version));else{f=a.a.version;a.b=p(f)?f:c.version+1;for(f=0;f<a.a.count();f++)var g=
a.a.ka(f);if(a.a instanceof Md)for(f=0;f<c.count();f++)g=c.ka(f),a.a.stores.push(g);f=a.a.toJSON();f.version=a.b||NaN;a.d.setItem(b,S(f));d(c.version||NaN)}else{for(f=0;f<a.a.count();f++)g=a.a.ka(f);a.b=c.version||NaN;d(a.b)}else c=c.toJSON(),a.b=1,c.version=a.b,a.d.setItem(b,S(c)),d(NaN);return e}h.ab=function(){};h.$a=function(){};h.Ta=function(){};h.$=function(){return"memory"};h.close=function(){};function Zd(a,b,c){b(new Wf(a,function(a,b){c(a,b)}))}
h.toString=function(){return"SimpleStorage:"+this.$()+":"+(this.c+":"+this.b)};function bg(){ag.call(this,this)}B(bg,ag);bg.prototype.ba=function(){return window.localStorage};bg.prototype.$=function(){return"localstorage"};Vc.push(function(a,b){if(!b||"localstorage"==b){var c=new bg,d=new Md;Wd(c,a,d);Sd(c,function(a){for(var b=0;b<a.stores.length;b++)vf(c,a.stores[b].getName()).clear()})}});function cg(){ag.call(this,this)}B(cg,ag);cg.prototype.ba=function(){return window.sessionStorage};cg.prototype.$=function(){return"sessionstorage"};
Vc.push(function(a,b){if(!b||"sessionstorage"==b){var c=new cg,d=new Md;Wd(c,a,d);Sd(c,function(a){for(var b=0;b<a.stores.length;b++)vf(c,a.stores[b].getName()).clear()})}});function dg(){};function eg(){}B(eg,dg);eg.prototype.clear=function(){var a=Nb(this.U(!0)),b=this;Ha(a,function(a){b.o.removeAttribute(fg(a));gg(b)})};function hg(a,b){if(G&&!(G&&9<=$b)){ig||(ig=new Ob);this.o=ig.get(a);this.o||(b?this.o=document.getElementById(b):(this.o=document.createElement("userdata"),this.o.addBehavior("#default#userData"),document.body.appendChild(this.o)),Pb(ig,a,this.o));this.va=a;try{this.o.load(this.va)}catch(c){this.o=null}}}B(hg,eg);var jg={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},ig=null;h=hg.prototype;h.o=null;h.va=null;
function fg(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return jg[a]})}h.get=function(a){a=this.o.getAttribute(fg(a));if(!x(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};
h.U=function(a){var b=0,c=this.o.XMLDocument.documentElement.attributes,d=new Kb;d.next=function(){if(b>=c.length)throw Jb;var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;if(!x(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};h.clear=function(){for(var a=this.o.XMLDocument.documentElement,b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);gg(this)};
function gg(a){try{a.o.save(a.va)}catch(b){throw"Storage mechanism: Quota exceeded";}};function kg(){ag.call(this,this)}B(kg,ag);kg.prototype.ba=function(a){return new lg(a)};kg.prototype.$=function(){return"userdata"};function lg(a){this.b=new hg(a);this.length=this.keys().length}h=lg.prototype;h.length=0;h.clear=function(){this.b.clear();this.a=[]};h.keys=function(){this.a||(this.a=[],Mb(this.b,function(a){this.a.push(a)},this));return this.a};h.key=function(a){return this.keys()[a]};h.setItem=function(a,b){this.a&&this.a.push(a);var c=this.b;c.o.setAttribute(fg(a),b);gg(c)};
h.getItem=function(a){a=this.b.get(a);return p(a)?a:null};h.removeItem=function(a){this.a=null;var b=this.b;b.o.removeAttribute(fg(a));gg(b)};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
Ie.prototype.pa=function(a){return"localstorage"==a&&window.localStorage?new bg:"sessionstorage"==a&&window.sessionStorage?new cg:"memory"==a?new ag:"userdata"==a?new kg:null};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
$f.prototype.executeSql=$f.prototype.executeSql;Zf.prototype.executeSql=Zf.prototype.executeSql;function mg(a,b,c){Y.call(this,a,b,c)}B(mg,$f);ja("ydn.db.Storage",mg);function ng(){this.a=ia()}var og=new ng;ng.prototype.get=function(){return this.a};var pg=Xa("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function qg(){this.a=rg}qg.prototype.R=!0;qg.prototype.J=function(){return""};qg.prototype.toString=function(){return"Const{}"};function sg(a){if(a instanceof qg&&a.constructor===qg&&a.a===rg)return"";Ea("expected object of type Const, got '"+a+"'");return"type_error:Const"}var rg={};function tg(){this.a="";this.b=ug}tg.prototype.R=!0;var ug={};tg.prototype.J=function(){return this.a};tg.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function vg(a){var b=new tg;b.a=a;return b}var wg=vg(""),xg=/^[-.%_!# a-zA-Z0-9]+$/;function yg(){this.a=zg}h=yg.prototype;h.R=!0;h.J=function(){return""};h.ra=!0;h.Q=function(){return 1};h.toString=function(){return"SafeUrl{}"};var zg={};function Ag(){this.a=Bg}h=Ag.prototype;h.R=!0;h.J=function(){return""};h.ra=!0;h.Q=function(){return 1};h.toString=function(){return"TrustedResourceUrl{}"};var Bg={};function Cg(){this.a="";this.c=Dg;this.b=null}h=Cg.prototype;h.ra=!0;h.Q=function(){return this.b};h.R=!0;h.J=function(){return this.a};h.toString=function(){return"SafeHtml{"+this.a+"}"};function Eg(a){if(a instanceof Cg&&a.constructor===Cg&&a.c===Dg)return a.a;Ea("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}function Fg(a){if(a instanceof Cg)return a;var b=null;a.ra&&(b=a.Q());return Gg(qa(a.R?a.J():String(a)),b)}
function Hg(a){if(a instanceof Cg)return a;a=Fg(a);var b;b=Eg(a).replace(/  /g," &#160;").replace(/(\r\n|\r|\n)/g,"<br>");return Gg(b,a.Q())}var Ig=/^[a-zA-Z0-9-]+$/,Jg=Xa("action","cite","data","formaction","href","manifest","poster","src"),Kg=Xa("embed","iframe","link","script","style","template");
function Lg(a,b,c){if(!Ig.test(a))throw Error("Invalid tag name <"+a+">.");if(a.toLowerCase()in Kg)throw Error("Tag name <"+a+"> is not allowed for SafeHtml.");var d=null,e="<"+a;if(b)for(var f in b){if(!Ig.test(f))throw Error('Invalid attribute name "'+f+'".');var g=b[f];if(null!=g){var k,l=a;k=f;if(g instanceof qg)g=sg(g);else if("style"==k.toLowerCase()){if(!A(g))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof g+" given: "+g);if(!(g instanceof
tg)){var l="",n=void 0;for(n in g){if(!/^[-_a-zA-Z0-9]+$/.test(n))throw Error("Name allows only [-_a-zA-Z0-9], got: "+n);var q=g[n];null!=q&&(q instanceof qg?q=sg(q):xg.test(q)||(Ea("String value allows only [-.%_!# a-zA-Z0-9], got: "+q),q="zClosurez"),l+=n+":"+q+";")}g=l?vg(l):wg}g instanceof tg&&g.constructor===tg&&g.b===ug?g=g.a:(Ea("expected object of type SafeStyle, got '"+g+"'"),g="type_error:SafeStyle")}else{if(/^on/i.test(k))throw Error('Attribute "'+k+'" requires goog.string.Const value, "'+
g+'" given.');if(k.toLowerCase()in Jg)if(g instanceof Ag)g instanceof Ag&&g.constructor===Ag&&g.a===Bg?g="":(Ea("expected object of type TrustedResourceUrl, got '"+g+"'"),g="type_error:TrustedResourceUrl");else if(g instanceof yg)g instanceof yg&&g.constructor===yg&&g.a===zg?g="":(Ea("expected object of type SafeUrl, got '"+g+"'"),g="type_error:SafeUrl");else throw Error('Attribute "'+k+'" on tag "'+l+'" requires goog.html.SafeUrl or goog.string.Const value, "'+g+'" given.');}g.R&&(g=g.J());k=k+'="'+
qa(String(g))+'"';e=e+(" "+k)}}p(c)?u(c)||(c=[c]):c=[];!0===pg[a.toLowerCase()]?e+=">":(d=Mg(c),e+=">"+Eg(d)+"</"+a+">",d=d.Q());(a=b&&b.dir)&&(/^(ltr|rtl|auto)$/i.test(a)?d=0:d=null);return Gg(e,d)}function Mg(a){function b(a){u(a)?Ha(a,b):(a=Fg(a),d+=Eg(a),a=a.Q(),0==c?c=a:0!=a&&c!=a&&(c=null))}var c=0,d="";Ha(arguments,b);return Gg(d,c)}var Dg={};function Gg(a,b){var c=new Cg;c.a=a;c.b=b;return c}var Ng=Gg("",0);function Og(a){this.e=a||"";this.f=og}Og.prototype.c=!0;Og.prototype.a=!0;Og.prototype.b=!1;function Pg(a){a=new Date(a.f);return Qg(a.getFullYear()-2E3)+Qg(a.getMonth()+1)+Qg(a.getDate())+" "+Qg(a.getHours())+":"+Qg(a.getMinutes())+":"+Qg(a.getSeconds())+"."+Qg(Math.floor(a.getMilliseconds()/10))}function Qg(a){return 10>a?"0"+a:String(a)}function Rg(a,b){var c=(a.f-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Sg(a){Og.call(this,a)}B(Sg,Og);
Sg.prototype.b=!0;Sg.prototype.d=function(a){return a?Tg(this,a).J():""};
function Tg(a,b){var c;switch(b.e.value){case ic.value:c="dbg-sh";break;case jc.value:c="dbg-sev";break;case kc.value:c="dbg-w";break;case lc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(a.e," ");a.a&&d.push("[",Pg(b),"] ");d.push("[",Rg(b,a.f.get()),"s] ");d.push("[",b.c,"] ");var d=Hg(d.join("")),e=Ng;a.b&&b.b&&(e=Mg(Lg("br"),Hg(b.a||"")));var f=Hg(b.d);c=Lg("span",{"class":c},Mg(f,e));return a.c?Mg(d,c,Lg("br")):Mg(d,c)}function Ug(a){Og.call(this,a)}B(Ug,Og);
Ug.prototype.d=function(a){var b=[];b.push(this.e," ");this.a&&b.push("[",Pg(a),"] ");b.push("[",Rg(a,this.f.get()),"s] ");b.push("[",a.c,"] ");b.push(a.d);this.b&&a.b&&b.push("\n",a.a);this.c&&b.push("\n");return b.join("")};function Vg(){this.e=ha(this.f,this);this.a=new Ug;this.a.a=!1;this.a.b=!1;this.b=this.a.c=!1;this.c="";this.d={}}Vg.prototype.f=function(a){if(!this.d[a.c]){var b=this.a.d(a),c=Wg;if(c)switch(a.e){case ic:Xg(c,"info",b);break;case jc:Xg(c,"error",b);break;case kc:Xg(c,"warn",b);break;default:Xg(c,"debug",b)}else this.c+=b}};var Wg=m.console;function Xg(a,b,c){if(a[b])a[b](c);else a.log(c)};var Yg=!G||G&&9<=$b;!Sb&&!G||G&&G&&9<=$b||Sb&&Yb("1.9.1");G&&Yb("9");function Zg(a,b){Ta(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in $g?a.setAttribute($g[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var $g={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function ah(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!w(f)||A(f)&&0<f.nodeType?d(f):Ha(bh(f)?Na(f):f,d)}}function bh(a){if(a&&"number"==typeof a.length){if(A(a))return"function"==typeof a.item||"string"==typeof a.item;if(ca(a))return"function"==typeof a.item}return!1}function ch(a){this.a=a||m.document||document}
function dh(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
ch.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!Yg&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',qa(g.name),'"');if(g.type){f.push(' type="',qa(g.type),'"');var k={};Wa(k,g);delete k.type;g=k}f.push(">");f=f.join("")}f=d.createElement(f);g&&(x(g)?f.className=g:u(g)?f.className=g.join(" "):Zg(f,g));2<e.length&&ah(d,f,e);return f};
ch.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function eh(a){G&&p(a.cssText)?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"}
;function fh(a){this.e=ha(this.f,this);this.b=new Sg;this.c=this.b.a=!1;this.a=a;this.d=this.a.ownerDocument||this.a.document;a=(a=this.a)?new ch(9==a.nodeType?a:a.ownerDocument||a.document):ma||(ma=new ch);var b=null,c=a.a;G&&c.createStyleSheet?(b=c.createStyleSheet(),eh(b)):(c=dh(a,"head")[0],c||(b=dh(a,"body")[0],c=a.b("head"),b.parentNode.insertBefore(c,b)),b=a.b("style"),eh(b),c.appendChild(b));this.a.className+=" logdiv"}
fh.prototype.f=function(a){if(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.d.createElement("div");c.className="logmsg";a=Tg(this.b,a);c.innerHTML=Eg(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)}};fh.prototype.clear=function(){this.a&&(this.a.innerHTML=Eg(Ng))};G&&Yb("9");!Tb||Yb("528");Sb&&Yb("1.9b")||G&&Yb("8")||Rb&&Yb("9.5")||Tb&&Yb("528");Sb&&!Yb("8")||G&&Yb("9");var gh=null,hh=null;I("ydn.debug");ja("ydn.debug.log",function(a,b,c){a=a||"ydn";if(y(b))b=new hc("log",b);else if(x(b)){b=b.toUpperCase();if(!rc){rc={};for(var d=0,e;e=qc[d];d++)rc[e.value]=e,rc[e.name]=e}b=rc[b]||null}else b=nc;(d=I(a))?d.b=b:window.console.log("logger "+a+" not available.");p(c)?!hh&&(a=hh=new fh(c),1!=a.c&&(c=wc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.c=!0),a=wc())&&(a.b=kc):!gh&&!hh&&(a=gh=new Vg,1!=a.b&&(c=wc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.b=!0),a=wc())&&(a.b=kc)}); 

//# sourceMappingURL=ydn.db-wu-sql-dev.js.map
return ydn;}, (this || {}));
            
(function (name, definition, context) {if (typeof context['module'] !== 'undefined' && context['module']['exports']) {context['module']['exports'] = definition.apply(context);}else if (typeof context['define'] !== 'undefined' && context['define'] === 'function' && context['define']['amd']) {define(name, [], definition);}else {context[name] = definition();}})('ydn', function () {var h,m=this;function p(a){return void 0!==a}
function aa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return"array"==aa(a)}function v(a){var b=aa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function w(a){return"string"==typeof a}function ba(a){return"boolean"==typeof a}function ca(a){return"number"==typeof a}function da(a){return"function"==aa(a)}function x(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ea(a,b,c){return a.call.apply(a.bind,arguments)}
function fa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ga(a,b,c){ga=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa;return ga.apply(null,arguments)}var ha=Date.now||function(){return+new Date};
function ja(a,b){var c=a.split("."),d=m;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&p(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}function z(a,b){function c(){}c.prototype=b.prototype;a.q=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Pa=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function ka(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function la(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function A(a){if(Error.captureStackTrace)Error.captureStackTrace(this,A);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}z(A,Error);A.prototype.name="CustomError";var ma;function na(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}var oa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function pa(a){if(!qa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ra,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(sa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ta,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ua,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(va,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(wa,"&#0;"));return a}
var ra=/&/g,sa=/</g,ta=/>/g,ua=/"/g,va=/'/g,wa=/\x00/g,qa=/[\x00&<>"']/,xa={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},ya={"'":"\\'"};
function za(a){a=String(a);if(!a.quote){for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=c+1,g;if(!(g=xa[d])){if(!(31<e&&127>e))if(d in ya)d=ya[d];else if(d in xa)d=ya[d]=xa[d];else{e=d;g=d.charCodeAt(0);if(31<g&&127>g)e=d;else{if(256>g){if(e="\\x",16>g||256<g)e+="0"}else e="\\u",4096>g&&(e+="0");e+=g.toString(16).toUpperCase()}d=ya[d]=e}g=d}b[f]=g}b.push('"')}}function Ba(a,b){return a<b?-1:a>b?1:0};function Ca(a,b){b.unshift(a);A.call(this,na.apply(null,b));b.shift()}z(Ca,A);Ca.prototype.name="AssertionError";function Da(a,b){throw new Ca("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Ea=Array.prototype,C=Ea.indexOf?function(a,b,c){return Ea.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(w(a))return w(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Fa=Ea.forEach?function(a,b,c){Ea.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=w(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ga=Ea.map?function(a,b,c){return Ea.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=
w(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ha=Ea.some?function(a,b,c){return Ea.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=w(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function Ia(a,b){var c=Ja(a,b,void 0);return 0>c?null:w(a)?a.charAt(c):a[c]}function Ja(a,b,c){for(var d=a.length,e=w(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}
function Ka(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function La(a,b){if(!v(a)||!v(b)||a.length!=b.length)return!1;for(var c=a.length,d=Ma,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Ma(a,b){return a===b};var Na;a:{var Oa=m.navigator;if(Oa){var Pa=Oa.userAgent;if(Pa){Na=Pa;break a}}Na=""}function D(a){return-1!=Na.indexOf(a)};function Qa(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Ra(a,b){for(var c=v(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],p(a));c++);return a}var Sa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ta(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Sa.length;f++)c=Sa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function Ua(a){var b=arguments.length;if(1==b&&u(arguments[0]))return Ua.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};function Va(a){m.setTimeout(function(){throw a;},0)}var Wa;
function Xa(){var a=m.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(a=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=ga(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!D("Trident")&&!D("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(p(c.next)){c=c.next;var a=c.ia;c.ia=null;a()}};return function(a){d.next={ia:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=
null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){m.setTimeout(a,0)}};function Ya(a,b){Za||$a();ab||(Za(),ab=!0);bb.push(new cb(a,b))}var Za;function $a(){if(m.Promise&&m.Promise.resolve){var a=m.Promise.resolve();Za=function(){a.then(db)}}else Za=function(){var a=db;!da(m.setImmediate)||m.Window&&m.Window.prototype.setImmediate==m.setImmediate?(Wa||(Wa=Xa()),Wa(a)):m.setImmediate(a)}}var ab=!1,bb=[];function db(){for(;bb.length;){var a=bb;bb=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.a.call(c.b)}catch(d){Va(d)}}}ab=!1}function cb(a,b){this.a=a;this.b=b};function eb(a,b){this.b=fb;this.f=void 0;this.a=this.e=null;this.c=this.d=!1;try{var c=this;a.call(b,function(a){gb(c,hb,a)},function(a){try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(b){}gb(c,ib,a)})}catch(d){gb(this,ib,d)}}var fb=0,hb=2,ib=3;eb.prototype.then=function(a,b,c){return jb(this,da(a)?a:null,da(b)?b:null,c)};ka(eb);function kb(a,b){a.a&&a.a.length||a.b!=hb&&a.b!=ib||lb(a);a.a||(a.a=[]);a.a.push(b)}
function jb(a,b,c,d){var e={Q:null,ma:null,na:null};e.Q=new eb(function(a,g){e.ma=b?function(c){try{var e=b.call(d,c);a(e)}catch(n){g(n)}}:a;e.na=c?function(b){try{var e=c.call(d,b);a(e)}catch(n){g(n)}}:g});e.Q.e=a;kb(a,e);return e.Q}eb.prototype.h=function(a){this.b=fb;gb(this,hb,a)};eb.prototype.j=function(a){this.b=fb;gb(this,ib,a)};
function gb(a,b,c){if(a.b==fb){if(a==c)b=ib,c=new TypeError("Promise cannot resolve to itself");else{if(la(c)){a.b=1;c.then(a.h,a.j,a);return}if(x(c))try{var d=c.then;if(da(d)){mb(a,c,d);return}}catch(e){b=ib,c=e}}a.f=c;a.b=b;lb(a);b!=ib||nb(a,c)}}function mb(a,b,c){function d(b){f||(f=!0,a.j(b))}function e(b){f||(f=!0,a.h(b))}a.b=1;var f=!1;try{c.call(b,e,d)}catch(g){d(g)}}function lb(a){a.d||(a.d=!0,Ya(a.m,a))}
eb.prototype.m=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;b++){var c=a[b],d=this.f;if(this.b==hb)c.ma(d);else{if(c.Q)for(var e=void 0,e=this;e&&e.c;e=e.e)e.c=!1;c.na(d)}}}this.d=!1};function nb(a,b){a.c=!0;Ya(function(){a.c&&ob.call(null,b)})}var ob=Va;/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function E(a,b){this.h=[];this.X=b||null;this.b=this.c=!1;this.d=void 0;this.Z=this.K=this.j=!1;this.e=0;this.f=null;this.L=0}h=E.prototype;h.S=function(a,b){this.j=!1;pb(this,a,b)};function pb(a,b,c){a.c=!0;a.d=c;a.b=!b;a.fa()}function qb(a){if(a.c){if(!a.Z)throw new rb;a.Z=!1}}h.callback=function(a){qb(this);pb(this,!0,a)};h.i=function(a){qb(this);pb(this,!1,a)};h.u=function(a,b){return sb(this,a,null,b)};h.ta=function(a,b){return sb(this,null,a,b)};h.ha=function(a,b){return sb(this,a,a,b)};
function sb(a,b,c,d){a.h.push([b,c,d]);a.c&&a.fa();return a}h.then=function(a,b,c){var d,e,f=new eb(function(a,b){d=a;e=b});sb(this,d,function(a){e(a)});return f.then(a,b,c)};ka(E);function tb(a){return Ha(a.h,function(a){return da(a[1])})}
E.prototype.fa=function(){this.e&&this.c&&tb(this)&&(ub(this.e),this.e=0);this.f&&(this.f.L--,delete this.f);for(var a=this.d,b=!1,c=!1;this.h.length&&!this.j;){var d=this.h.shift(),e=d[0],f=d[1],d=d[2];if(e=this.b?f:e)try{var g=e.call(d||this.X,a);p(g)&&(this.b=this.b&&(g==a||g instanceof Error),this.d=a=g);la(a)&&(this.j=c=!0)}catch(k){a=k,this.b=!0,tb(this)||(b=!0)}}this.d=a;c&&(c=ga(this.S,this,!0),g=ga(this.S,this,!1),a instanceof E?(sb(a,c,g),a.K=!0):a.then(c,g));b&&(a=new vb(a),wb[a.V]=a,this.e=
a.V)};function rb(){A.call(this)}z(rb,A);rb.prototype.message="Deferred has already fired";rb.prototype.name="AlreadyCalledError";function vb(a){this.V=m.setTimeout(ga(this.b,this),0);this.a=a}vb.prototype.b=function(){delete wb[this.V];throw this.a;};var wb={};function ub(a){var b=wb[a];b&&(m.clearTimeout(b.V),delete wb[a])};function F(a){A.call(this,a);this.name="ydn.error.ArgumentException"}z(F,A);function xb(a){A.call(this,a);this.name="ydn.error.NotSupportedException"}z(xb,A);function yb(a){A.call(this,a);this.name="ydn.error.NotImplementedException"}z(yb,A);function zb(a){A.call(this,a);this.name="ydn.error.InvalidOperationException"}z(zb,A);function Ab(a){Error.captureStackTrace?Error.captureStackTrace(this,Ab):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}z(Ab,Error);
Ab.prototype.name="ydn.error.InternalError";var Bb="StopIteration"in m?m.StopIteration:Error("StopIteration");function Cb(){}Cb.prototype.next=function(){throw Bb;};Cb.prototype.J=function(){return this};function Db(a){if(a instanceof Cb)return a;if("function"==typeof a.J)return a.J(!1);if(v(a)){var b=0,c=new Cb;c.next=function(){for(;;){if(b>=a.length)throw Bb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Eb(a,b,c){if(v(a))try{Fa(a,b,c)}catch(d){if(d!==Bb)throw d;}else{a=Db(a);try{for(;;)b.call(c,a.next(),void 0,a)}catch(e){if(e!==Bb)throw e;}}}function Fb(a){if(v(a))return Ka(a);a=Db(a);var b=[];Eb(a,function(a){b.push(a)});return b};function Gb(a,b){this.b={};this.a=[];this.d=this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)Hb(this,arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof Gb)e=a.U(),d=a.ja();else{var c=[],f=0;for(e in a)c[f++]=e;e=c;c=[];f=0;for(d in a)c[f++]=a[d];d=c}for(c=0;c<e.length;c++)Hb(this,e[c],d[c])}}h=Gb.prototype;h.ja=function(){Ib(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};
h.U=function(){Ib(this);return this.a.concat()};h.clear=function(){this.b={};this.d=this.c=this.a.length=0};function Ib(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Object.prototype.hasOwnProperty.call(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Object.prototype.hasOwnProperty.call(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}
function Hb(a,b,c){Object.prototype.hasOwnProperty.call(a.b,b)||(a.c++,a.a.push(b),a.d++);a.b[b]=c}h.forEach=function(a,b){for(var c=this.U(),d=0;d<c.length;d++){var e=c[d];a.call(b,Object.prototype.hasOwnProperty.call(this.b,e)?this.b[e]:void 0,e,this)}};h.clone=function(){return new Gb(this)};
h.J=function(a){Ib(this);var b=0,c=this.a,d=this.b,e=this.d,f=this,g=new Cb;g.next=function(){for(;;){if(e!=f.d)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw Bb;var g=c[b++];return a?g:d[g]}};return g};var Jb=D("Opera")||D("OPR"),H=D("Trident")||D("MSIE"),Kb=D("Gecko")&&-1==Na.toLowerCase().indexOf("webkit")&&!(D("Trident")||D("MSIE")),Lb=-1!=Na.toLowerCase().indexOf("webkit");Lb&&D("Mobile");D("Macintosh");D("Windows");D("Linux");var Mb=m.navigator||null;Mb&&(Mb.appVersion||"").indexOf("X11");D("Android");!D("iPhone")||D("iPod")||D("iPad");D("iPad");function Nb(){var a=m.document;return a?a.documentMode:void 0}
var Ob=function(){var a="",b;if(Jb&&m.opera)return a=m.opera.version,da(a)?a():a;Kb?b=/rv\:([^\);]+)(\)|;)/:H?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Lb&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Na))?a[1]:"");return H&&(b=Nb(),b>parseFloat(a))?String(b):a}(),Pb={};
function Qb(a){var b;if(!(b=Pb[a])){b=0;for(var c=oa(String(Ob)).split("."),d=oa(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var q=l.exec(g)||["","",""],r=n.exec(k)||["","",""];if(0==q[0].length&&0==r[0].length)break;b=Ba(0==q[1].length?0:parseInt(q[1],10),0==r[1].length?0:parseInt(r[1],10))||Ba(0==q[2].length,0==r[2].length)||Ba(q[2],r[2])}while(0==b)}b=Pb[a]=0<=b}return b}
var Rb=m.document,Sb=Rb&&H?Nb()||("CSS1Compat"==Rb.compatMode?parseInt(Ob,10):5):void 0;function Tb(a){var b;b||(b=Ub(a||arguments.callee.caller,[]));return b}
function Ub(a,b){var c=[];if(0<=C(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Vb(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Vb(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Ub(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Vb(a){if(Wb[a])return Wb[a];a=String(a);if(!Wb[a]){var b=/function ([^\(]+)/.exec(a);Wb[a]=b?b[1]:"[Anonymous]"}return Wb[a]}var Wb={};function Xb(a,b,c,d,e){"number"==typeof e||Yb++;this.f=d||ha();this.e=a;this.d=b;this.c=c;delete this.b;delete this.a}Xb.prototype.b=null;Xb.prototype.a=null;var Yb=0;function Zb(a){this.e=a;this.a=this.d=this.b=this.c=null}function $b(a,b){this.name=a;this.value=b}$b.prototype.toString=function(){return this.name};var ac=new $b("SHOUT",1200),bc=new $b("SEVERE",1E3),cc=new $b("WARNING",900),dc=new $b("INFO",800),ec=new $b("CONFIG",700),gc=new $b("FINE",500),hc=new $b("FINER",400),ic=new $b("FINEST",300),jc=[new $b("OFF",Infinity),ac,bc,cc,dc,ec,gc,hc,ic,new $b("ALL",0)],kc=null;Zb.prototype.getName=function(){return this.e};
function lc(a){if(a.b)return a.b;if(a.c)return lc(a.c);Da("Root logger has no level set.");return null}Zb.prototype.log=function(a,b,c){if(a.value>=lc(this).value)for(da(b)&&(b=b()),a=this.f(a,b,c,Zb.prototype.log),b="log:"+a.d,m.console&&(m.console.timeStamp?m.console.timeStamp(b):m.console.markTimeline&&m.console.markTimeline(b)),m.msWriteProfilerMark&&m.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.a)for(var e=0,f=void 0;f=c.a[e];e++)f(d);b=b.c}};
Zb.prototype.f=function(a,b,c,d){var e=new Xb(a,String(b),this.e);if(c){var f;f=d||arguments.callee.caller;e.b=c;var g;try{var k;var l;c:{for(var n=["window","location","href"],q=m,r;r=n.shift();)if(null!=q[r])q=q[r];else{l=null;break c}l=q}if(w(c))k={message:c,name:"Unknown error",lineNumber:"Not available",fileName:l,stack:"Not available"};else{var t,y,n=!1;try{t=c.lineNumber||c.Qa||"Not available"}catch(B){t="Not available",n=!0}try{y=c.fileName||c.filename||c.sourceURL||m.$googDebugFname||l}catch(G){y=
"Not available",n=!0}k=!n&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||"Not available",name:c.name||"UnknownError",lineNumber:t,fileName:y,stack:c.stack||"Not available"}}g="Message: "+pa(k.message)+'\nUrl: <a href="view-source:'+k.fileName+'" target="_new">'+k.fileName+"</a>\nLine: "+k.lineNumber+"\n\nBrowser stack:\n"+pa(k.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+pa(Tb(f)+"-> ")}catch(ia){g="Exception trying to expose exception! You win, we lose. "+ia}e.a=g}return e};
var mc={},nc=null;function oc(){nc||(nc=new Zb(""),mc[""]=nc,nc.b=ec)}function pc(){oc();return nc}function I(a){oc();var b;if(!(b=mc[a])){b=new Zb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=I(a.substr(0,c));c.d||(c.d={});c.d[d]=b;b.c=c;mc[a]=b}return b};function qc(a,b){a&&a.log(cc,b,void 0)}function rc(a,b){a&&a.log(gc,b,void 0)};function J(a,b){a&&a.log(ic,b,void 0)}function K(a,b){a&&a.log(hc,b,void 0)};function L(a,b){E.call(this,0,b);this.r=[]}z(L,E);L.prototype.Da=function(a,b){this.r.push([a,b]);return this};L.prototype.callback=function(a){this.r.length=0;L.q.callback.call(this,a)};L.prototype.i=function(a){this.r.length=0;L.q.i.call(this,a)};L.prototype.Ea=function(){return this};E.prototype.done=E.prototype.u;E.prototype.fail=E.prototype.ta;E.prototype.always=E.prototype.ha;L.prototype.then=L.prototype.then;function sc(a,b){var c,d;2==arguments.length&&w(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=v(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],p(a));c++);return a}var tc={};
function uc(a){var b=[a];a=new vc;for(var c=0,d,e;void 0!==(e=b.pop());){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(tc);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),wc(a,e);else if(e instanceof Date)c+=2,a.write(c),wc(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,
f>>2|255,(f|3)<<6)}c.write(0)}else if(e===tc)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}
function wc(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function xc(a){var b=yc(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=yc(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(yc(a)|0):yc(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function zc(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=yc(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Ac(a){this.a=null;this.b=a;this.c=this.b.length-1;this.index=-1}function yc(a){return a.a=a.index<a.c?parseInt(a.b.charAt(++a.index)+a.b.charAt(++a.index),16):null}
function vc(){this.a=[];this.b=void 0}vc.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};vc.prototype.toString=function(){return this.a.length?this.a.join(""):""};function Bc(a,b){var c=uc(a),d=uc(b);return c>d?1:c==d?0:-1};var Cc={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Dc=Cc.READ_ONLY,M=Cc.READ_WRITE,Ec=Cc.VERSION_CHANGE,Fc=m.indexedDB||m.mozIndexedDB||m.webkitIndexedDB||m.moz_indexedDB||m.msIndexedDB;function N(a,b,c){L.call(this,0,c);this.D=a;this.r=[];this.m=[];this.oa=[];this.a=null;this.M=""}z(N,L);h=N.prototype;h.M="";h.logger=I("ydn.db.Request");function Gc(a,b,c){a.a=b;a.M=c;K(a.logger,a+" BEGIN");if(b){for(c=0;c<a.m.length;c++)a.m[c][0].call(a.m[c][1],b);a.m.length=0}}function Hc(a){K(a.logger,a+" END");a.a=null}h.ua=function(){return!!this.a};
h.abort=function(){K(this.logger,this+" aborting "+this.a);if(this.a)if(da(this.a.abort))this.a.abort();else if(da(this.a.executeSql))this.a.executeSql("ABORT",[],function(){},function(){return!0});else throw new xb;else throw new Ic(this+" No active transaction");};function O(a,b,c){var d=a.oa.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){O(a,b,c)}):c?a.i(b):a.callback(b)}function Jc(a,b,c){a.oa.push([b,c])}function P(a,b,c){a.a?b.call(c,a.a):a.m.push([b,c])}
h.callback=function(a){K(this.logger,this+" SUCCESS");N.q.callback.call(this,a)};h.i=function(a){K(this.logger,this+" ERROR");N.q.i.call(this,a)};h.state=function(){return this.c?this.b?"rejected":"resolved":"pending"};function Kc(a){var b="";a.M&&(b=a.a?"*":"",b="["+a.M+b+"]");return a.D+b}function Lc(a,b){var c=new N(a);O(c,b);return c}h.toString=function(){return"Request:"+Kc(this)};
h.fa=function(){this.e&&this.c&&tb(this)&&(ub(this.e),this.e=0);this.f&&(this.f.L--,delete this.f);for(var a=this.d,b=!1;this.h.length&&!this.j;){var c=this.h.shift(),d=c[0],e=c[1],c=c[2];if(d=this.b?e:d)d=d.call(c||this.X,a),p(d)&&(this.b=this.b&&(d==a||d instanceof Error),this.d=a=d),la(a)&&(this.j=b=!0)}this.d=a;b&&(b=ga(this.S,this,!0),d=ga(this.S,this,!1),a instanceof E?(sb(a,b,d),a.K=!0):a.then(b,d))};
h.toJSON=function(){var a=(this.M||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.D?this.D.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var Mc=Fc&&Fc.cmp?ga(Fc.cmp,Fc):Bc,Nc=[];function Oc(a,b){this.type=a;this.target=b};function Pc(a,b){Oc.call(this,a,b)}z(Pc,Oc);Pc.prototype.a=function(){return this.b};function Qc(a,b,c,d,e){Oc.call(this,a,b);this.version=c;this.pa=d;this.la=e}z(Qc,Pc);h=Qc.prototype;h.name="ReadyEvent";h.version=NaN;h.pa=NaN;h.la=null;h.Ma=function(){return this.version};h.xa=function(){return this.pa};h.wa=function(){return this.la};function Rc(a,b,c){Oc.call(this,c||"error",a);this.error=b}z(Rc,Pc);Rc.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};
Rc.prototype.name="ErrorEvent";Rc.prototype.error=null;Rc.prototype.c=function(){return this.error};function Sc(a,b){Rc.call(this,a,b,"fail")}z(Sc,Rc);Sc.prototype.name="FailEvent";function Q(a,b,c){var d;if(x(a))d=a.store,b=a.id,null!=a.parent&&(c=new Q(a.parent));else if(p(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new Q(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!p(b))throw Error("Invalid key value: "+a);this.b=d;this.a=b;this.parent=c||null}h=Q.prototype;h.toJSON=function(){var a={store:this.b,id:this.a};this.parent&&(a.parent=this.parent.toJSON());return a};h.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.b+"^:"+this.a};
h.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};h.Ka=function(){return this.b};h.va=function(){return this.a};h.Ja=function(){return this.parent};function R(a,b,c,d){a>b&&(b=a=void 0);null===a&&(a=void 0);null===b&&(b=void 0);this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d}R.prototype.lower=void 0;R.prototype.upper=void 0;R.prototype.toJSON=function(){var a;a=this||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}};R.only=function(a){return new R(a,a,!1,!1)};R.bound=function(a,b,c,d){return new R(a,b,c,d)};R.upperBound=function(a,b){return new R(void 0,a,void 0,!!b)};
R.lowerBound=function(a,b){return new R(a,void 0,!!b,void 0)};function Tc(a){return null!=a?null!=a.upper&&null!=a.lower?Uc.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?Uc.upperBound(a.upper,a.upperOpen):null!=a.lower?Uc.lowerBound(a.lower,a.lowerOpen):null:null}
function Vc(a){if(a instanceof R)return"";if(null!=a){if(x(a)){for(var b in a){var c;if(c=a.hasOwnProperty(b))c=!(0<=C(["lower","upper","lowerOpen","upperOpen"],b));if(c)return'invalid attribute "'+b+'" in key range object'}return""}return"key range must be an object"}return""}var Uc=m.IDBKeyRange||m.webkitIDBKeyRange||R;function Wc(a,b,c,d,e,f){p(e)||(e=u(a)?a.join(", "):a);if(null!=a&&!w(a)&&!v(a))throw new F("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);u(a)&&Object.freeze&&Object.freeze(a);!p(a)&&p(e)&&(a=e);this.keyPath=a;this.h=v(this.keyPath);this.a=e;this.type=Xc(b);if(p(b)){if(!p(this.type))throw new F("type invalid in index: "+this.a);if(u(this.keyPath))throw new F('composite key for store "'+this.a+'" must not specified type');}this.d=!!c;this.c=!!d;this.f=w(e)?e:u(a)?this.keyPath.join(","):
a;za(this.f);this.b=this.h?null:this.keyPath.split(".");this.e=f||null}function Yc(a,b){if(null!=b){if(v(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=sc(b,a.keyPath[d]);c[d]=f}return c}return sc(b,a.keyPath)}}var Zc=["BLOB","DATE","INTEGER","NUMERIC","TEXT"];function Xc(a){if(w(a))return a=C(Zc,a),Zc[a]}h=Wc.prototype;h.getName=function(){return this.a};h.toJSON=function(){return{name:this.a,keyPath:this.keyPath,type:this.type,unique:this.d,multiEntry:this.c}};
h.clone=function(){var a=u(this.keyPath)?Ka(this.keyPath):this.keyPath;return new Wc(a,this.type,this.d,this.c,this.a,this.e)};function $c(a,b){return null!=a||null!=b?null!=a?null!=b?v(a)&&v(b)?La(a,b)?null:"expect: "+a+", but: "+b:ad(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}h.hint=function(a){if(!a)return this;var b=u(this.keyPath)?Ka(this.keyPath):this.keyPath,c=this.type;p(a.type)||"TEXT"!=c||(c=void 0);return new Wc(b,c,this.d,this.c,a.a)};
h.toString=function(){var a=this.c?"MultiEntry":"";this.b&&1<this.b.length&&(a+="Compound");return a+"Index:"+this.a};function bd(a,b,c,d,e,f,g,k){if(!w(a))throw new F("store name must be a string");this.b=a;this.keyPath=p(b)?b:null;this.e=v(this.keyPath);if(null!==this.keyPath&&!w(this.keyPath)&&!this.e)throw new F("keyPath must be a string or array");if(null!=c&&!ba(c))throw new F('invalid autoIncrement value in store "'+a+'"');this.c=!!c;var l;if(null!=d){l=Xc(d);if(!p(l))throw new F('type "'+d+'" for primary key in store "'+this.b+'" is invalid.');if(this.e)throw new F('composite key for store "'+this.b+'" must not specified type');
}this.type=null!=l?l:this.c?"INTEGER":void 0;this.d=w(this.keyPath)?this.keyPath.split("."):[];this.a=e||[];this.v=!!f;this.qa=!!g;this.j=u(this.keyPath)?this.keyPath.join(","):w(this.keyPath)?this.keyPath:"_ROWID_";za(this.j);if(this.h=!!k){if(this.keyPath)throw new F('encrypted store "'+this.b+'" must not use inline key');if(this.c)throw new F('encrypted store "'+this.b+'" must not use key generator');}this.f=[]}h=bd.prototype;h.v=!1;h.qa=!1;
h.toJSON=function(){for(var a=[],b=0;b<this.a.length;b++)a.push(this.a[b].toJSON());return{name:this.b,keyPath:this.keyPath,autoIncrement:this.c,type:this.type,indexes:a}};
function cd(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==C(b,c))throw new F('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(u(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==C(f,g))throw new F("Unknown field: "+g+" in "+S(e));e=new Wc(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);
p(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new bd(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}h.clone=function(){return cd(this.toJSON())};h.index=function(a){return this.a[a]||null};function dd(a,b){return Ia(a.a,function(a){return a.getName()==b})}function ed(a,b){return b===a.keyPath?!0:Ha(a.a,function(a){return a.getName()==b})}h.getName=function(){return this.b};
function fd(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.e){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(sc(b,a.keyPath[d]));return c}if(a.keyPath)return Ra(b,a.d)}}function gd(a,b,c){for(var d=0;d<a.d.length;d++){var e=a.d[d];if(d==a.d.length-1){b[e]=c;break}p(b[e])||(b[e]={});b=b[e]}}
function hd(a,b){if(!b)return"missing store: "+a.b;if(a.b!=b.b)return"store name, expect: "+a.b+", but: "+b.b;var c=$c(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(p(a.c)&&p(b.c)&&a.c!=b.c)return"autoIncrement, expect:  "+a.c+", but: "+b.c;if(a.a.length!=b.a.length)return"indexes length, expect:  "+a.a.length+", but: "+b.a.length;if(p(a.type)&&p(b.type)&&(v(a.type)?!La(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.a.length;c++){var d=dd(b,a.a[c].getName()),
e;e=a.a[c];if(d)if(e.a!=d.a)e="name, expect: "+e.a+", but: "+d.a;else{var f=$c(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.d&&null!=d.d&&e.d!=d.d?"unique, expect: "+e.d+", but: "+d.d:null!=e.c&&null!=d.c&&e.c!=d.c?"multiEntry, expect: "+e.c+", but: "+d.c:p(e.type)&&p(d.type)&&(v(e.type)?!La(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.a;if(0<e.length)return'index "'+a.a[c].getName()+'" '+e}return""}
function id(a,b){if(b)for(var c=0;c<a.a.length;c++){var d=a.a[c],e=b;if(d.e){var f=d.e(e),g=typeof f;if("string"==g||"number"==g||f instanceof Date||u(f)){for(g=0;g<d.b.length-1;g++)x(e[d.b[g]])||(e[d.b[g]]={});e[d.b[d.b.length-1]]=f}}}}function T(a,b,c,d,e){for(var f=0;f<a.f.length;f++)d!==f&&a.f[f].call(e,b,c)}h.toString=function(){return"Store:"+this.b+"["+this.a.length+"index]"};function jd(a){return eval("("+a+")")}function kd(){}
function ld(a,b,c){switch(typeof b){case "string":md(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(u(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),ld(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),md(e,c),c.push(":"),ld(a,f,c),d=","));c.push("}");
break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var nd={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},od=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function md(a,b){b.push('"',a.replace(od,function(a){if(a in nd)return nd[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return nd[a]=e+b.toString(16)}),'"')};I("ydn");function pd(a){return!w(a)||/^[\s\xa0]*$/.test(a)?{}:"undefined"==typeof m.JSON?jd(a):JSON.parse(a)}function qd(a){var b;try{b=S(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function S(a){if("undefined"==typeof m.JSON){var b=[];ld(new kd,a,b);a=b.join("")}else a=JSON.stringify(a,void 0,void 0);return a};function rd(a,b){if(!a||/^[\s\xa0]*$/.test(a))throw new F("store_name must be provided for primary full text index");if(!b||/^[\s\xa0]*$/.test(b))throw new F("index_name must be provided for primary full text index");this.a=a};function sd(a,b,c){this.name=a;this.a=b;this.b=c||"";if(-1==["","en","fr"].indexOf(this.b))throw new F('Unsupported lang "'+c+" for full text search index "+a);}sd.prototype.getName=function(){return this.name};sd.prototype.index=function(a){return this.a[a]};
function td(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==C(b,c))throw new F("Unknown field: "+c+" in "+S(a));if(!u(a.sources))throw new F("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==C(b,c))throw new F("Unknown field: "+c+" in "+qd(a));return new rd(a.storeName,a.keyPath)});return new sd(a.name,
b,a.lang)};function ud(a,b){var c,d,e=b;if(x(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==C(c,f))throw new F("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!u(g))throw new F("stores must be array");for(f=0;f<g.length;f++){var k=cd(g[f]);if(-1!=Ja(e,function(a){return a.name==k.getName()}))throw new F('duplicate store name "'+k.getName()+'".');e.push(k)}}else w(a)?c=0==a.length?void 0:parseFloat(a):ca(a)&&(c=a);if(p(c)){if(!ca(c)||0>c)throw new F("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(p(b)&&(!u(b)||0<b.length&&!(b[0]instanceof bd)))throw new F("stores");this.version=c;this.d=!p(this.version);this.a=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=td(d.fullTextCatalogs[f]),c[f]=e,U(this,e.getName())||(g=[new Wc("k","TEXT"),new Wc("v","TEXT")],e=new bd(e.getName(),"id",!1,void 0,g,!1,!1,!1),this.a.push(e));this.e=c}
ud.prototype.toJSON=function(){var a=Ga(this.a,function(a){return a.toJSON()}),b={};b.stores=a;p(this.version)&&(b.version=this.version);return b};ud.prototype.d=!1;ud.prototype.b=function(){return!1};function vd(a){return Ga(a.a,function(a){return a.getName()})}ud.prototype.c=function(a){return this.a[a]||null};function U(a,b){return Ia(a.a,function(a){return a.getName()==b})}function wd(a,b){return Ha(a.a,function(a){return a.getName()==b})}
function xd(a,b){if(!b||a.a.length!=b.a.length)return"Number of store: "+a.a.length+" vs "+b.a.length;for(var c=0;c<a.a.length;c++){var d=U(b,a.a[c].getName());if(d){if(d=hd(a.a[c],d),0<d.length)return'store: "'+a.a[c].getName()+'" '+d}else return'missing object store "'+a.a[c].getName()+'"'}return""};function yd(a,b){ud.call(this,a,b)}z(yd,ud);yd.prototype.b=function(){return!0};function zd(a){Error.captureStackTrace?Error.captureStackTrace(this,zd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}z(zd,Error);zd.prototype.name="ydn.error.ConstraintError";function ad(a,b){var c;c=c||{};if(null!=a&&null!=b){if(v(a)&&v(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Ia(b,function(b){return ad(b,a[d])}))return!1;return!0}if(v(a))return 1==a.length&&ad(a[0],b);if(v(b))return 1==b.length&&ad(b[0],a);if(x(a)&&x(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=ad(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=ad(a[e],b[e]),!f))return!1;return!0}return a===b}return!1};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function V(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==C(d,e))throw new F('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!u(c.mechanisms))throw new F("mechanisms attribute must be an array but "+aa(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!(0<=C(Ad,c.mechanisms[e])))throw new F('Invalid mechanism "'+c.mechanisms[e]+'"');}this.m=c.mechanisms||Ad;this.a=null;this.d=
[];this.W=!1;var f;if(b instanceof ud)f=b;else if(x(b))for(c.autoSchema||!p(b.stores)?f=new yd(b):f=new ud(b),c=b.stores?b.stores.length:0,e=0;e<c;e++)d=U(f,b.stores[e].name),b.stores[e].Sync&&qc(this.logger,"Synchronization option for "+d.getName()+" ignored.");else f=new yd;this.b=f;for(e=0;e<this.b.a.length;e++)if(this.b.c(e).h)throw Error("encryption option must be defined");p(a)&&this.j(a);this.e=new E}V.prototype.logger=I("ydn.db.con.Storage");
V.prototype.r=function(a){if(p(a)){var b=function(b){a(b.toJSON());a=void 0};if(this.a)Bd(this.a,b);else{var c=this;this.P(function(){Bd(c.a,b)},null,Dc)}}return this.b?this.b.toJSON():null};V.prototype.j=function(a){if(this.a)throw new zb("Already connected with "+this.f);this.f=a;Cd(this)};V.prototype.getName=function(){return this.f};var Ad="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");h=V.prototype;h.ea=function(){return null};
function Cd(a){function b(b,e){b?(J(a.logger,a+": ready."),a.ka=NaN,d.Aa=function(){},d.Ba=function(){a.a=null},d.Ca=function(){},setTimeout(function(){Dd(a,e);Ed(a)},10),c.callback(e)):(qc(a.logger,a+": database connection fail "+e.name),setTimeout(function(){Dd(a,new Sc(a,e));if(a.d){var b=a.logger;for(b&&b.log(dc,"Purging "+a.d.length+" transactions request.",void 0);b=a.d.shift();)b.n&&b.n("error",e)}},10),c.i(e))}for(var c=new E,d=null,e=a.m,f=0;f<e.length;f++){var g=e[f].toLowerCase();if(d=
a.ea(g)){d=a.ea(g);break}}null===d?(e=new zd("No storage mechanism found."),b(!1,new Sc(a,e))):sb(Fd(d,a.f,a.b),function(a){this.a=d;b(!0,new Qc("ready",this,parseFloat(d.b),parseFloat(a),null))},function(a){qc(this.logger,this+": opening fail");b(!1,a)},a)}h.aa=function(){if(this.a)return this.a.O()};h.$=function(a,b){this.e.ha(a,b)};function Dd(a,b){setTimeout(function(){a.b.d&&a.e.c||(b instanceof Rc?a.e.i(b.error):a.e.callback())},4)}function Gd(a){return!!a.a&&!!a.a.c}
h.close=function(){this.a&&(this.a.close(),this.a=null,J(this.logger,this+" closed"))};h.La=function(){return this.a?this.a.d||null:null};h.ka=NaN;function Ed(a){var b=a.d.shift();b&&(J(a.logger,"pop tx queue["+(a.d.length+1)+"]"),a.P(b.T,b.Ga,b.mode,b.n));a.ka=ha()}
function Hd(a,b,c,d,e){J(a.logger,"push tx queue["+a.d.length+"]");a.d.push({T:b,Ga:c,mode:d,n:e});100<a.d.length&&0==a.d.length%100&&qc(a.logger,"Transaction queue stack size is "+a.d.length+". It is too large, possibility due to incorrect usage.")}h.W=!1;
h.P=function(a,b,c,d){var e=b;if(w(b))e=[b];else if(null!=b)if(v(b)){if(0==b.length)throw new F("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!w(b[f]))throw new F("store name at "+f+" must be string but found "+typeof b[f]);}else throw new F("store names must be an array");else e=null;if(this.a&&this.a.c&&!this.W){var g=this,k=p(c)?c:Dc;k==Ec&&(this.W=!0);Id(this.a,function(b){a(b);a=null},function(a,b){da(d)&&(d(a,b),d=void 0);k==Ec&&(g.W=!1);Ed(g)})}else Hd(this,a,e,c,
d)};h.toString=function(){return"Storage:"+this.a};V.prototype.close=V.prototype.close;V.prototype.getType=V.prototype.aa;V.prototype.getName=V.prototype.getName;V.prototype.getSchema=V.prototype.r;V.prototype.onReady=V.prototype.$;V.prototype.setName=V.prototype.j;V.prototype.transaction=V.prototype.P;V.prototype.db=V.prototype.La;ja("ydn.db.version","1.1.2");ja("ydn.db.cmp",Mc);ja("ydn.db.deleteDatabase",function(a,b){for(var c,d=0;d<Nc.length;d++){var e=Nc[d](a,b);e&&(c=e)}return c||Lc("IDBVersionChangeEvent ",null)});Qc.prototype.name=Qc.prototype.name;
Qc.prototype.getVersion=Qc.prototype.Ma;Qc.prototype.getOldVersion=Qc.prototype.xa;Qc.prototype.getOldSchema=Qc.prototype.wa;Rc.prototype.getError=Rc.prototype.c;N.prototype.abort=N.prototype.abort;N.prototype.canAbort=N.prototype.ua;L.prototype.progress=L.prototype.Da;L.prototype.promise=L.prototype.Ea;function Jd(a){Error.captureStackTrace?Error.captureStackTrace(this,Jd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}z(Jd,Error);Jd.prototype.name="ConstraintError";Jd.prototype.toString=function(){return this.name+": "+this.message};function Kd(a){Error.captureStackTrace?Error.captureStackTrace(this,Kd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}z(Kd,Error);Kd.prototype.name="ydn.db.VersionError";
Kd.prototype.toString=function(){return this.name+": "+this.message};function Ic(a){Error.captureStackTrace?Error.captureStackTrace(this,Ic):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}z(Ic,Error);function Ld(a){Error.captureStackTrace?Error.captureStackTrace(this,Ld):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}z(Ld,Error);Ld.prototype.name="NotFoundError";Ld.prototype.toString=function(){return this.name+": "+this.message};
function Md(a){Error.captureStackTrace?Error.captureStackTrace(this,Md):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}z(Md,Error);function Nd(){}Nd.prototype.logger=I("ydn.db.crud.req.RequestExecuto");Nd.prototype.toString=function(){return"RequestExecutor"};function Od(a){this.c=a;this.a=null;this.b=0}Od.prototype.logger=I("ydn.db.tr.Mutex");Od.prototype.o=null;function Pd(a){return!!a.a&&!a.d}Od.prototype.n=null;Od.prototype.toString=function(){return"Mutex:"+("B"+this.c+"T"+this.b)+(this.a?"*":"")};function Qd(a,b,c,d,e,f){this.L=a;this.X=b;this.a=this.d=0;this.K=d;this.D=e;this.e=c||Rd;this.j=f||0}Qd.prototype.logger=I("ydn.db.tr.Thread");Qd.prototype.type=function(){return this.L.aa()};Qd.prototype.g=function(){return this.L};Qd.prototype.l=function(){return"B"+this.X+"T"+this.d};var Rd="single";function Sd(a){if(a)if(da(a.abort))a.abort();else if(da(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new xb;else throw new Ic("No active transaction");};function Td(a,b,c,d,e,f){Qd.call(this,a,b,c,d,e,f);this.c=[];this.f=[];this.h=null;this.b=new Od(b);this.m=f||0;this.r=!1}z(Td,Qd);h=Td.prototype;h.logger=I("ydn.db.tr.Serial");
function Ud(a,b,c){if("multi"==a.e)a:if(a=a.b,!a.o||!a.mode||c!=a.mode&&(a.mode!=M||c!=Dc)||b.length>a.o.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.o.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.e)a:if(a=a.b,a.o&&a.mode&&c==a.mode&&a.o.length==b.length){for(c=0;c<b.length;c++)if(-1==a.o.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.e?!0:!1;return b}function Vd(a){var b=0<a.c.length?a.c[0].o:null,c=0<a.c.length?a.c[0].mode:null;return null!=b&&null!=c?Ud(a,b,c):!1}
function Wd(a,b,c,d,e){J(a.logger,"push tx queue["+a.c.length+"]");a.c.push({T:b,o:c,mode:d,n:e})}h.abort=function(){K(this.logger,this+": aborting");Sd(this.h)};
h.A=function(a,b,c,d){var e=w(b)?[b]:b;if(v(e)){if(0==e.length)throw new F("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!w(e[f]))throw new F("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.Z&&!(0<=C(this.Z,e[f])))throw new F('store name "'+f+e[f]+'" in scope of '+this);}}else throw new F("store names must be an array");var g=p(c)?c:Dc,k=this;if(this.b.a||!Gd(this.g())&&this.r)Wd(this,a,b,g,d);else{var l=this.l();d&&this.f.push(d);if(this.m&&
this.d>=this.m)throw new zb("Exceed maximum number of transactions of "+this.m);this.r=!0;this.g().P(function(c){var d=k.b;d.a=c;d.d=!1;d.o=b;d.mode=g;d.b++;d.n=null;l=k.l();rc(k.logger,l+" BEGIN "+S(b)+" "+g);a(k);for(a=null;Vd(k);)c=k.c.shift(),c.n&&k.f.push(c.n),J(k.logger,"pop tx queue"+(k.c.length+1)+" reusing T"+k.d),c.T()},e,g,function(a,b){rc(k.logger,l+" "+a);var c=k.b;c.a?(c.a=null,c.o=null,c.mode=null,da(c.n)&&c.n(a,b),c.n=null):qc(c.logger,c+" has no TX to be unlocked for "+a);for(c=0;c<
k.f.length;c++)(0,k.f[c])(a,b);k.f.length=0;(c=k.c.shift())&&k.A(c.T,c.o,c.mode,c.n);k.a=0})}};h.l=function(){var a=this.b;return"B"+a.c+"T"+a.b};h.request=function(a,b,c,d){function e(a,b){Hc(f);d&&d(a,b)}var f=new N(a);a=c||Dc;var g=this;Pd(this.b)&&Ud(this,b,a)?(b=this.b.a,this.a++,Gc(f,b,this.l()+"R"+this.a),this.f.push(e)):g.A(function(){var a=g.b.a;g.a++;Gc(f,a,g.l()+"R"+g.a)},b,a,e);return f};
h.I=function(a,b,c,d,e){d=d||Dc;var f=this,g;if(Pd(f.b)&&Ud(this,c,d)){var k=f.b.a;f.a++;g=f.l()+"R"+f.a;K(f.logger,g+" BEGIN");b(k,g,function(b,c){f.h=k;c?(K(f.logger,g+" ERROR"),a.i(b)):(K(f.logger,g+" SUCCESS"),a.callback(b));f.h=null});K(f.logger,g+" END");b=null}else f.A(function(){var c=f.b.a;f.a++;g=f.l()+"R"+f.a;K(f.logger,g+" BEGIN");b(c,g,function(b,d){f.h=c;d?(K(f.logger,g+" ERROR"),a.i(b)):(K(f.logger,g+" SUCCESS"),a.callback(b));f.h=null});K(f.logger,g+" END");b=null},c,d,e)};
h.getName=function(){return this.g().getName()};h.toString=function(){return"Serial:"+this.l()+(this.h?"*":"")};function Xd(a,b){Td.call(this,a,b)}z(Xd,Td);Xd.prototype.logger=I("ydn.db.tr.AtomicSerial");Xd.prototype.request=function(a,b,c){var d,e,f,g=Xd.q.request.call(this,a,b,c,function(a,b){Hc(g);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Md;O(g,c,!0)}});Jc(g,function(a,b,c){f=b;e=a;d=c});return g};
Xd.prototype.I=function(a,b,c,d,e){var f,g,k=new E;sb(k,function(a){g=!1;f=a},function(a){g=!0;f=a});Xd.q.I.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.i(c);else if(!0===g)a.i(f);else if(!1===g)a.callback(f);else{var d=new Md;a.i(d)}e&&(e(b,c),e=void 0)})};Xd.prototype.toString=function(){return"Atomic"+Xd.q.toString.call(this)};function Yd(a,b,c){this.d=a;this.b=b;this.a=c;this.c=null}h=Yd.prototype;h.logger=I("ydn.db.tr.DbOperator");h.Na=function(){return this.a.d};h.abort=function(){this.a.abort()};function W(a){if(!a.c){var b;b=a.d.aa();if("memory"==b||"localstorage"==b||"userdata"==b||"sessionstorage"==b)b=new Zd;else throw new Ab("No executor for "+b);a.c=b}return a.c}h.g=function(){return this.d};
function $d(a,b){var c=a.g(),d=b instanceof bd?b:cd(b),e=b.name,f=U(c.b,e);if(0==hd(d,f).length)(new E).callback(!1);else if(f=f?"update":"add",c.b instanceof yd)c.b.a.push(d),c.a?(c.a.close(),c.a=null,Cd(c)):(new E).callback(!1);else throw new zd("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}h.toString=function(){return"TxStorage:"+this.g().getName()};function X(a,b,c){Yd.call(this,a,b,c)}z(X,Yd);h=X.prototype;h.logger=I("ydn.db.crud.DbOperator");
h.ca=function(a,b,c,d){var e,f,g,k;if(null!=a)if(u(a)){if(p(c)||p(b))throw new F("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!wd(this.b,f[l]))throw new F('store name "'+f[l]+'" at '+l+" not found.");K(this.logger,"countStores: "+S(f));e=this.a.request("count",f);P(e,function(){ae(W(this),e,f)},this)}else if(w(a)){l=U(this.b,a);if(!l)throw new F('store name "'+a+'" not found.');if(p(d)&&!ba(d))throw new F('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(w(b))if(g=
b,x(c)){var n=Vc(c);if(n)throw new F("invalid key range: "+qd(c)+" "+n);k=Tc(c)}else{if(null!=c)throw new F("invalid key range: "+qd(c)+" of type "+typeof c);k=null}else if(x(b)||null==b)if(x(b)){if(n=Vc(b))throw new F("invalid key range: "+qd(b)+" "+n);k=Tc(b)}else{if(null!=b)throw new F("key range must be  an object but found "+qd(b)+" of type "+typeof b);k=null}else throw new F('invalid second argument for count "'+qd(c)+'" of type '+typeof b);K(this.logger,"countKeyRange: "+a+" "+(g?g:"")+S(k));
e=this.a.request("count",f);T(l,e,arguments);P(e,function(){be(W(this),e,f[0],k,g)},this)}else throw new F("Invalid store name or store names.");else qc(this.logger,"count method requires store name(s)"),l=vd(this.b),e=this.a.request("count",l),Jc(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),P(e,function(){ae(W(this),e,f)},this);return e};
h.G=function(a,b){var c=this,d;if(a instanceof Q){var e=a,f=e.b,g=U(this.b,f);if(!g){if(this.b.b()){if(Gd(this.g()))return Lc("get",void 0);d=new N("get");this.g().$(function(){sb(c.G(a,b),function(a){d.callback(a)},function(a){d.i(a)})});return d}throw new F("Store: "+f+" not found.");}var k=e.a;K(this.logger,"getByKey: "+f+":"+k);d=this.a.request("get:key",[f]);T(g,d,arguments,void 0,this);P(d,function(){ce(W(this),d,f,k)},this)}else if(w(a)&&p(b)){var l=a,g=U(this.b,l);if(!g){if(this.b.b()){if(Gd(this.g()))return Lc("get",
void 0);d=new N("get");this.g().$(function(){sb(c.G(a,b),function(a){d.callback(a)},function(a){d.i(a)})});return d}throw new F('Store name "'+l+'" not found.');}var n=b;K(this.logger,"getById: "+l+":"+n);d=this.a.request("get",[l]);T(g,d,arguments,void 0,this);P(d,function(){ce(W(this),d,l,n)},this)}else throw new F("get require valid input arguments.");return d};
h.za=function(a,b,c,d,e){var f=U(this.b,a),g,k,l,n=null;if(x(b)){var q=Vc(b);if(q)throw new F("invalid key range: "+b+" "+q);n=Tc(b)}else if(null!=b)throw new F('expect key range object, but found "'+qd(b)+'" of type '+typeof b);if(p(c))if(ca(c))g=c;else throw new F("limit must be a number, but "+c+" is "+typeof c);else g=100;if(p(d))if(ca(d))k=d;else throw new F("offset must be a number, but "+d+" is "+typeof d);else k=0;if(p(e))if(ba(e))l=e;else throw new F("reverse must be a boolean, but "+e+" is "+
typeof e);K(this.logger,"keysByKeyRange: "+a);var r=this.a.request("keys",[a]);T(f,r,arguments);P(r,function(){de(W(this),r,2,a,null,n,g,k,l,!1)},this);return r};
h.ya=function(a,b,c,d,e,f,g){var k,l,n,q,r,t=Vc(c);if(t)throw new F("invalid key range: "+c+" "+t);t=U(this.b,a);k=Tc(c);if(ca(d))l=d;else{if(p(d))throw new F("limit must be a number");l=100}if(ca(e))n=e;else{if(p(e))throw new F("offset must be a number");n=0}if(p(f))if(ba(f))q=f;else throw new F("reverse must be a boolean");if(p(g))if(ba(g))r=g;else throw new F("unique must be a boolean");K(this.logger,"keysByIndexKeyRange: "+a);var y=this.a.request("keys:iter:index",[a]);T(t,y,arguments);P(y,function(){de(W(this),
y,2,a,b,k,l,n,q,r)},this);return y};h.keys=function(a,b,c,d,e,f,g){var k=U(this.b,a);if(!w(a))throw new F("store name must be a string, but "+a+" of type "+typeof a+" is not.");if(!this.b.b()){if(!k)throw new F('store name "'+a+'" not found.');if(w(b)&&!dd(k,b))throw new F('index "'+b+'" not found in store "'+a+'".');}return this.b.b()&&!k?Lc("keys",[]):w(b)?this.ya(a,b,c,d,e,f,g):this.za(a,b,c,d,e)};
h.N=function(a,b,c,d,e,f,g){var k=this,l;if(w(a)){var n=a,q=U(this.b,n);if(!q){if(this.b.b()){if(Gd(this.g()))return Lc("values",[]);l=new N("values");this.g().$(function(){sb(k.N(a,b,c,d,e,f),function(a){l.callback(a)},function(a){l.i(a)})});return l}throw new Ld(n);}if(u(b)){if(p(c)||p(d))throw new F("too many input arguments");var r=b;K(this.logger,"listByIds: "+n+" "+r.length+" ids");l=this.a.request("values:array",[n]);T(q,l,arguments,void 0,this);P(l,function(){var a=W(this);ee(a,l,n,r)},this)}else l=
w(b)?this.Ha(n,b,c,d,e,f,g):this.Ia(n,b,c,d,e)}else if(u(a))if(a[0]instanceof Q){for(var q=[],t=a,y=0;y<t.length;y++){var B=t[y].b;if(!wd(this.b,B)){if(this.b.b())return q=[],q[t.length-1]=void 0,Lc("get",q);throw new F("Store: "+B+" not found.");}0<=C(q,B)||q.push(B)}K(this.logger,"listByKeys: "+S(q)+" "+t.length+" keys");l=this.a.request("values:keys",q);P(l,function(){var a=W(this);ee(a,l,null,t)},this)}else throw new F("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+
" found.");else throw new F("first argument "+a+" is invalid.");return l};
h.Ia=function(a,b,c,d,e){var f=U(this.b,a),g,k,l,n=null;if(x(b)){var q=Vc(b);if(q)throw new F("invalid key range: "+b+" "+q);n=Tc(b)}else if(null!=b)throw new F('expect key range object, but found "'+qd(b)+'" of type '+typeof b);if(p(c))if(ca(c))g=c;else throw new F("limit must be a number, but "+c+" is "+typeof c);else g=100;if(p(d))if(ca(d))k=d;else throw new F("offset must be a number, but "+d+" is "+typeof d);else k=0;if(p(e))if(ba(e))l=e;else throw new F("reverse must be a boolean, but "+e+" is "+
typeof e);K(this.logger,(n?"listByKeyRange: ":"listByStore: ")+a);var r=this.a.request("values",[a]);T(f,r,arguments);P(r,function(){de(W(this),r,4,a,null,n,g,k,l,!1)},this);return r};
h.Ha=function(a,b,c,d,e,f,g){var k=U(this.b,a),l,n,q,r;if(!ed(k,b))throw new F('index "'+b+'" not found in store "'+a+'"');var t=Vc(c);if(t)throw new F("invalid key range: "+c+" "+t);var y=Tc(c);if(p(d))if(ca(d))l=d;else throw new F("limit must be a number.");else l=100;if(p(e))if(ca(e))n=e;else throw new F("offset must be a number.");else n=0;if(ba(f))q=f;else if(p(f))throw new F("reverse must be a boolean, but "+f);if(p(g))if(ba(g))r=g;else throw new F("unique must be a boolean");K(this.logger,
"listByIndexKeyRange: "+a+":"+b);var B=this.a.request("values:iter:index",[a]);T(k,B,arguments);P(B,function(){de(W(this),B,4,a,b,y,l,n,q,r)},this);return B};
h.ba=function(a,b,c){var d=w(a)?a:x(a)?a.name:void 0;if(!w(d))throw new F("store name "+d+" must be a string, but "+typeof d);var e=U(this.b,d);if(!e){if(!this.b.b())throw new F('store name "'+d+'" not found.');e=cd(x(a)?a:{name:d});K(this.logger,"Adding object store: "+d);$d(this,e)}else if(this.b.b()&&x(a)&&(a=cd(a),a=hd(e,a)))throw new xb(a);var f;if(!e)throw new F('store name "'+d+'" not found.');if(w(e.keyPath)&&p(c))throw new F("key must not be provided while the store uses in-line key.");if(!e.keyPath&&
!e.c&&!p(c))throw new F("out-of-line key must be provided.");if(u(b)){K(this.logger,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)id(e,b[a]);f=this.a.request("add:array",[d],M);P(f,function(){fe(W(this),f,!1,!1,d,b,c)},this);e.v&&f.u(function(){this.g();e.getName();this.g()},this)}else if(x(b))a="store: "+d+" key: "+fd(e,b,c),K(this.logger,"addObject: "+a),id(e,b),f=this.a.request("add",[d],M),P(f,function(){fe(W(this),f,!1,!0,d,[b],[c])},this),e.v&&f.u(function(){this.g();e.getName();
this.g()},this);else throw new F("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};function ge(a,b){var c=w(b)?b:x(b)?b.name:void 0;if(!w(c))throw new F("store name must be a string");var d=U(a.b,c);if(!d){if(!a.b.b())throw new Ld(c);d=cd(x(b)?b:{name:c});K(a.logger,"Adding object store: "+c);$d(a,d)}else if(a.b.b()&&x(b)){var e=cd(b);if(e=hd(d,e))throw new xb(e);}if(!d)throw new Ld(c);return d}
h.load=function(a){a=ge(this,a).getName();var b=this.a.request("load",[a]),c=this;this.a.I(b,function(){W(c);throw new yb("putData");},[a],M);return b};
h.H=function(a,b,c){var d,e=this;if(a instanceof Q){var f=a,g=f.b,k=U(this.b,g);if(!k)throw new F('store "'+g+'" not found.');if(k.keyPath){var l=fd(k,b);if(null!=l){if(0!=Mc(l,f.a))throw new F("Inline key must be "+f+" but "+l+" found.");}else gd(k,b,f.a);return this.H(g,b)}return this.H(g,b,f.a)}if(u(a)){if(p(c))throw new F("too many arguments");var n=a;if(!p(b))throw new F("record values required");for(var q=b,f=[],g=0,k=n.length;g<k;g++){l=n[g].b;-1==C(f,l)&&f.push(l);var r=U(this.b,l);if(!r)throw new F('store "'+
l+'" not found.');r.keyPath&&gd(r,q[g],n[g].a)}K(this.logger,"putByKeys: to "+S(f)+" "+q.length+" objects");for(g=0;g<q.length;g++)id(r,q[g]);d=this.a.request("put:keys",f,M);T(r,d,arguments);P(d,function(){var a=W(e);fe(a,d,!0,!1,null,q,n)},this)}else if(w(a)||x(a)){var r=ge(this,a),t=r.getName();if(r.keyPath&&p(c))throw new F("key must not be provided while the store uses in-line key.");if(!r.keyPath&&!r.c&&!p(c))throw new F("out-of-line key must be provided.");if(u(b)){var y=b,B=c;K(this.logger,
"putObjects: "+t+" "+y.length+" objects");for(g=0;g<y.length;g++)id(r,y[g]);d=this.a.request("put:array",[t],M);T(r,d,arguments);P(d,function(){fe(W(this),d,!0,!1,t,y,B)},this);r.v&&d.u(function(){this.g();this.g()},this)}else if(x(b)){var G=b,ia=c;K(this.logger,"putObject: "+t+" "+(p(ia)?ia:"(without-key)"));if(p(m.Blob)&&G instanceof Blob&&r.qa&&!r.keyPath&&0==r.a.length&&Lb)d=new N("put"),f=new FileReader,f.onload=function(a){var b=a.target.result,c=e.a.request("put",[t],M);T(r,c,[t,G,ia]);P(c,
function(){fe(W(e),c,!0,!0,t,[b],[ia])},this);sb(c,function(a){d.callback(a)},function(a){d.i(a)})},f.onerror=function(a){d.i(a)},f.onabort=function(a){d.i(a)},f.readAsDataURL(G);else{id(r,G);d=this.a.request("put",[t],M);var Aa=[t,G,ia];T(r,d,Aa);P(d,function(){var a=p(ia)?[Aa[2]]:void 0;fe(W(e),d,!0,!0,t,[Aa[1]],a)},this)}r.v&&d.u(function(){this.g();this.g()},this)}else throw new F("put record value must be Object or array of Objects");}else throw new F("the first argument of put must be store name, store schema or array of keys.");
return d};
h.clear=function(a,b,c){if(p(c))throw new F("too many input arguments");var d;if(w(a)){c=U(this.b,a);if(!c)throw new F('store name "'+a+'" not found.');if(x(b)){var e=Tc(b);if(null===e)throw new F("clear method requires a valid non-null KeyRange object.");K(this.logger,"clearByKeyRange: "+a+":"+S(e));d=this.a.request("clear",[a],M);T(c,d,[a,e]);P(d,function(){var b=W(this);he(b,d,a,e)},this)}else{if(p(b))throw new F("clear method requires a valid KeyRange object as second argument, but found "+b+
" of type "+typeof b);K(this.logger,"clearByStore: "+a);d=this.a.request("clear",[a],M);P(d,function(){ie(W(this),d,[a])},this)}}else if(!p(a)||u(a)&&w(a[0])){var f=a||vd(this.b);K(this.logger,"clearByStores: "+S(f));d=this.a.request("clear",f,M);P(d,function(){ie(W(this),d,f)},this)}else throw new F('first argument "'+a+'" is invalid.');return d};
h.da=function(a,b,c){var d;if(w(a)){var e=U(this.b,a);if(!e)throw new F('store name "'+a+'" not found.');if(p(c))if(w(b)){var f=dd(e,b);if(!f)throw new F("index: "+b+" not found in "+a);if(x(c)||null===c){var g=Tc(c);K(this.logger,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.a.request("rm:iter:index",[a],M);P(d,function(){je(W(this),d,a,f.getName(),g)},this)}else throw new F("key range "+c+' is invalid type "'+typeof c+'".');}else throw new F('index name "'+b+'" must be a string, but '+
typeof b+" found.");else if(w(b)||ca(b)||v(b)||b instanceof Date){K(this.logger,"removeById: "+a+":"+b);d=this.a.request("rm",[a],M);var k=[a,b];T(e,d,k);P(d,function(){ke(W(this),d,a,k[1])},this);e.v&&d.u(function(){this.g();this.g()},this)}else if(x(b))g=Tc(b),K(this.logger,"removeByKeyRange: "+a+":"+S(g)),d=this.a.request("rm:iter",[a],M),T(e,d,[a,g]),P(d,function(){he(W(this),d,a,g)},this),e.v&&d.u(function(){this.g();this.g()},this);else throw new F('Invalid key or key range "'+b+'" of type '+
typeof b);}else if(a instanceof Q){var l=a.b,e=U(this.b,l);d=this.a.request("rm",[l],M);var n=[l,a.a];T(e,d,n);P(d,function(){ke(W(this),d,l,n[1])},this)}else if(u(a)){b=[];c=0;for(e=a.length;c<e;c++){if(!(a[c]instanceof Q))throw new F("key list element at "+c+" of "+e+' must be yn.db.Key, but "'+qd(a[c])+'" ('+aa(a[c])+") is not ydn.db.Key.");var q=a[c].b;-1==C(b,q)&&b.push(q)}if(1>b.length)throw new F('at least one valid key required in key list "'+qd(a)+'"');d=this.a.request("rm:keys",b,M);P(d,
function(){le(W(this),d,a)},this)}else throw new F('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+qd(a)+'" ('+aa(a)+") found.");return d};h.toString=function(){return"DbOperator:"+this.g().getName()};function me(a,b,c,d){this.d=a;this.e=b;this.a=Ka(c);this.b=d;this.c=[]}me.prototype.d=null;function ne(a,b,c){if(a.d)c&&a.c.push(c),b(a.d);else throw new Ab("tx committed on ParallelTxExecutor");}me.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.e+" mode:"+this.b+" scopes:"+S(this.a)};function pe(a,b,c,d,e,f){Qd.call(this,a,b,c,d,e,f);this.c=this.b=null}z(pe,Qd);h=pe.prototype;h.logger=I("ydn.db.tr.Parallel");h.abort=function(){K(this.logger,this+": aborting");Sd(this.c)};
h.ra=function(a,b){var c;if("multi"==this.e)a:if(c=this.b,!c.a||!c.b||b!=c.b&&(c.b!=M||b!=Dc)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.e)a:if(c=this.b,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.e?!0:!1;return c};
h.A=function(a,b,c,d){function e(c){l.d++;n=new me(c,l.d,b,k);g=l.l();rc(l.logger,g+" BEGIN "+S(b)+" "+k);l.b=n;ne(l.b,a,d)}function f(a,b){rc(l.logger,g+" "+a);if(n){for(var c=n,d=0;d<c.c.length;d++)c.c[d](a,b);c.c.length=0;c.d=null;c.a=null;c.c=null}l.a=0}var g;this.K&&(b=this.K);this.D&&(c=this.D);var k=p(c)?c:Dc,l=this,n;if(this.b&&this.b.d&&this.ra(b,k))ne(this.b,a,d);else{if(this.j&&this.d>=this.j)throw new zb("Exceed maximum number of transactions of "+this.j);this.g().P(e,b,k,f)}};
h.request=function(a,b,c,d){var e=new N(a),f=this;this.A(function(a){f.a++;Gc(e,a,f.l()+"R"+f.a)},b,c||Dc,function(a,b){Hc(e);d&&d(a,b)});return e};h.I=function(a,b,c,d,e){var f=this,g;this.A(function(c){f.a++;g=f.l()+"R"+f.a;K(f.logger,g+" BEGIN");b(c,g,function(b,d){f.c=c;g=f.l()+"R"+f.a;d?(K(f.logger,g+" ERROR"),a.i(b)):(K(f.logger,g+" SUCCESS"),a.callback(b));f.c=null});b=null;K(f.logger,g+" END")},c,d,e)};h.toString=function(){return"Parallel:"+this.e+":"+this.l()+(this.c?"*":"")};function qe(a,b){pe.call(this,a,b,Rd)}z(qe,pe);h=qe.prototype;h.logger=I("ydn.db.tr.AtomicParallel");h.ra=function(){return!1};h.request=function(a,b,c){var d,e,f,g=this,k=qe.q.request.call(this,a,b,c,function(a,b){Hc(k);K(g.logger,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Md;O(k,c,!0)}});Jc(k,function(a,b,c){f=b;e=a;d=c});return k};
h.I=function(a,b,c,d,e){var f,g,k=new E;sb(k,function(a){g=!1;f=a},function(a){g=!0;f=a});qe.q.I.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.i(c);else if(!0===g)a.i(f);else if(!1===g)a.callback(f);else{var d=new Md;a.i(d)}e&&(e(b,c),e=void 0)})};h.toString=function(){return"Atomic"+qe.q.toString.call(this)};function re(a,b,c){V.call(this,a,b,c);this.F=0;a=!0;b=Rd;c&&(p(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=se(this,b,a);this.h=se(this,"atomic",!1);this.c=this.Y(c,this.h)}z(re,V);h=re.prototype;h.F=0;h.sa=function(a,b,c,d,e,f){a=a||Rd;var g;"readonly"==d?g=Dc:"readwrite"==d&&(g=M);a=se(this,a,b,c,g,e);return this.Y(a,f?null:this.h)};h.Y=function(a){return new Yd(this,this.b,a)};
function se(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==Rd)return new Td(a,a.F++,b,d,e,f);if("atomic"==b)return new Xd(a,a.F++);throw new F('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==Rd)return new pe(a,a.F++,b,d,e,f);if("atomic"==b)return new qe(a,a.F++);throw new F('Invalid requestType "'+b+'"');}
h.Fa=function(a,b,c){if(3<arguments.length)throw new F("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.F++;var d=b||vd(this.b),e=Dc;if(c)if("readwrite"==c)e=M;else if("readonly"!=c)throw new F('Invalid transaction mode "'+c+'"');var f=se(this,"all",!1,d,e,1),g=this.Y(f,this.h),k=new N("run"),l=this;f.A(function(b){J(l.logger,"executing run in transaction on "+f);Gc(k,b,f.l()+"R0");a(g)},d,e,function(a){Hc(k);O(k,f.d,"complete"!==a)});return k};
h.Oa=function(){return this.c?this.c.a.d:NaN};function Y(a,b,c){re.call(this,a,b,c);a=this.b;for(b=0;b<a.e.length;b++){c=a.e[b];var d=U(a,c.getName());if(d){if(!ed(d,"k"))throw new F('full text index store "'+d.getName()+'" must have "keyword" index');if(!ed(d,"v"))throw new F('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new F('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new F('full text index store "'+c.getName()+'" required.');for(d=0;d<c.a.length;d++){var e=
c.index(d),f=U(a,e.a);if(f)qc(this.logger,"Full text indexer option for "+f.getName()+" ignored.");else throw new F('full text source store "'+e.a+'" does not exist for full text index "'+c.getName()+'"');}}}z(Y,re);h=Y.prototype;h.Y=function(a){return new X(this,this.b,a)};h.ba=function(a,b,c){return this.c.ba(a,b,c)};h.ca=function(a,b,c,d){return this.c.ca(a,b,c,d)};h.G=function(a,b){return this.c.G(a,b)};h.keys=function(a,b,c,d,e,f,g){return this.c.keys(a,b,c,d,e,f,g)};
h.N=function(a,b,c,d,e,f){return this.c.N(a,b,c,d,e,f)};h.load=function(a,b,c){return this.c.load(a,b,c)};h.H=function(a,b,c){return this.c.H(a,b,c)};h.clear=function(a,b,c){return this.c.clear(a,b,c)};h.da=function(a,b,c){return this.c.da(a,b,c)};h.toString=function(){var a="Storage:"+this.getName();Gd(this)&&(a+=" ["+this.aa()+"]");return a};function te(a,b,c){a=["ydn.db",a];p(b)&&(a.push(b),p(c)&&(a.push(c),p(void 0)&&a.push(uc(void 0))));return a.join("^|")};function Z(a,b){this.key=a;this.a=b}Z.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.a?", "+this.a+")":")")};function ue(a,b){var c=Mc(a.key,b.key);return 0===c?null!=a.a?null!=b.a?Mc(a.a,b.a):1:null!=b.a?-1:0:c};function ve(a){this.p=a||we}function we(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}h=ve.prototype;h.k=null;h.p=null;h.t=null;h.s=null;
function xe(a,b){if(null==a.k)a.k=new ye(b),a.t=a.k,a.s=a.k;else{var c=null;ze(a,function(a){var e=null,f=this.p(a.value,b);0<f?(e=a.left,null==a.left&&(c=new ye(b,a),a.left=c,a==this.t&&(this.t=c))):0>f&&(e=a.right,null==a.right&&(c=new ye(b,a),a.right=c,a==this.s&&(this.s=c)));return e});c&&(ze(a,function(a){a.a++;return a.parent},c.parent),Ae(a,c.parent))}}function Be(a,b){ze(a,function(a){var d=null,e=this.p(a.value,b);0<e?d=a.left:0>e?d=a.right:Ce(this,a);return d})}
h.clear=function(){this.s=this.t=this.k=null};h.contains=function(a){var b=!1;ze(this,function(c){var d=null,e=this.p(c.value,a);0<e?d=c.left:0>e?d=c.right:b=!0;return d});return b};h.indexOf=function(a){var b=-1,c=0;ze(this,function(d){var e=this.p(d.value,a);if(0<e)return d.left;d.left&&(c+=d.left.a);if(0>e)return c++,d.right;b=c;return null});return b};h.ja=function(){var a=[];De(this,function(b){a.push(b)});return a};
function De(a,b){if(a.k){var c,d=c=Ee(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function ze(a,b,c){for(c=c?c:a.k;c&&null!=c;)c=b.call(a,c)}
function Ae(a,b){ze(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Fe(this,a.left),Ge(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Ge(this,a.right),Fe(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Fe(a,b){He(b)?(b.parent.left=b.right,b.right.parent=b.parent):Ie(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.k=b.right,a.k.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.a=b.a;b.a-=(c.right?c.right.a:0)+1}
function Ge(a,b){He(b)?(b.parent.left=b.left,b.left.parent=b.parent):Ie(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.k=b.left,a.k.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.a=b.a;b.a-=(c.left?c.left.a:0)+1}
function Ce(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=Je(a,b.left);ze(a,function(a){a.a--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.s&&(a.s=d)}else{d=Ee(a,b.right);ze(a,function(a){a.a--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=b.parent;
d.left=b.left;d.left&&(d.left.parent=d);b==a.t&&(a.t=d)}d.a=b.a;He(b)?b.parent.left=d:Ie(b)?b.parent.right=d:a.k=d;Ae(a,c?c:d)}else ze(a,function(a){a.a--;return a.parent},b.parent),He(b)?(b.parent.left=null,b==a.t&&(a.t=b.parent),Ae(a,b.parent)):Ie(b)?(b.parent.right=null,b==a.s&&(a.s=b.parent),Ae(a,b.parent)):a.clear()}function Ee(a,b){if(!b)return a.t;var c=b;ze(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function Je(a,b){if(!b)return a.s;var c=b;ze(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function ye(a,b){this.value=a;this.parent=b?b:null;this.a=1}ye.prototype.left=null;ye.prototype.right=null;ye.prototype.height=1;function Ie(a){return!!a.parent&&a.parent.right==a}function He(a){return!!a.parent&&a.parent.left==a};function Ke(a){this.p=a||we}z(Ke,ve);function Le(a,b,c){if(a.k){var d;if(c instanceof ye)d=c;else if(c){if(ze(a,function(a){var b=null;0<this.p(a.value,c)?(b=a.left,d=a):0>this.p(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Ee(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function Me(a,b,c){if(a.k){var d;if(c instanceof ye)d=c;else if(c){if(ze(a,ga(function(a){var b=null;0<this.p(a.value,c)?b=a.left:(0>this.p(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=Je(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function Ne(a,b,c){this.e=a;this.storage=b;this.b=c;this.a={};a=this.b.keyPath;this.c=u(a)?a.join(","):a||"_ROWID_";this.a[this.c]=null;this.d=te(this.e,this.b.getName(),this.c)+"^|"}
function Oe(a,b){var c=b||a.c;if(!a.a[c]){a.a[c]=new Ke(ue);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&0==f.lastIndexOf(a.d,0)){for(var g,k=g=[],l=void 0,n=[],q=void 0,r=void 0,t=new Ac(f.substr(a.d.length));null!=yc(t);)if(0===t.a)k=n.pop();else{if(null===t.a)break;do{for(var q=t.a/4|0,l=t.a%4,y=0;y<q;y++)r=[],k.push(r),n.push(k),k=r;if(0===l&&12<t.a+4)yc(t);else break}while(1);1===l?k.push(xc(t)):2===l?k.push(new Date(xc(t))):3===l?k.push(zc(t)):0===l&&(k=n.pop())}g=
g[0];if(c==a.c)xe(a.a[c],new Z(g));else if(k=a.storage.getItem(f),null!==k)if(f=dd(a.b,c),k=pd(k),k=Yc(f,k),f.c){if(u(k))for(f=0;f<k.length;f++)xe(a.a[c],new Z(k[f],g))}else xe(a.a[c],new Z(k,g))}}}return a.a[c]}function Pe(a,b,c){for(var d in a.a){var e=a.a[d];if(e)if(d==a.c)Be(e,new Z(b));else{var f=dd(a.b,d),f=sc(c,f.keyPath);Be(e,new Z(b,f))}}}function Qe(a){for(var b in a.a){var c=a.a[b];c&&c.clear()}a.a={}}
function Re(a,b,c,d){if(null==b&&(a.b.keyPath&&(b=fd(a.b,c)),a.b.c&&null==b)){b=a.d+uc(void 0);var e=pd(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,S(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.d+uc(b)));if(d)return null;a.storage.setItem(a.d+uc(b),S(c));d=b;for(var f in a.a)if(e=a.a[f])if(f==a.c)xe(e,new Z(d));else{var g=dd(a.b,f),g=sc(c,g.keyPath);null!=g&&xe(e,new Z(d,g))}return b}
function Se(a,b){var c=a.d+uc(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=pd(d);Pe(a,b,c);return 1}Ne.prototype.clear=function(){Qe(this);Te(this)};function Ue(a,b){var c=a.storage.getItem(a.d+uc(b)),d=void 0;if(null!==c)for(var d=pd(c),c=0,e=a.b.a.length;c<e;c++){var f=a.b.index(c);if("DATE"==f.type){var g=Yc(f,d);if(g)for(var k=d,g=new Date(g),l=0;l<f.b.length;l++)l==f.b.length-1?k[f.b[l]]=g:x(k[f.b[l]])||(k[f.b[l]]={})}}return d}Ne.prototype.getName=function(){return this.b.getName()};
function Ve(a,b,c){b=b||a.c;a=Oe(a,b);var d=null,e=null,f=0,g=!1,k=!1;null!=c&&(null!=c.lower&&(d=new Z(c.lower)),null!=c.upper&&(e=new Z(c.upper)),g=c.lowerOpen,k=c.upperOpen);Le(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=Mc(a.key,d.key))){if(null!=e&&(a=Mc(a.key,e.key),1===a||0===a&&k))return!0;f++}},d);return f}
function Te(a,b){var c=Oe(a,a.c),d=null,e=null,f=0,g=[],k=[],l=!1,n=!1;null!=b&&(null!=b.lower&&(d=new Z(b.lower)),null!=b.upper&&(e=new Z(b.upper)),l=b.lowerOpen,n=b.upperOpen);Le(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=ue(b,d))){if(null!=e){var c=ue(b,e);if(1===c||0===c&&n)return!0}var c=a.d+uc(b.key),t=a.storage.getItem(c);null!==t&&(a.storage.removeItem(c),f++,10>g.length&&(g.push(b.key),k.push(pd(t))))}},d);if(10>g.length)for(c=0;c<g.length;c++)Pe(a,g[c],k[c]);else Qe(a);return f}
function We(a,b,c,d,e,f,g,k,l){function n(c){if(c&&(ia++,!(ia<g))){var d=c.value;if(e){if(fc&&null!=G&&(c=t?ue(d,G):Mc(d.key,G.key),0==c))return;if(null!=B&&(c=t?ue(d,B):Mc(d.key,B.key),-1==c||0==c&&Aa))return l&&(l[0]=void 0,l[1]=void 0),!0}else{if(Aa&&null!=B&&(c=t?ue(d,B):Mc(d.key,B.key),0==c))return;if(null!=G&&(c=t?ue(d,G):Mc(d.key,G.key),1==c||0==c&&fc))return l&&(l[0]=void 0,l[1]=void 0),!0}c=d.key;if(!k||!y||null==r||0!=Mc(r,c)){d=y?d.a:c;if(2==b)q.push(d);else if(1==b)q.push(c);else if(3==
b)q.push([c,d]);else if(4==b){var n=Ue(a,d);q.push(n)}else q.push([c,d,Ue(a,d)]);l&&(l[0]=c,l[1]=d)}r=c;if(p(f)&&q.length>=f)return!0}}var q=[],r,t=!!l&&null!=l[0];c=c||a.c;var y=c!=a.c;c=Oe(a,c);var B=null,G=null;p(g)||(g=0);var ia=-1,Aa=!1,fc=!1;null!=d&&(null!=d.lower&&(B=y&&e?new Z(d.lower,"\uffff"):new Z(d.lower)),null!=d.upper&&(G=y&&!e?new Z(d.upper,"\uffff"):new Z(d.upper)),Aa=!!d.lowerOpen,fc=!!d.upperOpen);if(t){e?fc=!0:Aa=!0;d=l[0];var oe=p(l[1])?l[1]:"\uffff";e?G=y?new Z(d,oe):new Z(d):
B=y?new Z(d,oe):new Z(d)}e?Me(c,n,G):Le(c,n,B);return q}Ne.prototype.U=function(a,b,c,d,e){return We(this,2,a,b,c,d,e)};Ne.prototype.toString=function(){return"ydn.db.con.simple.Store:"+this.e+":"+this.b.getName()};function Xe(){this.clear()}h=Xe.prototype;h.R=function(){return this};h.setItem=function(a,b){p(this.a[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.a[a]=b};h.getItem=function(a){return p(this.a[a])?this.a[a]:null};h.removeItem=function(a){delete this.a[a];var b=this.keys;a=C(b,a.toString());0<=a&&Ea.splice.call(b,a,1);this.length=this.keys.length};h.length=0;h.key=function(a){a=this.keys[a];return p(a)?this.a[a]:null};
h.clear=function(){this.a={};this.keys=[];this.length=0};function Ye(a){this.f=a||new Xe;this.e={}}function Ze(a,b){var c=U(a.a,b);if(c)a.e[b]||(a.e[b]=new Ne(a.c,a.d,c));else throw new Ab('store name "'+b+'" not found.');return a.e[b]}function Bd(a,b){setTimeout(function(){var c=te(a.c),c=a.d.getItem(c),c=new ud(c);b(c)},10)};function $e(a,b){this.b=a;this.a=b}$e.prototype.g=function(a,b){var c=this.b;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.a("complete",null);d.a=null;d.b=null}};function Zd(){}z(Zd,Nd);Zd.prototype.logger=I("ydn.db.crud.req.SimpleStore");
function fe(a,b,c,d,e,f,g){J(a.logger,Kc(b)+" "+(c?"put":"add")+"Object"+(d?"":"s "+f.length+" objects"));var k=b.a.g(function(a){var n;if(d)n=Ze(a,e),a=g?g[0]:void 0,a=Re(n,a,f[0],!c),null!=a?O(b,a):(n=qd(a),n=new Jd(n),O(b,n,!0));else{for(var q=e,r=[],t=!1,y=g||{},B=0;B<f.length;B++){var G;e?G=y[B]:(q=g[B],G=q.a,q=q.b);n&&n.getName()==q||(n=Ze(a,q));G=Re(n,G,f[B],!c);null!=G?r.push(G):(t=!0,r.push(new Jd))}O(b,r,t)}k();k=null},a)}
function ce(a,b,c,d){var e=b.a.g(function(a){a=Ue(Ze(a,c),d);O(b,a);e();e=null},a)}function ee(a,b,c,d){var e=b.a.g(function(a){for(var g=[],k=c,l,n=0;n<d.length;n++){var q=d[n];q instanceof Q&&(k=q,q=k.a,k=k.b);l&&l.getName()==k||(l=Ze(a,k));q=Ue(l,q);g[n]=q}O(b,g,!1);e();e=null},a)}function ke(a,b,c,d){var e=Kc(b)+" removeById "+c+" "+d;J(a.logger,e);var f=b.a.g(function(g){g=Se(Ze(g,c),d);K(a.logger,"success "+e+(0==g?" [not found]":""));O(b,g);f();f=null},a)}
function le(a,b,c){J(a.logger,Kc(b)+" removeByKeys "+c.length+" keys");var d,e=0,f=b.a.g(function(a){for(var k=0;k<c.length;k++){var l=c[k].b,n=c[k].a;d&&d.getName()==l||(d=Ze(a,l));e+=Se(d,n)}O(b,e);f();f=null},a)}function he(a,b,c,d){var e=Kc(b)+" removeByKeyRange "+(d?S(d):"");J(a.logger,e);var f=b.a.g(function(g){g=Te(Ze(g,c),d);K(a.logger,e+" deleted "+g+" records.");O(b,g);f();f=null},a)}
function je(a,b,c,d,e){var f=Kc(b)+" removeByIndexKeyRange "+(e?S(e):"");J(a.logger,f);var g=b.a.g(function(a){a=Ze(a,c);for(var f=a.U(d,e),n=f.length,q=0;q<n;q++)Se(a,f[q]);O(b,n);g();g=null},a)}function ie(a,b,c){var d=Kc(b)+" clearByStores";J(a.logger,d);var e=b.a.g(function(a){for(var g=0;g<c.length;g++)Ze(a,c[g]).clear();K(this.logger,"success "+d);O(b,c.length);e();e=null},a)}
function ae(a,b,c){var d=b.a.g(function(a){for(var f=[],g=0;g<c.length;g++){var k=Ze(a,c[g]);f.push(Ve(k))}O(b,f);d();d=null},a)}function be(a,b,c,d,e){var f=Kc(b)+" count"+(null!=e?"Index":"")+(null!=d?"KeyRange":"Store");J(a.logger,f);var g=b.a.g(function(a){a=Ve(Ze(a,c),e,d);K(this.logger,"success "+f);O(b,a);g();g=null},a)}
function de(a,b,c,d,e,f,g,k,l,n){var q=Kc(b)+" "+d+" "+(f?qd(f):"");J(a.logger,q);var r=b.a.g(function(a){a=We(Ze(a,d),c,e,f,l,g,k,n,void 0);K(this.logger,q+" "+a.length+" records found.");O(b,a);r();r=null},a)};function af(a){Ye.call(this,a);this.b=NaN}z(af,Ye);h=af.prototype;h.logger=I("ydn.db.con.SimpleStorage");
function Fd(a,b,c){function d(b,c){setTimeout(function(){c?(K(a.logger,a+" opening fail"),e.i(c)):(K(a.logger,a+" version "+a.b+" open"),e.callback(b))},10)}var e=new E;a.d=a.f.R(b);a.c=b;a.a=c;b=te(a.c);a.b=NaN;var f=pd(a.d.getItem(b));p(f.version)&&!ca(f.version)&&(f.version=NaN);if(f)if(c=new ud(f),xd(a.a,c))if(!a.a.d&&!isNaN(c.version)&&a.a.version>c.version)d(NaN,new Kd("existing version "+c.version+" is larger than "+a.a.version));else{f=a.a.version;a.b=p(f)?f:c.version+1;for(f=0;f<a.a.a.length;f++)var g=
a.a.c(f);if(a.a instanceof yd)for(f=0;f<c.a.length;f++)g=c.c(f),a.a.a.push(g);f=a.a.toJSON();f.version=a.b||NaN;a.d.setItem(b,S(f));d(c.version||NaN)}else{for(f=0;f<a.a.a.length;f++)g=a.a.c(f);a.b=c.version||NaN;d(a.b)}else c=c.toJSON(),a.b=1,c.version=a.b,a.d.setItem(b,S(c)),d(NaN);return e}h.Ba=function(){};h.Aa=function(){};h.Ca=function(){};h.O=function(){return"memory"};h.close=function(){};function Id(a,b,c){b(new $e(a,function(a,b){c(a,b)}))}
h.toString=function(){return"SimpleStorage:"+this.O()+":"+(this.c+":"+this.b)};function bf(){af.call(this,this)}z(bf,af);bf.prototype.R=function(){return window.localStorage};bf.prototype.O=function(){return"localstorage"};Nc.push(function(a,b){if(!b||"localstorage"==b){var c=new bf,d=new yd;Fd(c,a,d);Bd(c,function(a){for(var b=0;b<a.a.length;b++)Ze(c,a.a[b].getName()).clear()})}});function cf(){af.call(this,this)}z(cf,af);cf.prototype.R=function(){return window.sessionStorage};cf.prototype.O=function(){return"sessionstorage"};
Nc.push(function(a,b){if(!b||"sessionstorage"==b){var c=new cf,d=new yd;Fd(c,a,d);Bd(c,function(a){for(var b=0;b<a.a.length;b++)Ze(c,a.a[b].getName()).clear()})}});function df(){};function ef(){}z(ef,df);ef.prototype.clear=function(){var a=Fb(this.J(!0)),b=this;Fa(a,function(a){b.a.removeAttribute(ff(a));gf(b)})};function hf(a,b){if(H&&!(H&&9<=Sb)){jf||(jf=new Gb);this.a=Object.prototype.hasOwnProperty.call(jf.b,a)?jf.b[a]:void 0;this.a||(b?this.a=document.getElementById(b):(this.a=document.createElement("userdata"),this.a.addBehavior("#default#userData"),document.body.appendChild(this.a)),Hb(jf,a,this.a));this.b=a;try{this.a.load(this.b)}catch(c){this.a=null}}}z(hf,ef);var kf={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},jf=null;hf.prototype.a=null;hf.prototype.b=null;
function ff(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return kf[a]})}hf.prototype.J=function(a){var b=0,c=this.a.XMLDocument.documentElement.attributes,d=new Cb;d.next=function(){if(b>=c.length)throw Bb;var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;if(!w(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};
hf.prototype.clear=function(){for(var a=this.a.XMLDocument.documentElement,b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);gf(this)};function gf(a){try{a.a.save(a.b)}catch(b){throw"Storage mechanism: Quota exceeded";}};function lf(){af.call(this,this)}z(lf,af);lf.prototype.R=function(a){return new mf(a)};lf.prototype.O=function(){return"userdata"};function mf(a){this.b=new hf(a);this.length=this.keys().length}h=mf.prototype;h.length=0;h.clear=function(){this.b.clear();this.a=[]};h.keys=function(){this.a||(this.a=[],Eb(this.b,function(a){this.a.push(a)},this));return this.a};h.key=function(a){return this.keys()[a]};h.setItem=function(a,b){this.a&&this.a.push(a);var c=this.b;c.a.setAttribute(ff(a),b);gf(c)};
h.getItem=function(a){a=this.b.a.getAttribute(ff(a));if(!w(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return p(a)?a:null};h.removeItem=function(a){this.a=null;var b=this.b;b.a.removeAttribute(ff(a));gf(b)};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
re.prototype.ea=function(a){return"localstorage"==a&&window.localStorage?new bf:"sessionstorage"==a&&window.sessionStorage?new cf:"memory"==a?new af:"userdata"==a?new lf:null};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
re.prototype.branch=re.prototype.sa;re.prototype.getTxNo=re.prototype.Oa;Yd.prototype.getTxNo=Yd.prototype.Na;re.prototype.run=re.prototype.Fa;Y.prototype.branch=Y.prototype.sa;Y.prototype.add=Y.prototype.ba;Y.prototype.get=Y.prototype.G;Y.prototype.keys=Y.prototype.keys;Y.prototype.values=Y.prototype.N;Y.prototype.put=Y.prototype.H;Y.prototype.clear=Y.prototype.clear;Y.prototype.remove=Y.prototype.da;Y.prototype.count=Y.prototype.ca;X.prototype.add=X.prototype.ba;X.prototype.get=X.prototype.G;X.prototype.keys=X.prototype.keys;X.prototype.values=X.prototype.N;X.prototype.put=X.prototype.H;X.prototype.clear=X.prototype.clear;
X.prototype.remove=X.prototype.da;X.prototype.count=X.prototype.ca;ja("ydn.db.Key",Q);Q.prototype.id=Q.prototype.va;Q.prototype.parent=Q.prototype.Ja;Q.prototype.storeName=Q.prototype.Ka;ja("ydn.db.KeyRange",R);R.upperBound=R.upperBound;R.lowerBound=R.lowerBound;R.bound=R.bound;R.only=R.only;R.starts=function(a){var b;if(u(a))b=Ka(a),b.push("\uffff");else if(w(a))b=a+"\uffff";else if(ca(a))b=a+2.220460492503131E-16,a-=2.220460492503131E-16;else return R.only(a);return R.bound(a,b,!1,!0)};
Pc.prototype.store_name=Pc.prototype.b;Pc.prototype.getStoreName=Pc.prototype.a;function nf(a,b,c){Y.call(this,a,b,c)}z(nf,Y);ja("ydn.db.Storage",nf);var of=new function(){this.a=ha()};var pf=Ua("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function qf(){this.a=rf}qf.prototype.C=!0;qf.prototype.w=function(){return""};qf.prototype.toString=function(){return"Const{}"};function sf(a){if(a instanceof qf&&a.constructor===qf&&a.a===rf)return"";Da("expected object of type Const, got '"+a+"'");return"type_error:Const"}var rf={};function tf(){this.a="";this.b=uf}tf.prototype.C=!0;var uf={};tf.prototype.w=function(){return this.a};tf.prototype.toString=function(){return"SafeStyle{"+this.a+"}"};function vf(a){var b=new tf;b.a=a;return b}var wf=vf(""),xf=/^[-.%_!# a-zA-Z0-9]+$/;function yf(){this.a=zf}h=yf.prototype;h.C=!0;h.w=function(){return""};h.ga=!0;h.B=function(){return 1};h.toString=function(){return"SafeUrl{}"};var zf={};function Af(){this.a=Bf}h=Af.prototype;h.C=!0;h.w=function(){return""};h.ga=!0;h.B=function(){return 1};h.toString=function(){return"TrustedResourceUrl{}"};var Bf={};function Cf(){this.a="";this.c=Df;this.b=null}h=Cf.prototype;h.ga=!0;h.B=function(){return this.b};h.C=!0;h.w=function(){return this.a};h.toString=function(){return"SafeHtml{"+this.a+"}"};function Ef(a){if(a instanceof Cf&&a.constructor===Cf&&a.c===Df)return a.a;Da("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}function Ff(a){if(a instanceof Cf)return a;var b=null;a.ga&&(b=a.B());return Gf(pa(a.C?a.w():String(a)),b)}
function Hf(a){if(a instanceof Cf)return a;a=Ff(a);var b;b=Ef(a).replace(/  /g," &#160;").replace(/(\r\n|\r|\n)/g,"<br>");return Gf(b,a.B())}var If=/^[a-zA-Z0-9-]+$/,Jf=Ua("action","cite","data","formaction","href","manifest","poster","src"),Kf=Ua("embed","iframe","link","script","style","template");
function Lf(a,b,c){if(!If.test(a))throw Error("Invalid tag name <"+a+">.");if(a.toLowerCase()in Kf)throw Error("Tag name <"+a+"> is not allowed for SafeHtml.");var d=null,e="<"+a;if(b)for(var f in b){if(!If.test(f))throw Error('Invalid attribute name "'+f+'".');var g=b[f];if(null!=g){var k,l=a;k=f;if(g instanceof qf)g=sf(g);else if("style"==k.toLowerCase()){if(!x(g))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof g+" given: "+g);if(!(g instanceof
tf)){var l="",n=void 0;for(n in g){if(!/^[-_a-zA-Z0-9]+$/.test(n))throw Error("Name allows only [-_a-zA-Z0-9], got: "+n);var q=g[n];null!=q&&(q instanceof qf?q=sf(q):xf.test(q)||(Da("String value allows only [-.%_!# a-zA-Z0-9], got: "+q),q="zClosurez"),l+=n+":"+q+";")}g=l?vf(l):wf}g instanceof tf&&g.constructor===tf&&g.b===uf?g=g.a:(Da("expected object of type SafeStyle, got '"+g+"'"),g="type_error:SafeStyle")}else{if(/^on/i.test(k))throw Error('Attribute "'+k+'" requires goog.string.Const value, "'+
g+'" given.');if(k.toLowerCase()in Jf)if(g instanceof Af)g instanceof Af&&g.constructor===Af&&g.a===Bf?g="":(Da("expected object of type TrustedResourceUrl, got '"+g+"'"),g="type_error:TrustedResourceUrl");else if(g instanceof yf)g instanceof yf&&g.constructor===yf&&g.a===zf?g="":(Da("expected object of type SafeUrl, got '"+g+"'"),g="type_error:SafeUrl");else throw Error('Attribute "'+k+'" on tag "'+l+'" requires goog.html.SafeUrl or goog.string.Const value, "'+g+'" given.');}g.C&&(g=g.w());k=k+'="'+
pa(String(g))+'"';e=e+(" "+k)}}p(c)?u(c)||(c=[c]):c=[];!0===pf[a.toLowerCase()]?e+=">":(d=Mf(c),e+=">"+Ef(d)+"</"+a+">",d=d.B());(a=b&&b.dir)&&(/^(ltr|rtl|auto)$/i.test(a)?d=0:d=null);return Gf(e,d)}function Mf(a){function b(a){u(a)?Fa(a,b):(a=Ff(a),d+=Ef(a),a=a.B(),0==c?c=a:0!=a&&c!=a&&(c=null))}var c=0,d="";Fa(arguments,b);return Gf(d,c)}var Df={};function Gf(a,b){var c=new Cf;c.a=a;c.b=b;return c}var Nf=Gf("",0);function Of(a){this.e=a||"";this.f=of}Of.prototype.c=!0;Of.prototype.a=!0;Of.prototype.b=!1;function Pf(a){a=new Date(a.f);return Qf(a.getFullYear()-2E3)+Qf(a.getMonth()+1)+Qf(a.getDate())+" "+Qf(a.getHours())+":"+Qf(a.getMinutes())+":"+Qf(a.getSeconds())+"."+Qf(Math.floor(a.getMilliseconds()/10))}function Qf(a){return 10>a?"0"+a:String(a)}function Rf(a,b){var c=(a.f-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Sf(a){Of.call(this,a)}z(Sf,Of);
Sf.prototype.b=!0;Sf.prototype.d=function(a){return a?Tf(this,a).w():""};
function Tf(a,b){var c;switch(b.e.value){case ac.value:c="dbg-sh";break;case bc.value:c="dbg-sev";break;case cc.value:c="dbg-w";break;case dc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(a.e," ");a.a&&d.push("[",Pf(b),"] ");d.push("[",Rf(b,a.f.a),"s] ");d.push("[",b.c,"] ");var d=Hf(d.join("")),e=Nf;a.b&&b.b&&(e=Mf(Lf("br"),Hf(b.a||"")));var f=Hf(b.d);c=Lf("span",{"class":c},Mf(f,e));return a.c?Mf(d,c,Lf("br")):Mf(d,c)}function Uf(a){Of.call(this,a)}z(Uf,Of);
Uf.prototype.d=function(a){var b=[];b.push(this.e," ");this.a&&b.push("[",Pf(a),"] ");b.push("[",Rf(a,this.f.a),"s] ");b.push("[",a.c,"] ");b.push(a.d);this.b&&a.b&&b.push("\n",a.a);this.c&&b.push("\n");return b.join("")};function Vf(){this.e=ga(this.f,this);this.a=new Uf;this.a.a=!1;this.a.b=!1;this.b=this.a.c=!1;this.c="";this.d={}}Vf.prototype.f=function(a){if(!this.d[a.c]){var b=this.a.d(a),c=Wf;if(c)switch(a.e){case ac:Xf(c,"info",b);break;case bc:Xf(c,"error",b);break;case cc:Xf(c,"warn",b);break;default:Xf(c,"debug",b)}else this.c+=b}};var Wf=m.console;function Xf(a,b,c){if(a[b])a[b](c);else a.log(c)};var Yf=!H||H&&9<=Sb;!Kb&&!H||H&&H&&9<=Sb||Kb&&Qb("1.9.1");H&&Qb("9");function Zf(a,b){Qa(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in $f?a.setAttribute($f[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var $f={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function ag(a,b,c){function d(c){c&&b.appendChild(w(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!v(f)||x(f)&&0<f.nodeType?d(f):Fa(bg(f)?Ka(f):f,d)}}function bg(a){if(a&&"number"==typeof a.length){if(x(a))return"function"==typeof a.item||"string"==typeof a.item;if(da(a))return"function"==typeof a.item}return!1}function cg(a){this.a=a||m.document||document}
function dg(a,b){var c;c=a.a;var d=b&&"*"!=b?b.toUpperCase():"";c.querySelectorAll&&c.querySelector&&d?c=c.querySelectorAll(d+""):c=c.getElementsByTagName(d||"*");return c}
cg.prototype.b=function(a,b,c){var d=this.a,e=arguments,f=e[0],g=e[1];if(!Yf&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',pa(g.name),'"');if(g.type){f.push(' type="',pa(g.type),'"');var k={};Ta(k,g);delete k.type;g=k}f.push(">");f=f.join("")}f=d.createElement(f);g&&(w(g)?f.className=g:u(g)?f.className=g.join(" "):Zf(f,g));2<e.length&&ag(d,f,e);return f};
cg.prototype.contains=function(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function eg(a){H&&p(a.cssText)?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}"}
;function fg(a){this.e=ga(this.f,this);this.b=new Sf;this.c=this.b.a=!1;this.a=a;this.d=this.a.ownerDocument||this.a.document;a=(a=this.a)?new cg(9==a.nodeType?a:a.ownerDocument||a.document):ma||(ma=new cg);var b=null,c=a.a;H&&c.createStyleSheet?(b=c.createStyleSheet(),eg(b)):(c=dg(a,"head")[0],c||(b=dg(a,"body")[0],c=a.b("head"),b.parentNode.insertBefore(c,b)),b=a.b("style"),eg(b),c.appendChild(b));this.a.className+=" logdiv"}
fg.prototype.f=function(a){if(a){var b=100>=this.a.scrollHeight-this.a.scrollTop-this.a.clientHeight,c=this.d.createElement("div");c.className="logmsg";a=Tf(this.b,a);c.innerHTML=Ef(a);this.a.appendChild(c);b&&(this.a.scrollTop=this.a.scrollHeight)}};fg.prototype.clear=function(){this.a&&(this.a.innerHTML=Ef(Nf))};H&&Qb("9");!Lb||Qb("528");Kb&&Qb("1.9b")||H&&Qb("8")||Jb&&Qb("9.5")||Lb&&Qb("528");Kb&&!Qb("8")||H&&Qb("9");var gg=null,hg=null;I("ydn.debug");ja("ydn.debug.log",function(a,b,c){a=a||"ydn";if(ca(b))b=new $b("log",b);else if(w(b)){b=b.toUpperCase();if(!kc){kc={};for(var d=0,e;e=jc[d];d++)kc[e.value]=e,kc[e.name]=e}b=kc[b]||null}else b=gc;(d=I(a))?d.b=b:window.console.log("logger "+a+" not available.");p(c)?!hg&&(a=hg=new fg(c),1!=a.c&&(c=pc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.c=!0),a=pc())&&(a.b=cc):!gg&&!hg&&(a=gg=new Vf,1!=a.b&&(c=pc(),b=a.e,c.a||(c.a=[]),c.a.push(b),a.b=!0),a=pc())&&(a.b=cc)}); 

//# sourceMappingURL=ydn.db-wu-crud-dev.js.map
return ydn;}, (this || {}));
            
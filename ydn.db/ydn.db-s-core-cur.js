(function (name, definition, context) {if (typeof context['module'] !== 'undefined' && context['module']['exports']) {context['module']['exports'] = definition.apply(context);}else if (typeof context['define'] !== 'undefined' && context['define'] === 'function' && context['define']['amd']) {define(name, [], definition);}else {context[name] = definition();}})('ydn', function () {var l,q=this;function r(a){return void 0!==a}
function aa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function v(a){return"array"==aa(a)}function w(a){var b=aa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function ba(a){return"boolean"==typeof a}function y(a){return"number"==typeof a}function z(a){return"function"==aa(a)}function B(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ca="closure_uid_"+(1E9*Math.random()>>>0),da=0;
function ea(a,b,c){return a.call.apply(a.bind,arguments)}function fa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ga(a,b,c){ga=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa;return ga.apply(null,arguments)}
function ha(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ia=Date.now||function(){return+new Date};function ja(a,b){var c=a.split("."),d=q;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&r(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}
function C(a,b){function c(){}c.prototype=b.prototype;a.o=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.sb=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function la(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function na(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function oa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,oa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}C(oa,Error);oa.prototype.name="CustomError";function pa(a){for(var b=0;1>b;b++)if('"'==a.charAt(0)&&'"'==a.charAt(a.length-1))return a.substring(1,a.length-1);return a}var qa={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},ra={"'":"\\'"};
function sa(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=c+1,g;if(!(g=qa[d])){if(!(31<e&&127>e))if(d in ra)d=ra[d];else if(d in qa)d=ra[d]=qa[d];else{e=d;g=d.charCodeAt(0);if(31<g&&127>g)e=d;else{if(256>g){if(e="\\x",16>g||256<g)e+="0"}else e="\\u",4096>g&&(e+="0");e+=g.toString(16).toUpperCase()}d=ra[d]=e}g=d}b[f]=g}b.push('"');return b.join("")};var ta=Array.prototype,ua=ta.indexOf?function(a,b,c){return ta.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},va=ta.map?function(a,b,c){return ta.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},wa=ta.some?function(a,b,c){return ta.some.call(a,b,c)}:function(a,b,c){for(var d=
a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};function xa(a,b){var c=ya(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}function ya(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function za(a){if(!v(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Aa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ba(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=Ca,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Ca(a,b){return a===b};var Da;a:{var Fa=q.navigator;if(Fa){var Ga=Fa.userAgent;if(Ga){Da=Ga;break a}}Da=""};function Ha(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],r(a));c++);return a};function Ia(a){q.setTimeout(function(){throw a;},0)}var Ja;
function Ka(){var a=q.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(a=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=ga(function(a){if(("*"==d||a.origin==d)&&a.data==c)this.port1.onmessage()},
this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==Da.indexOf("Trident")&&-1==Da.indexOf("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(r(c.next)){c=c.next;var a=c.Aa;c.Aa=null;a()}};return function(a){d.next={Aa:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){q.setTimeout(a,0)}};function La(a,b){Ma||Na();Oa||(Ma(),Oa=!0);Pa.push(new Qa(a,b))}var Ma;function Na(){if(q.Promise&&q.Promise.resolve){var a=q.Promise.resolve();Ma=function(){a.then(Ra)}}else Ma=function(){var a=Ra;!z(q.setImmediate)||q.Window&&q.Window.prototype.setImmediate==q.setImmediate?(Ja||(Ja=Ka()),Ja(a)):q.setImmediate(a)}}var Oa=!1,Pa=[];function Ra(){for(;Pa.length;){var a=Pa;Pa=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.a.call(c.b)}catch(d){Ia(d)}}}Oa=!1}function Qa(a,b){this.a=a;this.b=b};function Sa(a,b){this.b=Ta;this.f=void 0;this.a=this.e=null;this.c=this.d=!1;try{var c=this;a.call(b,function(a){Ua(c,Va,a)},function(a){Ua(c,Wa,a)})}catch(d){Ua(this,Wa,d)}}var Ta=0,Va=2,Wa=3;Sa.prototype.then=function(a,b,c){return Xa(this,z(a)?a:null,z(b)?b:null,c)};la(Sa);function Ya(a,b){a.a&&a.a.length||a.b!=Va&&a.b!=Wa||Za(a);a.a||(a.a=[]);a.a.push(b)}
function Xa(a,b,c,d){var e={da:null,Ea:null,Fa:null};e.da=new Sa(function(a,g){e.Ea=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){g(m)}}:a;e.Fa=c?function(b){try{var e=c.call(d,b);a(e)}catch(m){g(m)}}:g});e.da.e=a;Ya(a,e);return e.da}Sa.prototype.g=function(a){this.b=Ta;Ua(this,Va,a)};Sa.prototype.h=function(a){this.b=Ta;Ua(this,Wa,a)};
function Ua(a,b,c){if(a.b==Ta){if(a==c)b=Wa,c=new TypeError("Promise cannot resolve to itself");else{if(na(c)){a.b=1;c.then(a.g,a.h,a);return}if(B(c))try{var d=c.then;if(z(d)){$a(a,c,d);return}}catch(e){b=Wa,c=e}}a.f=c;a.b=b;Za(a);b!=Wa||bb(a,c)}}function $a(a,b,c){function d(b){f||(f=!0,a.h(b))}function e(b){f||(f=!0,a.g(b))}a.b=1;var f=!1;try{c.call(b,e,d)}catch(g){d(g)}}function Za(a){a.d||(a.d=!0,La(a.i,a))}
Sa.prototype.i=function(){for(;this.a&&this.a.length;){var a=this.a;this.a=[];for(var b=0;b<a.length;b++){var c=a[b],d=this.f;if(this.b==Va)c.Ea(d);else{if(c.da)for(var e=void 0,e=this;e&&e.c;e=e.e)e.c=!1;c.Fa(d)}}}this.d=!1};function bb(a,b){a.c=!0;La(function(){a.c&&cb.call(null,b)})}var cb=Ia;/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function D(a,b){this.g=[];this.G=b||null;this.b=this.e=!1;this.c=void 0;this.Q=this.p=this.h=!1;this.d=0;this.f=null;this.r=0}l=D.prototype;l.ea=function(a,b){this.h=!1;db(this,a,b)};function db(a,b,c){a.e=!0;a.c=c;a.b=!b;a.ta()}function eb(a){if(a.e){if(!a.Q)throw new fb;a.Q=!1}}l.callback=function(a){eb(this);db(this,!0,a)};l.k=function(a){eb(this);db(this,!1,a)};l.C=function(a,b){return gb(this,a,null,b)};l.za=function(a,b){return gb(this,null,a,b)};l.ya=function(a,b){return gb(this,a,a,b)};
function gb(a,b,c,d){a.g.push([b,c,d]);a.e&&a.ta();return a}l.then=function(a,b,c){var d,e,f=new Sa(function(a,b){d=a;e=b});gb(this,d,function(a){e(a)});return f.then(a,b,c)};la(D);function hb(a){return wa(a.g,function(a){return z(a[1])})}
D.prototype.ta=function(){this.d&&this.e&&hb(this)&&(ib(this.d),this.d=0);this.f&&(this.f.r--,delete this.f);for(var a=this.c,b=!1,c=!1;this.g.length&&!this.h;){var d=this.g.shift(),e=d[0],f=d[1],d=d[2];if(e=this.b?f:e)try{var g=e.call(d||this.G,a);r(g)&&(this.b=this.b&&(g==a||g instanceof Error),this.c=a=g);na(a)&&(this.h=c=!0)}catch(h){a=h,this.b=!0,hb(this)||(b=!0)}}this.c=a;c&&(c=ga(this.ea,this,!0),g=ga(this.ea,this,!1),a instanceof D?(gb(a,c,g),a.p=!0):a.then(c,g));b&&(a=new jb(a),kb[a.ga]=
a,this.d=a.ga)};function fb(){oa.call(this)}C(fb,oa);fb.prototype.message="Deferred has already fired";fb.prototype.name="AlreadyCalledError";function jb(a){this.ga=q.setTimeout(ga(this.b,this),0);this.a=a}jb.prototype.b=function(){delete kb[this.ga];throw this.a;};var kb={};function ib(a){var b=kb[a];b&&(q.clearTimeout(b.ga),delete kb[a])};function E(a){oa.call(this,a);this.name="ydn.error.ArgumentException"}C(E,oa);function lb(a){oa.call(this,a);this.name="ydn.error.NotSupportedException"}C(lb,oa);function mb(a){oa.call(this,a);this.name="ydn.error.NotImplementedException"}C(mb,oa);function nb(a){oa.call(this,a);this.name="ydn.error.InvalidOperationException"}C(nb,oa);
function ob(a){Error.captureStackTrace?Error.captureStackTrace(this,ob):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}C(ob,Error);ob.prototype.name="ydn.error.InternalError";var pb=-1!=Da.indexOf("Opera")||-1!=Da.indexOf("OPR"),qb=-1!=Da.indexOf("Trident")||-1!=Da.indexOf("MSIE"),rb=-1!=Da.indexOf("Gecko")&&-1==Da.toLowerCase().indexOf("webkit")&&!(-1!=Da.indexOf("Trident")||-1!=Da.indexOf("MSIE")),sb=-1!=Da.toLowerCase().indexOf("webkit");
(function(){var a="",b;if(pb&&q.opera)return a=q.opera.version,z(a)?a():a;rb?b=/rv\:([^\);]+)(\)|;)/:qb?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:sb&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Da))?a[1]:"");return qb&&(b=(b=q.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();function tb(){}function ub(){};function vb(a,b){D.call(this,0,b);this.m=[]}C(vb,D);vb.prototype.ka=function(a,b){this.m.push([a,b]);return this};vb.prototype.callback=function(a){this.m.length=0;vb.o.callback.call(this,a)};vb.prototype.k=function(a){this.m.length=0;vb.o.k.call(this,a)};vb.prototype.va=function(){return this};var wb={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},F=wb.READ_ONLY,H=wb.READ_WRITE,xb=wb.VERSION_CHANGE,yb=q.indexedDB||q.mozIndexedDB||q.webkitIndexedDB||q.moz_indexedDB||q.msIndexedDB;D.prototype.done=D.prototype.C;D.prototype.fail=D.prototype.za;D.prototype.always=D.prototype.ya;vb.prototype.then=vb.prototype.then;function zb(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],r(a));c++);return a}var Ab={};
function Bb(a){var b=[a];a=new Cb;for(var c=0,d,e;void 0!==(e=b.pop());){0===c%4&&12<c+4&&(a.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){b.push(Ab);for(d=e.length;d--;)b.push(e[d]);continue}else a.write(c);else if("number"===d)c+=1,a.write(c),Db(a,e);else if(e instanceof Date)c+=2,a.write(c),Db(a,e.valueOf());else if("string"===d){c+=3;a.write(c);c=a;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,
f>>2|255,(f|3)<<6)}c.write(0)}else if(e===Ab)a.write(0);else return"";c=0}for(b=a.a.length;"00"===a.a[--b];);a.a.length=++b;return a.toString()}
function Db(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Eb(a){var b=Fb(a)|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=Fb(a)|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(Fb(a)|0):Fb(a)|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Gb(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=Fb(a);if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Hb(a){this.a=null;this.b=a;this.c=this.b.length-1;this.index=-1}function Fb(a){return a.a=a.index<a.c?parseInt(a.b.charAt(++a.index)+a.b.charAt(++a.index),16):null}
function Cb(){this.a=[];this.b=void 0}Cb.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.b=arguments[b].toString(16),this.a.push(2===this.b.length?this.b:this.b="0"+this.b)};Cb.prototype.toString=function(){return this.a.length?this.a.join(""):""};function Ib(a,b){var c=Bb(a),d=Bb(b);return c>d?1:c==d?0:-1};function I(a,b,c){vb.call(this,0,c);this.j=a;this.m=[];this.i=[];this.ba=[];this.a=null;this.S="";this.w=0}C(I,vb);l=I.prototype;l.S="";function Jb(a,b,c){a.a=b;a.S=c;if(b){for(c=0;c<a.i.length;c++)a.i[c][0].call(a.i[c][1],b);a.i.length=0}}function Kb(a){var b=new I(a.j);a.w++;Jb(b,a.a,a.S+"C"+a.w);return b}l.Ma=function(){return!!this.a};
l.abort=function(){if(this.a)if(z(this.a.abort))this.a.abort();else if(z(this.a.executeSql))this.a.executeSql("ABORT",[],function(){},function(){return!0});else throw new lb;else throw new Lb("");};function J(a,b,c){var d=a.ba.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){J(a,b,c)}):c?a.k(b):a.callback(b)}function Mb(a,b,c){a.ba.push([b,c])}function K(a,b,c){a.a?b.call(c,a.a):a.i.push([b,c])}l.callback=function(a){I.o.callback.call(this,a)};l.k=function(a){I.o.k.call(this,a)};
function Nb(a,b){var c=new I(a);J(c,b);return c}l.toString=function(){var a="";this.S&&(a=this.a?"*":"",a="["+this.S+a+"]");return"Request:"+(this.j+a)};
l.ta=function(){this.d&&this.e&&hb(this)&&(ib(this.d),this.d=0);this.f&&(this.f.r--,delete this.f);for(var a=this.c,b=!1;this.g.length&&!this.h;){var c=this.g.shift(),d=c[0],e=c[1],c=c[2];if(d=this.b?e:d)d=d.call(c||this.G,a),r(d)&&(this.b=this.b&&(d==a||d instanceof Error),this.c=a=d),na(a)&&(this.h=b=!0)}this.c=a;b&&(b=ga(this.ea,this,!0),d=ga(this.ea,this,!1),a instanceof D?(gb(a,b,d),a.p=!0):a.then(b,d))};
l.toJSON=function(){var a=(this.S||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.j?this.j.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var M=yb&&yb.cmp?ga(yb.cmp,yb):Ib,Ob=[];function Pb(){0!=Qb&&(this[ca]||(this[ca]=++da));this.ba=this.ba;this.va=this.va}var Qb=0;Pb.prototype.ba=!1;function Rb(a,b){this.type=a;this.target=b};function Sb(a,b){Rb.call(this,a,b)}C(Sb,Rb);Sb.prototype.a=function(){return this.b};function Tb(a,b,c,d,e){Rb.call(this,a,b);this.version=c;this.Ja=d;this.Da=e}C(Tb,Sb);l=Tb.prototype;l.name="ReadyEvent";l.version=NaN;l.Ja=NaN;l.Da=null;l.qb=function(){return this.version};l.Pa=function(){return this.Ja};l.Oa=function(){return this.Da};function Ub(a,b,c){Rb.call(this,c||"error",a);this.error=b}C(Ub,Sb);Ub.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};
Ub.prototype.name="ErrorEvent";Ub.prototype.error=null;Ub.prototype.c=function(){return this.error};function Xb(a,b){Ub.call(this,a,b,"fail")}C(Xb,Ub);Xb.prototype.name="FailEvent";function Yb(a,b,c){var d;if(B(a))d=a.store,b=a.id,null!=a.parent&&(c=new Yb(a.parent));else if(r(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new Yb(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!r(b))throw Error("Invalid key value: "+a);this.b=d;this.a=b;this.c=c||null}l=Yb.prototype;l.toJSON=function(){var a={store:this.b,id:this.a};this.c&&(a.parent=this.c.toJSON());return a};l.valueOf=function(){return(this.c?this.c.valueOf()+"^|":"")+this.b+"^:"+this.a};
l.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};l.jb=function(){return this.b};l.Na=function(){return this.a};function Zb(a){return v(a.a)?a.a.join("^|"):a.a instanceof Date?+a.a:a.a}l.ib=function(){return this.c};function $b(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function N(a,b,c,d){a>b&&(b=a=void 0);null===a&&(a=void 0);null===b&&(b=void 0);this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d}N.prototype.lower=void 0;N.prototype.upper=void 0;N.prototype.toJSON=function(){var a;a=this||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}};N.only=function(a){return new N(a,a,!1,!1)};N.bound=function(a,b,c,d){return new N(a,b,c,d)};N.upperBound=function(a,b){return new N(void 0,a,void 0,!!b)};
N.lowerBound=function(a,b){return new N(a,void 0,!!b,void 0)};function ac(a){var b;if(v(a))b=Aa(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else if(y(a))b=a+2.220460492503131E-16,a-=2.220460492503131E-16;else return N.only(a);return N.bound(a,b,!1,!0)}function bc(a){return null!=a?null!=a.upper&&null!=a.lower?cc.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?cc.upperBound(a.upper,a.upperOpen):null!=a.lower?cc.lowerBound(a.lower,a.lowerOpen):null:null}
function dc(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==M(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(ec(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(ec(c.upper,b)))}else d.push(a+" = ?"),e.push(ec(c.lower,b))}
function fc(a,b,c,d){var e,f,g,h;if("starts"==a||"^"==a)return ac(b);if("<"==a||"<="==a)e=b,g="<"==a;else if(">"==a||">="==a)f=b,h=">"==a;else if("="==a||"=="==a)e=f=b;else throw new E("invalid op: "+a);if("<"==c||"<="==c)e=d,g="<"==c;else if(">"==c||">="==c)f=d,h=">"==c;else if(r(c))throw new E("invalid op2: "+c);return N.bound(f,e,h,g)}var cc=q.IDBKeyRange||q.webkitIDBKeyRange||N;function gc(a,b,c,d,e,f){r(e)||(e=v(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new E("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);!r(a)&&r(e)&&(a=e);this.keyPath=a;this.h=w(this.keyPath);this.c=e;this.type=hc(b);if(r(b)){if(!r(this.type))throw new E("type invalid in index: "+this.c);if(v(this.keyPath))throw new E('composite key for store "'+this.c+'" must not specified type');}this.b=!!c;this.a=!!d;this.i=x(this.type)?this.type:ic;this.f=x(e)?e:v(a)?this.keyPath.join(","):
a;this.e=sa(this.f);this.d=this.h?null:this.keyPath.split(".");this.g=f||null}var ic="TEXT";function ec(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:Bb(a)}
function jc(a,b){var c;if("DATE"==b)c=new Date(a);else if(r(b))c=a;else{for(var d=c=[],e,f=[],g,h,k=new Hb(a);null!=Fb(k);)if(0===k.a)d=f.pop();else{if(null===k.a)break;do{g=k.a/4|0;e=k.a%4;for(var m=0;m<g;m++)h=[],d.push(h),f.push(d),d=h;if(0===e&&12<k.a+4)Fb(k);else break}while(1);1===e?d.push(Eb(k)):2===e?d.push(new Date(Eb(k))):3===e?d.push(Gb(k)):0===e&&(d=f.pop())}c=c[0]}return c}var kc=["BLOB","DATE","INTEGER","NUMERIC",ic];function hc(a){if(x(a))return a=ua(kc,a),kc[a]}
gc.prototype.getName=function(){return this.c};gc.prototype.toJSON=function(){return{name:this.c,keyPath:this.keyPath,type:this.type,unique:this.b,multiEntry:this.a}};gc.prototype.clone=function(){var a=v(this.keyPath)?Aa(this.keyPath):this.keyPath;return new gc(a,this.type,this.b,this.a,this.c,this.g)};
function lc(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?Ba(a,b)?null:"expect: "+a+", but: "+b:mc(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}gc.prototype.hint=function(a){if(!a)return this;var b=v(this.keyPath)?Aa(this.keyPath):this.keyPath,c=this.type;r(a.type)||"TEXT"!=c||(c=void 0);return new gc(b,c,this.b,this.a,a.c)};function nc(a,b,c,d,e,f,g,h){if(!x(a))throw new E("store name must be a string");this.d=a;this.keyPath=r(b)?b:null;this.g=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.g)throw new E("keyPath must be a string or array");this.c=!!c;var k;if(null!=d){k=hc(d);if(!r(k))throw new E('type "'+d+'" for primary key in store "'+this.d+'" is invalid.');if(this.g)throw new E('composite key for store "'+this.d+'" must not specified type');}this.type=null!=k?k:this.c?"INTEGER":void 0;this.f=x(this.keyPath)?
this.keyPath.split("."):[];this.a=e||[];this.J=!!f;this.M=!!g;this.j=x(this.type)?this.type:ic;this.e=v(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.b=sa(this.e);this.i=!!h;this.h=[]}l=nc.prototype;l.J=!1;l.M=!1;l.toJSON=function(){for(var a=[],b=0;b<this.a.length;b++)a.push(this.a[b].toJSON());return{name:this.d,keyPath:this.keyPath,autoIncrement:this.c,type:this.type,indexes:a}};
function oc(a){var b=[],c=a.indexes||[];if(v(c))for(var d=0;d<c.length;d++){var e;e=c[d];e=new gc(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);r(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new nc(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}
function pc(a,b,c,d,e,f,g){a=qc(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.N;a.l&&(b+=" WHERE "+a.l);a.group&&(b+=" GROUP BY "+a.group);a.H&&(b+=" ORDER BY "+a.H);return b}
function qc(a,b,c,d,e,f,g){var h={select:"",N:"",l:"",group:"",H:""},k=a.e,m=a.b,n=null;d!==k&&x(d)&&(n=rc(a,d));var p=!!n,t=d||k,u=sa(t),A=p?n.type:a.type,G=p&&n.a;h.N=O(a);6===c?h.select="COUNT("+m+")":3===c||1===c||2===c?(h.select=m,null!=d&&d!=k&&(h.select+=", "+u)):h.select="*";d=g?"DISTINCT ":"";k=[];G?(G=sa("ydn.db.me:"+a.getName()+":"+n.getName()),h.select=6===c?"COUNT("+d+G+"."+u+")":3===c||1===c||2===c?"DISTINCT "+O(a)+"."+m+", "+G+"."+u+" AS "+t:"DISTINCT "+O(a)+".*, "+G+"."+u+" AS "+t,
h.N=G+" INNER JOIN "+O(a)+" USING ("+m+")",null!=e&&(dc(G+"."+u,A,e,k,b),0<k.length&&(h.l=h.l?h.l+(" AND "+k.join(" AND ")):k.join(" AND ")))):null!=e&&(dc(u,A,e,k,b),0<k.length&&(h.l=h.l?h.l+(" AND "+k.join(" AND ")):k.join(" AND ")));p&&!n.b&&g&&(h.group=u);a=f?"DESC":"ASC";h.H=u+" "+a;p&&(h.H+=", "+m+" "+a);return h}
function sc(a,b,c,d,e,f,g,h,k){var m,n,p,t;null!=e?(m=e.lower,n=e.upper,p=e.lowerOpen,t=e.upperOpen,f?null!=n?(e=M(h,n),-1==e?(n=h,t=k):0==e&&(t=k||t)):(n=h,t=k):null!=m?(e=M(h,m),1==e?(m=h,p=k):0==e&&(p=k||p)):(m=h,p=k)):f?(n=h,t=k):(m=h,p=k);e=new N(m,n,!!p,!!t);d=d?rc(a,d):null;b=qc(a,c,b,d?d.f:a.e,e,f,g);b="SELECT "+b.select+" FROM "+b.N+(b.l?" WHERE "+b.l:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.H;d&&(b+=", "+a.b+(f?"DESC":"ASC"));return b}
function tc(a,b,c,d,e,f,g,h,k,m){var n=rc(a,d),p=n.f;d=n.e;var t=a.b,u=k?" <":" >",u=g?u+" ":u+"= ";g=ec(f,n.type);h=ec(h,a.type);n="";e?(a=qc(a,c,b,p,e,k,m),a.l+=" AND ",n=d+u+"?",c.push(g)):(e=k?N.upperBound(f,!0):N.lowerBound(f,!0),a=qc(a,c,b,p,e,k,m),n=a.l,a.l="");a.l+="("+n+" OR ("+d+" = ? AND "+t+u+"?))";c.push(g);c.push(h);return"SELECT "+a.select+" FROM "+a.N+" WHERE "+a.l+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.H}l.clone=function(){return oc(this.toJSON())};
l.index=function(a){return this.a[a]||null};function rc(a,b){return xa(a.a,function(a){return a.getName()==b})}function uc(a,b){return b===a.keyPath?!0:wa(a.a,function(a){return a.getName()==b})}function O(a){return sa(a.d)}
function vc(a,b){if(!b)return a;var c=a.c,d=v(a.keyPath)?Aa(a.keyPath):a.keyPath,e=a.type,f=va(a.a,function(a){return a.clone()});r(b.type)||"TEXT"!=e||(e=void 0);v(b.keyPath)&&x(d)&&d==b.keyPath.join(",")&&(d=Aa(b.keyPath));for(var g=0,h=b.a.length;g<h;g++)if(b.a[g].h)for(var k=b.a[g].getName(),m=f.length-1;0<=m;m--)if(0<=k.indexOf(f[m].getName())){f[m]=b.a[g].clone();break}for(g=0;g<f.length;g++)(h=rc(b,f[g].getName()))&&(f[g]=f[g].hint(h));return new nc(b.d,d,c,e,f)}l.getName=function(){return this.d};
function wc(a){return!!a.keyPath}function xc(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.g){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(zb(b,a.keyPath[d]));return c}if(a.keyPath)return Ha(b,a.f)}}function yc(a,b,c){for(var d=0;d<a.f.length;d++){var e=a.f[d];if(d==a.f.length-1){b[e]=c;break}r(b[e])||(b[e]={});b=b[e]}}
function zc(a,b,c){var d=[],e=[];c=r(c)?c:xc(a,b);r(c)&&(e.push(a.b),d.push(ec(c,a.type)));for(var f=0;f<a.a.length;f++){var g=a.a[f];if(!g.a&&g.getName()!==a.keyPath&&"_default_"!=g.getName()){var h;h=g;var k=b;if(null!=k)if(w(h.keyPath)){for(var m=[],n=0,p=h.keyPath.length;n<p;n++){var t=zb(k,h.keyPath[n]);m[n]=t}h=m}else h=zb(k,h.keyPath);else h=void 0;null!=h&&(d.push(ec(h,g.type)),e.push(g.e))}}a.M?a.M&&!a.keyPath&&0==a.a.length&&(x(b)&&-1==b.indexOf(";base64,")?d.push(b):d.push(P(b)),e.push("_default_")):
(d.push(P(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Ba:e,Ga:a,t:d,key:c}}
function Ac(a,b){if(!b)return"missing store: "+a.d;if(a.d!=b.d)return"store name, expect: "+a.d+", but: "+b.d;var c=lc(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(r(a.c)&&r(b.c)&&a.c!=b.c)return"autoIncrement, expect:  "+a.c+", but: "+b.c;if(a.a.length!=b.a.length)return"indexes length, expect:  "+a.a.length+", but: "+b.a.length;if(r(a.type)&&r(b.type)&&(w(a.type)?!Ba(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.a.length;c++){var d=rc(b,a.a[c].getName()),
e;e=a.a[c];if(d)if(e.c!=d.c)e="name, expect: "+e.c+", but: "+d.c;else{var f=lc(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.b&&null!=d.b&&e.b!=d.b?"unique, expect: "+e.b+", but: "+d.b:null!=e.a&&null!=d.a&&e.a!=d.a?"multiEntry, expect: "+e.a+", but: "+d.a:r(e.type)&&r(d.type)&&(w(e.type)?!Ba(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.c;if(0<e.length)return'index "'+a.a[c].getName()+'" '+e}return""}
function Bc(a,b){if(b)for(var c=0;c<a.a.length;c++){var d=a.a[c],e=b;if(d.g){var f=d.g(e),g=typeof f;if("string"==g||"number"==g||f instanceof Date||v(f)){for(g=0;g<d.d.length-1;g++)B(e[d.d[g]])||(e[d.d[g]]={});e[d.d[d.d.length-1]]=f}}}}function Q(a,b,c,d,e){for(var f=0;f<a.h.length;f++)d!==f&&a.h[f].call(e,b,c)};function Cc(a){return!x(a)||/^[\s\xa0]*$/.test(a)?{}:JSON.parse(a)}function Dc(a){var b;try{b=P(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function P(a){return JSON.stringify(a,void 0,void 0)};function Ec(a){this.a=a};function Fc(a,b){this.name=a;this.a=b}Fc.prototype.getName=function(){return this.name};Fc.prototype.index=function(a){return this.a[a]};function Gc(a){if(!v(a.sources))throw new E("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");var b=a.sources.map(function(a){return new Ec(a.storeName)});return new Fc(a.name,b)};function Hc(a,b){var c,d,e=b;if(B(a)){d=a;c=d.version;for(var e=[],f=d.stores||[],g=0;g<f.length;g++){var h=oc(f[g]);e.push(h)}}else x(a)?c=0==a.length?void 0:parseFloat(a):y(a)&&(c=a);if(r(c)){if(!y(c)||0>c)throw new E("Invalid version: "+c+" ("+a+")");isNaN(c)&&(c=void 0)}if(r(b)&&(!v(b)||0<b.length&&!(b[0]instanceof nc)))throw new E("stores");this.version=c;this.c=!r(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(g=0;g<d.fullTextCatalogs.length;g++)e=Gc(d.fullTextCatalogs[g]),
c[g]=e,R(this,e.getName())||(f=[new gc("k",ic),new gc("v",ic)],e=new nc(e.getName(),"id",!1,void 0,f,!1,!1,!1),this.stores.push(e));this.d=c}Hc.prototype.toJSON=function(){var a=va(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;r(this.version)&&(b.version=this.version);return b};Hc.prototype.c=!1;Hc.prototype.a=function(){return!1};function Ic(a){return va(a.stores,function(a){return a.getName()})}Hc.prototype.b=function(a){return this.stores[a]||null};
function R(a,b){return xa(a.stores,function(a){return a.getName()==b})}function Kc(a,b){return wa(a.stores,function(a){return a.getName()==b})}
function Lc(a,b){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var c=0;c<a.stores.length;c++){var d=R(b,a.stores[c].getName());if(d){if(d=vc(d,a.stores[c]),d=Ac(a.stores[c],d),0<d.length)return'store: "'+a.stores[c].getName()+'" '+d}else return'missing object store "'+a.stores[c].getName()+'"'}return""};function Mc(a,b){Hc.call(this,a,b)}C(Mc,Hc);Mc.prototype.a=function(){return!0};function Nc(a){Error.captureStackTrace?Error.captureStackTrace(this,Nc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}C(Nc,Error);C(Nc,Error);function Oc(a){Error.captureStackTrace?Error.captureStackTrace(this,Oc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}C(Oc,Error);
function Pc(a){Error.captureStackTrace?Error.captureStackTrace(this,Pc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}C(Pc,Error);Pc.prototype.name="ydn.InternalError";function Qc(a){Error.captureStackTrace?Error.captureStackTrace(this,Qc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}C(Qc,Error);Qc.prototype.name="ydn.error.ConstraintError";
function Rc(a){Error.captureStackTrace?Error.captureStackTrace(this,Rc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}C(Nc,Error);function Sc(a){Error.captureStackTrace?Error.captureStackTrace(this,Sc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}C(Sc,Error);function mc(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==xa(b,function(b){return mc(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&mc(a[0],b);if(w(b))return 1==b.length&&mc(b[0],a);if(B(a)&&B(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=mc(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=mc(a[e],b[e]),!f))return!1;return!0}return a===b}return!1};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function U(a,b,c){c=c||{};this.j=c.mechanisms||Tc;this.i=c.size;this.a=null;this.e=[];this.ha=!1;var d;if(b instanceof Hc)d=b;else if(B(b)){c.autoSchema||!r(b.stores)?d=new Mc(b):d=new Hc(b);var e=b.stores?b.stores.length:0;for(c=0;c<e;c++)R(d,b.stores[c].name)}else d=new Mc;this.b=d;for(c=0;c<this.b.stores.length;c++)this.b.b(c).i&&this.b.b(c);r(a)&&this.h(a);this.d=new D}
U.prototype.m=function(a){if(r(a)){var b=function(b){a(b.toJSON());a=void 0};if(this.a)Uc(this.a,b);else{var c=this;this.transaction(function(a){Uc(c.a,b,a)},null,F)}}return this.b?this.b.toJSON():null};function Vc(a,b){var c=b instanceof nc?b:oc(b),d=R(a.b,b.name);if(0==Ac(c,d).length)(new D).callback(!1);else if(a.b instanceof Mc)a.b.stores.push(c),a.a?(a.a.close(),a.a=null,Wc(a)):(new D).callback(!1);else throw new Qc("");}
U.prototype.h=function(a){if(this.a)throw new nb("Already connected with "+this.f);this.f=a;Wc(this)};U.prototype.getName=function(){return this.f};var Tc="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");l=U.prototype;l.sa=function(){return null};
function Wc(a){function b(b,e){b?(a.Ca=NaN,d.kb=function(){},d.lb=function(){a.a=null},d.c=function(){},setTimeout(function(){Xc(a,e);Yc(a)},10),c.callback(e)):(setTimeout(function(){Xc(a,new Xb(a,e));if(a.e)for(var b;b=a.e.shift();)b.q&&b.q("error",e)},10),c.k(e))}for(var c=new D,d=null,e=a.j,f=0;f<e.length;f++){var g=e[f].toLowerCase();if(d=a.sa(g)){d=a.sa(g);break}}null===d?(e=new Qc("No storage mechanism found."),b(!1,new Xb(a,e))):gb(Zc(d,a.f,a.b),function(a){this.a=d;b(!0,new Tb("ready",this,
parseFloat(d.n?parseFloat(d.n.version):void 0),parseFloat(a),null))},function(a){b(!1,a)},a)}l.na=function(){if(this.a)return this.a.b};l.ja=function(a,b){this.d.ya(a,b)};function Xc(a,b){setTimeout(function(){a.b.c&&a.d.e||(b instanceof Ub?a.d.k(b.error):a.d.callback())},4)}function $c(a){return!!a.a&&!!a.a.n}l.close=function(){this.a&&(this.a.close(),this.a=null)};l.mb=function(){return this.a?this.a.n||null:null};l.Ca=NaN;
function Yc(a){var b=a.e.shift();b&&a.transaction(b.fa,b.Va,b.mode,b.q);a.Ca=ia()}l.ha=!1;l.transaction=function(a,b,c,d){var e=b;x(b)?e=[b]:null!=b||(e=null);if(this.a&&this.a.n&&!this.ha){var f=this,g=r(c)?c:F;g==xb&&(this.ha=!0);ad(this.a,function(b){a(b);a=null},g,function(a,b){z(d)&&(d(a,b),d=void 0);g==xb&&(f.ha=!1);Yc(f)})}else this.e.push({fa:a,Va:e,mode:c,q:d})};U.prototype.close=U.prototype.close;U.prototype.getType=U.prototype.na;U.prototype.getName=U.prototype.getName;U.prototype.getSchema=U.prototype.m;U.prototype.onReady=U.prototype.ja;U.prototype.setName=U.prototype.h;U.prototype.transaction=U.prototype.transaction;U.prototype.db=U.prototype.mb;ja("ydn.db.version","1.1.2");ja("ydn.db.cmp",M);ja("ydn.db.deleteDatabase",function(a,b){for(var c,d=0;d<Ob.length;d++){var e=Ob[d](a,b);e&&(c=e)}return c||Nb("vc",null)});Tb.prototype.name=Tb.prototype.name;
Tb.prototype.getVersion=Tb.prototype.qb;Tb.prototype.getOldVersion=Tb.prototype.Pa;Tb.prototype.getOldSchema=Tb.prototype.Oa;Ub.prototype.getError=Ub.prototype.c;I.prototype.abort=I.prototype.abort;I.prototype.canAbort=I.prototype.Ma;vb.prototype.progress=vb.prototype.ka;vb.prototype.promise=vb.prototype.va;function bd(a,b,c,d){Pb.call(this);this.a=c;this.p=void 0;this.g=!1;this.O=null;this.d=a;this.r=this.h=!1;this.G=d||4;this.Q=this.f=this.b=void 0;this.i=function(){throw new ob;};this.j=function(){throw new ob;};this.ka=function(){}}C(bd,Pb);l=bd.prototype;
l.xa=function(a,b,c,d,e){if(r(b)){a=this.a;if(v(b))a:{for(var f=0;f<a.a.length;f++)if(!lc(a.a[f].keyPath,b)){b=a.a[f];break a}b=null}else b=rc(a,b);this.p=b.getName()}this.g=x(this.p);this.O=c||null;this.r=this.h=!1;this.v="prev"==d||"prevunique"==d;this.U="nextunique"==d||"prevunique"==d;this.Ia=d;this.ua=e;this.Q=this.f=this.b=void 0};l.Ia="";l.O=null;l.U=!1;l.v=!1;l.ua=!0;l.P=function(a,b,c){null==a&&(this.h=!0);this.b=a;this.f=b;this.Q=c;this.h?(this.i(),cd(this)):this.i(this.b)};
function cd(a){null!=a.f?a.f=$b(a.f):a.f=void 0;null!=a.b?a.b=$b(a.b):a.b=void 0;a.ka(a.r,a.b,a.f)}l.open=function(a,b,c,d){this.d=a;this.h=this.r=!1;this.b=c;this.f=d;dd(this,this.P,this.b,!1,0,this.f)};function ed(a){a.r=!0;cd(a)}l.ob=function(){return this.b};l.u=function(){return this.g?this.f:this.b};l.T=function(){return this.ua?this.u():this.Q};l.ra=function(){};l.Y=function(){};function fd(a,b,c){a.h=!1;a.r=!1;dd(a,a.P,c,!1,0,b)};function gd(){};function V(a,b,c,d,e,f,g){this.c=a;this.d=b;this.g=g;this.h=!!this.d;this.a=r(f)?f:!!x(this.d);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.f=a;this.b=bc(c);this.e=hd;this.m=NaN}C(V,gd);V.prototype.a=!0;function id(a,b,c){if(3<arguments.length)throw new E("too many argument");V.call(this,a,void 0,b,c,void 0,!0)}C(id,V);function jd(a,b,c,d,e){if(!x(b))throw new E("index name must be string");V.call(this,a,b,c,d,e,!0)}C(jd,V);
function kd(a,b,c){if(3<arguments.length)throw new E("too many argument");V.call(this,a,void 0,b,c,void 0,!1)}C(kd,V);function ld(a,b,c,d,e){if(!x(b))throw new E("index name must be string");V.call(this,a,b,c,d,e,!1)}C(ld,V);var hd="init";l=V.prototype;l.cb=function(){return this.c};l.Za=function(){return this.d};l.ab=function(){return this.b?this.b instanceof cc?this.b:cc.bound(this.b.lower,this.b.upper,this.b.lowerOpen,this.b.upperOpen):null};l.eb=function(){return this.a};l.Ra=function(){return this.h};
l.clone=function(){var a=new V(this.c,this.d,this.b,this.Z(),this.la(),this.a,this.g);a.m=this.m;return a};l.gb=function(a,b){var c=new V(this.c,this.d,this.b,this.Z(),this.la(),this.a,this.g);c.i=a;c.j=b;c.e="rest";return c};l.hb=function(){return new V(this.c,this.d,this.b,!this.Z(),this.la(),this.a,this.g)};l.Z=function(){return"prev"===this.f||"prevunique"===this.f};l.la=function(){return"nextunique"===this.f||"prevunique"===this.f};l.Qa=function(){return this.e};
l.load=function(a){a=a[0];a.xa(this.c,this.g||this.d,this.b,this.f,this.a);this.e="busy";var b=this;a.ka=function(a,d,e){b.i=d;b.j=e;b.e=a?"rest":"done"};dd(a,a.P,this.i,!1,0,this.j);return a};l.$a=function(){return this.i};l.bb=function(){return this.j};l.fb=function(a,b,c){a=a||hd;"busy"!=this.e&&(this.i=b,this.j=c,this.e=a)};l.stores=function(){return[this.c]};function md(a,b,c,d){if("transaction"in a)this.g=a,this.e=this.f=null;else if("objectStore"in a)this.g=null,this.f=a.db,this.e=a;else throw new Nc("storage instance require.");this.h=b;this.i=c;this.j=d;this.b=[];this.a=0;this.c=!1}md.prototype.c=!1;
function nd(a,b){a.a++;b.onsuccess=function(b){if(b=b.target.result){if(z(a.j)){var d=b.value;a.j(b.primaryKey,null!=a.i?d[a.i]:d)}if(b&&0<a.b.length)b["continue"](a.b.shift());else a.a--,0==a.a&&a.F&&a.F()}};b.onerror=function(){a.a--;0==a.a&&a.F&&a.F()}}function od(a,b){0==a.b.length&&0==a.a?b():a.F=b}
function pd(a){if(!a.c){var b=function(){a.e=null},c=function(b){var c=a.b.shift();b=b.objectStore(a.h);nd(a,b.openCursor(c))};if(a.e)c(a.e);else if(a.f)a.d=a.f.transaction([a.h],F),a.d.oncomplete=function(){b()},a.d.onerror=function(){b()},a.d.onabort=function(){b()};else if(a.g)a.c=!0,a.g.transaction(function(b){a.c=!1;c(b)},[a.h],F,b);else throw new Pc("");}};function qd(a,b,c){a&&a instanceof U?this.ca=a:a&&a.db&&(this.ca=null,rd(this,a));if(!x(b))throw new E("a store name required.");this.c=b;if(r(c)&&!x(c))throw new E("projection index name must be a string.");this.ma=c;this.L=null;this.b=[];this.a=[];this.$=!1}l=qd.prototype;l.ca=null;l.wa=null;l.L=null;l.Wa=function(a){this.wa=a};function rd(a,b){if(b.db)a.L=new md(b,a.c,a.ma,ga(a.F,a));else throw new E("Invalid IndexedDB Transaction.");}
function sd(a){var b=0<a.a.length;if(b&&!a.$&&z(a.wa)){var c=function(){sd(a)},d=a.b.shift(),e=a.a.shift(),b=0<a.a.length,c=a.wa(d,e,b?c:null);b&&!c&&sd(a)}}l.$=!1;l.D=function(a){if(this.L){this.$=!0;var b=this;od(this.L,function(){a(b.b,b.a);b.b=[];b.a=[];b.$=!1})}else a(this.b,this.a),this.b=[],this.a=[]};l.F=function(a,b){this.b.push(a);this.a.push(b);sd(this)};
l.push=function(a,b){if(this.$)throw new Sc("");if(2<=arguments.length)this.F(a,b);else{if(!this.L){if(!this.ca)throw new Sc("Database connection is not setup.");var c=this.ca.na();if(c)if("indexeddb"===c)this.L=new md(this.ca,this.c,this.ma,ga(this.F,this));else throw new Oc(c);else throw new Sc("Database is not connected.");}c=this.L;c.b.push(a);pd(c)}};function td(a,b){this.a=a||null;this.g=b;this.e=0;this.b=!1;this.d=a instanceof qd&&!!a.ma}td.prototype.f=function(a,b){var c;this.b=b[0].Z();this.a instanceof qd&&rd(this.a,a);if(this.d&&(c=b[0].g)&&1<c.length&&c[c.length-1]!=this.a.ma)throw new Sc("Output streamer projection field must be same as postfix field in the iterator");for(c=0;c<b.length;c++);return!1};
function ud(a,b,c){var d,e=null!=d;if(!r(d)){d=c[0];for(var e=null!=d,f=1;e&&f<c.length;f++)null!=c[f]&&0==M(c[f],d)||(e=!1)}return e&&(a.e++,a.a&&(a.d?a.a.push(d,void 0):a.a.push(d)),r(a.g)&&a.e>=a.g)?[]:b}td.prototype.c=function(){return[]};function vd(a){Error.captureStackTrace?Error.captureStackTrace(this,vd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}C(vd,Error);vd.prototype.name="ConstraintError";function Lb(a){Error.captureStackTrace?Error.captureStackTrace(this,Lb):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}C(Lb,Error);
function wd(a){Error.captureStackTrace?Error.captureStackTrace(this,wd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}C(wd,Error);function xd(a){Error.captureStackTrace?Error.captureStackTrace(this,xd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}C(xd,Error);xd.prototype.name="NotFoundError";
function yd(a,b){Error.captureStackTrace?Error.captureStackTrace(this,yd):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}C(yd,Error);function zd(a,b){Error.captureStackTrace?Error.captureStackTrace(this,zd):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}C(zd,Error);
function Ad(a){Error.captureStackTrace?Error.captureStackTrace(this,Ad):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}C(Ad,Error);function Bd(a,b){this.a=b};function Cd(a){this.d=a;this.a=null;this.b=0}Cd.prototype.s=null;function Dd(a){return!!a.a&&!a.c}Cd.prototype.q=null;function Ed(a,b,c,d,e,f){this.h=a;this.w=b;this.a=this.d=0;this.r=d;this.p=e;this.f=c||Fd;this.i=f||0}Ed.prototype.type=function(){return this.h.na()};Ed.prototype.B=function(){return"B"+this.w+"T"+this.d};var Fd="single";function Gd(a){if(a)if(z(a.abort))a.abort();else if(z(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new lb;else throw new Lb("No active transaction");};function Hd(a,b,c,d,e,f){Ed.call(this,a,b,c,d,e,f);this.c=[];this.e=[];this.g=null;this.b=new Cd(b);this.j=f||0;this.m=!1}C(Hd,Ed);
function Id(a,b,c){if("multi"==a.f)a:if(a=a.b,!a.s||!a.mode||c!=a.mode&&(a.mode!=H||c!=F)||b.length>a.s.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.s.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.f)a:if(a=a.b,a.s&&a.mode&&c==a.mode&&a.s.length==b.length){for(c=0;c<b.length;c++)if(-1==a.s.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.f?!0:!1;return b}function Jd(a){var b=0<a.c.length?a.c[0].s:null,c=0<a.c.length?a.c[0].mode:null;return null!=b&&null!=c?Id(a,b,c):!1}l=Hd.prototype;
l.abort=function(){Gd(this.g)};
l.K=function(a,b,c,d){var e=x(b)?[b]:b,f=r(c)?c:F,g=this;if(this.b.a||!$c(this.h)&&this.m)this.c.push({fa:a,s:b,mode:f,q:d});else{d&&this.e.push(d);if(this.j&&this.d>=this.j)throw new nb("Exceed maximum number of transactions of "+this.j);this.m=!0;this.h.transaction(function(c){var d=g.b;d.a=c;d.c=!1;d.s=b;d.mode=f;d.b++;d.q=null;P(b);a(g);for(a=null;Jd(g);)c=g.c.shift(),c.q&&g.e.push(c.q),c.fa()},e,f,function(a,b){var c=g.b;c.a&&(c.a=null,c.s=null,c.mode=null,z(c.q)&&c.q(a,b),c.q=null);for(c=0;c<
g.e.length;c++)(0,g.e[c])(a,b);g.e.length=0;(c=g.c.shift())&&g.K(c.fa,c.s,c.mode,c.q);g.a=0})}};l.B=function(){var a=this.b;return"B"+a.d+"T"+a.b};l.request=function(a,b,c,d){function e(a,b){f.a=null;d&&d(a,b)}var f=new I(a);a=c||F;var g=this;Dd(this.b)&&Id(this,b,a)?(b=this.b.a,this.a++,Jb(f,b,this.B()+"R"+this.a),this.e.push(e)):g.K(function(){var a=g.b.a;g.a++;Jb(f,a,g.B()+"R"+g.a)},b,a,e);return f};
l.A=function(a,b,c,d,e){d=d||F;var f=this,g;if(Dd(f.b)&&Id(this,c,d)){var h=f.b.a;f.a++;g=f.B()+"R"+f.a;b(h,g,function(b,c){f.g=h;c?a.k(b):a.callback(b);f.g=null});b=null}else f.K(function(){var c=f.b.a;f.a++;g=f.B()+"R"+f.a;b(c,g,function(b,d){f.g=c;d?a.k(b):a.callback(b);f.g=null});b=null},c,d,e)};l.getName=function(){return this.h.getName()};function Kd(a,b){Hd.call(this,a,b)}C(Kd,Hd);Kd.prototype.request=function(a,b,c){var d,e,f,g=Kd.o.request.call(this,a,b,c,function(a,b){g.a=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Ad;J(g,c,!0)}});Mb(g,function(a,b,c){f=b;e=a;d=c});return g};
Kd.prototype.A=function(a,b,c,d,e){var f,g,h=new D;gb(h,function(a){g=!1;f=a},function(a){g=!0;f=a});Kd.o.A.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.k(c);else if(!0===g)a.k(f);else if(!1===g)a.callback(f);else{var d=new Ad;a.k(d)}e&&(e(b,c),e=void 0)})};function Ld(a,b,c){this.c=a;this.b=b;this.a=c;this.d=null}Ld.prototype.e=function(){return this.a.d};Ld.prototype.abort=function(){this.a.abort()};function W(a){if(!a.d){var b;b=a.c;var c=b.na();if("websql"==c||"sqlite"==c)b=new Md(0,b.b);else throw new ob("No executor for "+c);a.d=b}return a.d};function X(a,b,c){Ld.call(this,a,b,c)}C(X,Ld);l=X.prototype;
l.V=function(a,b,c,d){var e,f,g,h;if(null!=a)if(v(a)){if(r(c)||r(b))throw new E("too many arguments.");f=a;for(var k=0;k<f.length;k++)if(!Kc(this.b,f[k]))throw new E('store name "'+f[k]+'" at '+k+" not found.");ub("countStores: "+P(f));e=this.a.request("d",f);K(e,function(){Nd(W(this),e,f)},this)}else if(x(a)){k=R(this.b,a);if(!k)throw new E('store name "'+a+'" not found.');f=[a];if(x(b))g=b,B(c)?h=bc(c):h=null;else if(B(b)||null==b)if(B(b))h=bc(b);else{if(null!=b)throw new E("key range must be  an object but found "+
Dc(b)+" of type "+typeof b);h=null}else throw new E('invalid second argument for count "'+Dc(c)+'" of type '+typeof b);ub("countKeyRange: "+a+" "+(g?g:"")+P(h));e=this.a.request("d",f);Q(k,e,arguments);K(e,function(){Od(W(this),e,f[0],h,g,!!d)},this)}else throw new E("Invalid store name or store names.");else k=Ic(this.b),e=this.a.request("d",k),Mb(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),K(e,function(){Nd(W(this),e,f)},this);return e};
l.I=function(a,b){var c=this,d;if(a instanceof Yb){var e=a,f=e.b,g=R(this.b,f);if(!g){if(this.b.a()){if($c(this.c))return Nb("e",void 0);d=new I("e");this.c.ja(function(){gb(c.I(a,b),function(a){d.callback(a)},function(a){d.k(a)})});return d}throw new E("Store: "+f+" not found.");}var h=e.a;d=this.a.request("ek",[f]);Q(g,d,arguments,void 0,this);K(d,function(){Pd(W(this),d,f,h)},this)}else if(x(a)&&r(b)){var k=a,g=R(this.b,k);if(!g){if(this.b.a()){if($c(this.c))return Nb("e",void 0);d=new I("e");
this.c.ja(function(){gb(c.I(a,b),function(a){d.callback(a)},function(a){d.k(a)})});return d}throw new E('Store name "'+k+'" not found.');}var m=b;d=this.a.request("e",[k]);Q(g,d,arguments,void 0,this);K(d,function(){Pd(W(this),d,k,m)},this)}else throw new E("get require valid input arguments.");return d};
l.Ta=function(a,b,c,d,e){var f=R(this.b,a),g,h,k,m=null;B(b)&&(m=bc(b));if(r(c))if(y(c))g=c;else throw new E("limit must be a number, but "+c+" is "+typeof c);else g=100;if(r(d))if(y(d))h=d;else throw new E("offset must be a number, but "+d+" is "+typeof d);else h=0;if(r(e))if(ba(e))k=e;else throw new E("reverse must be a boolean, but "+e+" is "+typeof e);var n=this.a.request("g",[a]);Q(f,n,arguments);K(n,function(){Qd(W(this),n,2,a,null,m,g,h,k,!1)},this);return n};
l.Sa=function(a,b,c,d,e,f,g){var h,k,m,n,p,t=R(this.b,a);h=bc(c);if(y(d))k=d;else{if(r(d))throw new E("limit must be a number");k=100}if(y(e))m=e;else{if(r(e))throw new E("offset must be a number");m=0}if(r(f))if(ba(f))n=f;else throw new E("reverse must be a boolean");if(r(g))if(ba(g))p=g;else throw new E("unique must be a boolean");var u=this.a.request("i",[a]);Q(t,u,arguments);K(u,function(){Qd(W(this),u,2,a,b,h,k,m,n,p)},this);return u};
l.W=function(a,b,c,d,e,f,g){var h=R(this.b,a);return this.b.a()&&!h?Nb("g",[]):x(b)?this.Sa(a,b,c,d,e,f,g):this.Ta(a,b,c,d,e)};
l.t=function(a,b,c,d,e,f,g){var h=this,k;if(x(a)){var m=a,n=R(this.b,m);if(!n){if(this.b.a()){if($c(this.c))return Nb("s",[]);k=new I("s");this.c.ja(function(){gb(h.t(a,b,c,d,e,f),function(a){k.callback(a)},function(a){k.k(a)})});return k}throw new xd(m);}if(v(b)){var p=b;k=this.a.request("v",[m]);Q(n,k,arguments,void 0,this);K(k,function(){Rd(W(this),k,m,p)},this)}else k=x(b)?this.Xa(m,b,c,d,e,f,g):this.Ya(m,b,c,d,e)}else if(v(a))if(a[0]instanceof Yb){for(var n=[],t=a,u=0;u<t.length;u++){var A=t[u].b;
if(!Kc(this.b,A)){if(this.b.a())return n=[],n[t.length-1]=void 0,Nb("e",n);throw new E("Store: "+A+" not found.");}0<=ua(n,A)||n.push(A)}ub("listByKeys: "+P(n)+" "+t.length+" keys");k=this.a.request("w",n);K(k,function(){Sd(W(this),k,t)},this)}else throw new E("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new E("first argument "+a+" is invalid.");return k};
l.Ya=function(a,b,c,d,e){var f=R(this.b,a),g,h,k,m=null;B(b)&&(m=bc(b));if(r(c))if(y(c))g=c;else throw new E("limit must be a number, but "+c+" is "+typeof c);else g=100;if(r(d))if(y(d))h=d;else throw new E("offset must be a number, but "+d+" is "+typeof d);else h=0;if(r(e))if(ba(e))k=e;else throw new E("reverse must be a boolean, but "+e+" is "+typeof e);var n=this.a.request("s",[a]);Q(f,n,arguments);K(n,function(){Qd(W(this),n,4,a,null,m,g,h,k,!1)},this);return n};
l.Xa=function(a,b,c,d,e,f,g){var h=R(this.b,a),k,m,n,p,t=bc(c);if(r(d))if(y(d))k=d;else throw new E("limit must be a number.");else k=100;if(r(e))if(y(e))m=e;else throw new E("offset must be a number.");else m=0;if(ba(f))n=f;else if(r(f))throw new E("reverse must be a boolean, but "+f);if(r(g))if(ba(g))p=g;else throw new E("unique must be a boolean");var u=this.a.request("u",[a]);Q(h,u,arguments);K(u,function(){Qd(W(this),u,4,a,b,t,k,m,n,p)},this);return u};
l.pa=function(a,b,c){var d=x(a)?a:B(a)?a.name:void 0;if(!x(d))throw new E("store name "+d+" must be a string, but "+typeof d);var e=R(this.b,d);if(!e){if(!this.b.a())throw new E('store name "'+d+'" not found.');e=oc(B(a)?a:{name:d});Vc(this.c,e)}else if(this.b.a()&&B(a)&&(a=oc(a),a=Ac(e,a)))throw new lb(a);var f;if(!e)throw new E('store name "'+d+'" not found.');if(x(e.keyPath)&&r(c))throw new E("key must not be provided while the store uses in-line key.");if(!e.keyPath&&!e.c&&!r(c))throw new E("out-of-line key must be provided.");
if(v(b)){for(a=0;a<b.length;a++)Bc(e,b[a]);f=this.a.request("b",[d],H);K(f,function(){Td(W(this),f,!1,!1,d,b,c)},this);e.J&&f.C(function(){},this)}else if(B(b))xc(e,b,c),Bc(e,b),f=this.a.request("a",[d],H),K(f,function(){Td(W(this),f,!1,!0,d,[b],[c])},this),e.J&&f.C(function(){},this);else throw new E("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};
function Ud(a,b){var c=x(b)?b:B(b)?b.name:void 0;if(!x(c))throw new E("store name must be a string");var d=R(a.b,c);if(!d){if(!a.b.a())throw new xd(c);d=oc(B(b)?b:{name:c});Vc(a.c,d)}else if(a.b.a()&&B(b)){var e=oc(b);if(e=Ac(d,e))throw new lb(e);}if(!d)throw new xd(c);return d}l.load=function(a){a=Ud(this,a).getName();var b=this.a.request("i3",[a]),c=this;this.a.A(b,function(){W(c);throw new mb("putData");},[a],H);return b};
l.X=function(a,b,c){var d,e=this;if(a instanceof Yb){var f=a,g=f.b,h=R(this.b,g);if(!h)throw new E('store "'+g+'" not found.');if(h.keyPath){var k=xc(h,b);if(null!=k){if(0!=M(k,f.a))throw new E("Inline key must be "+f+" but "+k+" found.");}else yc(h,b,f.a);return this.X(g,b)}return this.X(g,b,f.a)}if(v(a)){for(var m=a,n=b,f=[],g=0,h=m.length;g<h;g++){k=m[g].b;-1==ua(f,k)&&f.push(k);var p=R(this.b,k);if(!p)throw new E('store "'+k+'" not found.');p.keyPath&&yc(p,n[g],m[g].a)}ub("putByKeys: to "+P(f)+
" "+n.length+" objects");for(g=0;g<n.length;g++)Bc(p,n[g]);d=this.a.request("l",f,H);Q(p,d,arguments);K(d,function(){Vd(W(e),d,n,m)},this)}else if(x(a)||B(a)){var p=Ud(this,a),t=p.getName();if(p.keyPath&&r(c))throw new E("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.c&&!r(c))throw new E("out-of-line key must be provided.");if(v(b)){for(var u=b,A=c,g=0;g<u.length;g++)Bc(p,u[g]);d=this.a.request("k",[t],H);Q(p,d,arguments);K(d,function(){Td(W(this),d,!0,!1,t,u,A)},
this);p.J&&d.C(function(){},this)}else if(B(b)){var G=b,L=c;if(r(q.Blob)&&G instanceof Blob&&p.M&&!p.keyPath&&0==p.a.length&&sb)d=new I("j"),f=new FileReader,f.onload=function(a){var b=a.target.result,c=e.a.request("j",[t],H);Q(p,c,[t,G,L]);K(c,function(){Td(W(e),c,!0,!0,t,[b],[L])},this);gb(c,function(a){d.callback(a)},function(a){d.k(a)})},f.onerror=function(a){d.k(a)},f.onabort=function(a){d.k(a)},f.readAsDataURL(G);else{Bc(p,G);d=this.a.request("j",[t],H);var ka=[t,G,L];Q(p,d,ka);K(d,function(){var a=
r(L)?[ka[2]]:void 0;Td(W(e),d,!0,!0,t,[ka[1]],a)},this)}p.J&&d.C(function(){},this)}else throw new E("put record value must be Object or array of Objects");}else throw new E("the first argument of put must be store name, store schema or array of keys.");return d};
l.clear=function(a,b){var c;if(x(a)){var d=R(this.b,a);if(!d)throw new E('store name "'+a+'" not found.');if(B(b)){var e=bc(b);if(null===e)throw new E("clear method requires a valid non-null KeyRange object.");ub("clearByKeyRange: "+a+":"+P(e));c=this.a.request("c",[a],H);Q(d,c,[a,e]);K(c,function(){var b=W(this);Wd(b,c,a,void 0,e)},this)}else{if(r(b))throw new E("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+typeof b);c=this.a.request("c",[a],H);K(c,
function(){Xd(W(this),c,[a])},this)}}else if(!r(a)||v(a)&&x(a[0])){var f=a||Ic(this.b);ub("clearByStores: "+P(f));c=this.a.request("c",f,H);K(c,function(){Xd(W(this),c,f)},this)}else throw new E('first argument "'+a+'" is invalid.');return c};
l.qa=function(a,b,c){var d;if(x(a)){var e=R(this.b,a);if(!e)throw new E('store name "'+a+'" not found.');if(r(c))if(x(b)){var f=rc(e,b);if(!f)throw new E("index: "+b+" not found in "+a);if(B(c)||null===c){var g=bc(c);d=this.a.request("p",[a],H);K(d,function(){var b=W(this);Wd(b,d,a,f.getName(),g)},this)}else throw new E("key range "+c+' is invalid type "'+typeof c+'".');}else throw new E('index name "'+b+'" must be a string, but '+typeof b+" found.");else if(x(b)||y(b)||w(b)||b instanceof Date){d=
this.a.request("m",[a],H);var h=[a,b];Q(e,d,h);K(d,function(){Yd(W(this),d,a,h[1])},this);e.J&&d.C(function(){},this)}else if(B(b))g=bc(b),ub("removeByKeyRange: "+a+":"+P(g)),d=this.a.request("n",[a],H),Q(e,d,[a,g]),K(d,function(){var b=W(this);Wd(b,d,a,void 0,g)},this),e.J&&d.C(function(){},this);else throw new E('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof Yb){var k=a.b,e=R(this.b,k);d=this.a.request("m",[k],H);var m=[k,a.a];Q(e,d,m);K(d,function(){Yd(W(this),d,k,
m[1])},this)}else if(v(a)){b=[];c=0;for(e=a.length;c<e;c++){var n=a[c].b;-1==ua(b,n)&&b.push(n)}if(1>b.length)throw new E('at least one valid key required in key list "'+Dc(a)+'"');d=this.a.request("o",b,H);K(d,function(){Zd(W(this),d,a)},this)}else throw new E('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+Dc(a)+'" ('+aa(a)+") found.");return d};function $d(a,b,c){Ld.call(this,a,b,c)}C($d,X);l=$d.prototype;l.I=function(a,b){if(a instanceof V){var c=a.c,d=R(this.b,c);if(!d)throw new E('store "'+c+'" not found.');var e=a.d;if(r(e)&&!uc(d,e))throw new E('index "'+e+'" not found in store "'+c+'".');var f=this.a.request("f",[c]);K(f,function(){ae(this,5,f,a,1)},this);return f}return $d.o.I.call(this,a,b)};
l.W=function(a,b,c,d,e,f,g){if(a instanceof V){var h=100;if(y(b)){if(h=b,1>h)throw new E("limit must be a positive value, but "+b);}else if(r(b))throw new E("limit must be a number,  but "+b);if(r(c))throw new E("offset must not be specified");var k=this.a.request("h",[a.c]);K(k,function(){a.h?ae(this,1,k,a,h):ae(this,2,k,a,h)},this);return k}return $d.o.W.call(this,a,b,c,d,e,f,g)};
l.V=function(a,b,c,d){if(a instanceof V){if(r(b)||r(c))throw new E("too many arguments.");var e=this.a.request("d",[a.c]);K(e,function(){ae(this,6,e,a)},this);return e}return $d.o.V.call(this,a,b,c,d)};
l.t=function(a,b,c,d,e,f){if(a instanceof V){var g;if(y(b)){if(g=b,1>g)throw new E("limit must be a positive value, but "+g);}else if(r(b))throw new E("limit must be a number, but "+b);if(r(c))throw new E("offset must not be specified");var h=this.a.request("t",[a.c]);K(h,function(){a.a?ae(this,2,h,a,g):ae(this,4,h,a,g)},this);return h}return $d.o.t.call(this,a,b,c,d,e,f)};
l.Ha=function(a,b,c){var d;c=c||F;var e=[];for(d=0;d<b.length;d++)for(var f=b[d].stores(),g=0;g<f.length;g++)0<=ua(e,f[g])||e.push(f[g]);var h=this;d=this.a.request("qa",e);this.a.A(d,function(c,d,e){function f(){for(var a=0,d=0;d<b.length;d++){var e=b[d],m=[be(W(h),c,e.c)],e=e.load(m);e.j=g;e.i=ha(u,a);Z[d]=e;L[a]=d;a++}G=b.length}function g(a){for(var b=0;b<Z.length;b++)ed(Z[b]);za(Z);e(a,!0)}function u(c,d){if(A)throw new Pc;S++;var f=S===G,g=L[c],h=b[g],k=Z[g],g=k.u(),k=k.T();ka[c]=d;ma[c]=h.h?
h.a?g:k:h.a?d:k;if(f){var m;a instanceof td?m=a.c(ka,ma):m=a(ka,ma);f=[];h=[];g=[];k=[];if(v(m))for(var p=0;p<m.length;p++)!0===m[p]?g[p]=1:!1===m[p]?k[p]=!0:h[p]=m[p];else if(null===m)f=[];else if(r(m))if(B(m))f=m.continuePrimary||[],h=m["continue"]||[],g=m.advance||[],k=m.restart||[];else throw new nb("scan callback output");else for(f=[],p=0;p<b.length;p++)r(L[p])&&(g[p]=1);for(p=S=m=0;p<b.length;p++)null!=f[p]||r(h[p])||null!=k[p]||null!=g[p]||S++;for(p=0;p<b.length;p++)if(null!=f[p]||r(h[p])||
null!=k[p]||null!=g[p]){var t=L[p];if(!r(t))throw new Rc(p+" is not an iterator.");var t=b[t],u=Z[p];ka[p]=void 0;ma[p]=void 0;if(null!=k[p])fd(u);else if(r(h[p]))u.Y(h[p]);else if(null!=f[p])u.ra(f[p]);else if(null!=g[p])ce(u);else throw new Pc(t+": has no action");m++}if(0==m){for(m=0;m<Z.length;m++)ed(Z[m]);A=!0;za(Z);e(void 0)}}}var A=!1,G,L=[],ka=[],ma=[],Z=[],S=0;a instanceof td?a.f(c,b,function(){f()})||f():f()},e,c);return d};
l.open=function(a,b,c,d){c=c||F;var e=this,f=this.a.request("i5",b.stores(),c);K(f,function(c){for(var h=b.stores(),k=[],m=0;m<h.length;m++)k[m]=be(W(e),c,h[m]);var n=b.load(k);n.j=function(a){J(f,a,!0)};n.i=function(b){null!=b?(b=a.call(d,n),!0===b?fd(n):B(b)?!0===b.restart?fd(n,b["continue"],b.continuePrimary):null!=b["continue"]?n.Y(b["continue"]):null!=b.continuePrimary?n.ra(b.continuePrimary):(ed(n),J(f,void 0)):null===b?(ed(n),J(f,void 0)):null!=b?n.Y(b):ce(n)):(ed(n),J(f,void 0))}},this);return f};
l.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new E('Store "'+e+'" not found.');e=this.a.request("i4",d);this.a.A(e,function(d,e,f){e=a.stores();for(var m=[],n=0;n<e.length;n++)m[n]=be(W(c),d,e[n]);var p=a.load(m);p.j=function(a){f(a,!1)};p.i=function(c){if(null!=c){var d;a.h?a.a?d=c:d=p.u():a.a?d=c:d=p.T();b(d);ce(p)}else f(void 0),b=null}},d,F);return e};
l.oa=function(a,b,c){for(var d=this,e=a.stores(),f,g=0;f=e[g];g++)if(!f)throw new E('Store "'+f+'" not found.');f=this.a.request("m0",e);var h=B(c)?Cc(P(c)):c;this.a.A(f,function(c,e,f){e=a.stores();for(var g=[],t=0;t<e.length;t++)g[t]=be(W(d),c,e[t]);var u=a.load(g);u.j=function(a){f(a,!0)};var A=0;u.i=function(c){if(null!=c){var d;a.h?a.a?d=c:d=u.u():a.a?d=c:d=u.T();h=b(h,d,A++);ce(u)}else f(h)}},e,F);return f};
function ae(a,b,c,d,e){var f=[],g=c.a;a=W(a);for(var h=[],k=d.stores(),m=0;m<k.length;m++)h[m]=be(a,g,k[m]);var n=d.load(h);n.j=function(a){ed(n);J(c,a,!0)};var p=0,t=!1;n.i=function(a){t||(t=!0);null!=a?(n.u(),p++,1==b?f.push(a):2==b?f.push(n.u()):3==b?f.push([a,n.u()]):6!=b&&f.push(n.T()),5==b?(ed(n),J(c,f[0])):6==b||!r(e)||p<e?n.Y():(ed(n),J(c,f))):(ed(n),J(c,5==b?f[0]:6==b?p:f))}};function de(a,b,c,d){this.d=a;this.a=Aa(c);this.b=d;this.c=[]}de.prototype.d=null;function ee(a,b,c){if(a.d)c&&a.c.push(c),b(a.d);else throw new ob("tx committed on ParallelTxExecutor");};function fe(a,b,c,d,e,f){Ed.call(this,a,b,c,d,e,f);this.c=this.b=null}C(fe,Ed);l=fe.prototype;l.abort=function(){Gd(this.c)};
l.Ka=function(a,b){var c;if("multi"==this.f)a:if(c=this.b,!c.a||!c.b||b!=c.b&&(c.b!=H||b!=F)||a.length>c.a.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.f)a:if(c=this.b,c.a&&c.b&&b==c.b&&c.a.length==a.length){for(d=0;d<a.length;d++)if(-1==c.a.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.f?!0:!1;return c};
l.K=function(a,b,c,d){function e(c){h.d++;k=new de(c,0,b,g);P(b);h.b=k;ee(h.b,a,d)}function f(a,b){if(k){for(var c=k,d=0;d<c.c.length;d++)c.c[d](a,b);c.c.length=0;c.d=null;c.a=null;c.c=null}h.a=0}this.r&&(b=this.r);this.p&&(c=this.p);var g=r(c)?c:F,h=this,k;if(this.b&&this.b.d&&this.Ka(b,g))ee(this.b,a,d);else{if(this.i&&this.d>=this.i)throw new nb("Exceed maximum number of transactions of "+this.i);this.h.transaction(e,b,g,f)}};
l.request=function(a,b,c,d){var e=new I(a),f=this;this.K(function(a){f.a++;Jb(e,a,f.B()+"R"+f.a)},b,c||F,function(a,b){e.a=null;d&&d(a,b)});return e};l.A=function(a,b,c,d,e){var f=this,g;this.K(function(c){f.a++;g=f.B()+"R"+f.a;b(c,g,function(b,d){f.c=c;g=f.B()+"R"+f.a;d?a.k(b):a.callback(b);f.c=null});b=null},c,d,e)};function ge(a,b){fe.call(this,a,b,Fd)}C(ge,fe);ge.prototype.Ka=function(){return!1};ge.prototype.request=function(a,b,c){var d,e,f,g=ge.o.request.call(this,a,b,c,function(a,b){g.a=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new Ad;J(g,c,!0)}});Mb(g,function(a,b,c){f=b;e=a;d=c});return g};
ge.prototype.A=function(a,b,c,d,e){var f,g,h=new D;gb(h,function(a){g=!1;f=a},function(a){g=!0;f=a});ge.o.A.call(this,h,b,c,d,function(b,c){if("complete"!=b)a.k(c);else if(!0===g)a.k(f);else if(!1===g)a.callback(f);else{var d=new Ad;a.k(d)}e&&(e(b,c),e=void 0)})};function he(a,b,c){U.call(this,a,b,c);this.R=0;a=!0;b=Fd;c&&(r(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=ie(this,b,a);this.g=ie(this,"atomic",!1);this.c=this.aa(c,this.g)}C(he,U);l=he.prototype;l.R=0;l.La=function(a,b,c,d,e,f){a=a||Fd;var g;"readonly"==d?g=F:"readwrite"==d&&(g=H);a=ie(this,a,b,c,g,e);return this.aa(a,f?null:this.g)};l.aa=function(a){return new Ld(this,this.b,a)};
function ie(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==Fd)return new Hd(a,a.R++,b,d,e,f);if("atomic"==b)return new Kd(a,a.R++);throw new E('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==Fd)return new fe(a,a.R++,b,d,e,f);if("atomic"==b)return new ge(a,a.R++);throw new E('Invalid requestType "'+b+'"');}
l.Ua=function(a,b,c){this.R++;b=b||Ic(this.b);var d=F;if(c)if("readwrite"==c)d=H;else if("readonly"!=c)throw new E('Invalid transaction mode "'+c+'"');var e=ie(this,"all",!1,b,d,1),f=this.aa(e,this.g),g=new I("q");e.K(function(b){Jb(g,b,e.B()+"R0");a(f)},b,d,function(a){g.a=null;J(g,e.d,"complete"!==a)});return g};l.rb=function(){return this.c?this.c.a.d:NaN};function Y(a,b,c){he.call(this,a,b,c);a=this.b;for(b=0;b<a.d.length;b++){c=a.d[b];var d=R(a,c.getName());if(d){if(!uc(d,"k"))throw new E('full text index store "'+d.getName()+'" must have "keyword" index');if(!uc(d,"v"))throw new E('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new E('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new E('full text index store "'+c.getName()+'" required.');for(d=0;d<c.a.length;d++){var e=
c.index(d);if(!R(a,e.a))throw new E('full text source store "'+e.a+'" does not exist for full text index "'+c.getName()+'"');}}}C(Y,he);l=Y.prototype;l.aa=function(a){return new X(this,this.b,a)};l.pa=function(a,b,c){return this.c.pa(a,b,c)};l.V=function(a,b,c,d){return this.c.V(a,b,c,d)};l.I=function(a,b){return this.c.I(a,b)};l.W=function(a,b,c,d,e,f,g){return this.c.W(a,b,c,d,e,f,g)};l.t=function(a,b,c,d,e,f){return this.c.t(a,b,c,d,e,f)};l.load=function(a,b,c){return this.c.load(a,b,c)};
l.X=function(a,b,c){return this.c.X(a,b,c)};l.clear=function(a,b,c){return this.c.clear(a,b,c)};l.qa=function(a,b,c){return this.c.qa(a,b,c)};function je(a,b,c){Y.call(this,a,b,c)}C(je,Y);l=je.prototype;l.aa=function(a){return new $d(this,this.b,a)};l.open=function(a,b,c,d){return this.c.open(a,b,c,d)};l.nb=function(a,b){return this.c.Ha(a,b)};l.map=function(a,b){return this.c.map(a,b)};l.oa=function(a,b,c){return this.c.oa(a,b,c)};function ke(a,b,c,d){bd.call(this,a,0,c,d);this.w=null;this.c=this.e=void 0}C(ke,bd);l=ke.prototype;l.u=function(){return this.c};l.xa=function(a,b,c,d,e){ke.o.xa.call(this,a,b,c,d,e);this.w=x(b)?rc(this.a,b):null};l.T=function(){return this.m};l.D=function(a){this.m=this.c=this.e=void 0;if(r(a))if(B(a)){var b=jc(a[this.a.e],this.a.type);this.c=b;if(this.g){var c=rc(this.a,this.p);this.e=jc(a[this.p],c.type)}else this.e=b;this.m=this.ua?b:le(a,this.a)}else this.m=a};
function me(a,b,c){rc(a.a,a.p);var d=[],e=a.p,f=a.O,g=a.e;if(null!=f){var h=f.lower,k=f.upper,m=f.lowerOpen,n=f.upperOpen;a.v?k=null!=k&&-1==M(k,g)?k:g:h=null!=h&&1==M(h,g)?h:g;null!=h&&null!=k?f=N.bound(h,k,!!m,!!n):f=null!=h?cc.lowerBound(h,!!m):cc.upperBound(k,!!n)}else f=a.v?cc.upperBound(g):cc.lowerBound(g);e=qc(a.a,d,a.G,e,f,a.v,a.U);c=a.v?cc.upperBound(c,!1):cc.lowerBound(c,!1);c=qc(a.a,d,a.G,a.a.e,c,a.v,a.U);e.l=e.l?e.l+(" AND "+c.l):c.l;c="SELECT "+e.select+" FROM "+e.N+(e.l?" WHERE "+e.l:
"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.H;c+=" LIMIT 1";tb(a+": continuePrimary:  SQL: "+c+" : "+P(d));a.d.executeSql(c,d,function(c,d){0<d.rows.length?a.D(d.rows.item(0)):a.D();b.call(a,a.e,a.c,a.m);b=null},function(c,d){a.j(d);cd(a);a.h=!0;a.D();b.call(a,a.c,a.e,a.m);b=null;return!1})}
function dd(a,b,c,d,e,f){var g=!d;d=[];a.g&&null!=f&&null!=c?c=tc(a.a,a.G,d,a.w.getName(),a.O,c,g,f,a.v,a.U):null!=c?c=sc(a.a,a.G,d,a.w?a.w.getName():null,a.O,a.v,a.U,c,g):(c=pc(a.a,d,a.G,a.g?a.w.f:a.a.e,a.O,a.v,a.U),a.g&&(c+=", "+a.a.b+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);tb(a+": continue:  SQL: "+c+" : "+P(d));a.d.executeSql(c,d,function(c,d){0<d.rows.length?a.D(d.rows.item(0)):a.D();b.call(a,a.e,a.c,a.m);b=null},function(c,d){a.j(d);cd(a);a.h=!0;a.D();b.call(a,a.c,a.e,a.m);b=null;return!1})}
l.pb=function(a){if(!this.d)throw new wd;var b=new D,c=this.u();a=zc(this.a,a,c);var d="REPLACE INTO "+O(this.a)+" ("+a.Ba.join(", ")+") VALUES ("+a.Ga.join(", ")+")";tb(this+': update "'+d+'" : '+P(a.t));this.d.executeSql(d,a.t,function(){b.callback(c)},function(a,c){b.k(c);return!1});return b};
function ce(a){var b=1,c=a.e,d=a.c,e=!0;null==a.e||a.g&&null==a.c||(--b,e=!1);dd(a,function(a,b,e){var k=null!=c&&null!=a&&0==M(c,a);if(this.g){var m=null!=b&&null!=d&&0==M(b,d);if(k&&m)throw new ob("current: "+c+";"+d+" next: "+a+";"+b);}else if(k)throw new ob("current: "+c+" next: "+a);this.P(a,b,e)},a.e,e,b,a.c)}l.Y=function(a){null!=a?dd(this,this.P,a,!0):ce(this)};
l.clear=function(){if(!this.d)throw new wd;var a=new D,b=this.a.e,b="DELETE FROM "+O(this.a)+" WHERE "+b+" = ?",c=[this.u()];tb(this+': clear "'+b+'" : '+P(c));this.d.executeSql(b,c,function(b,c){a.callback(c.rowsAffected)},function(b,c){a.k(c);return!1});return a};l.ra=function(a){var b=M(a,this.c);if(0==b||1==b&&this.v||-1==b&&!this.v)throw new Sc(this+" to continuePrimaryKey  from "+this.c+" to "+a+" on "+this.Ia+" direction is wrong");me(this,this.P,a)};function ne(a,b){this.a=b}C(ne,Bd);
function le(a,b){if(b.M&&!b.keyPath&&0==b.a.length&&a._default_){var c=a._default_;if(-1==c.indexOf(";base64,"))return Cc(c);'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substr(1,c.length-2));for(var d=c.split(";base64,"),c=d[0].split(":")[1],d=window.atob(d[1]),e=d.length,f=new Uint8Array(e),g=0;g<e;++g)f[g]=d.charCodeAt(g);return new Blob([f.buffer],{type:c})}c=a._default_?Cc(a._default_):{};null!=b.keyPath&&(d=jc(a[b.keyPath],b.type),null!=d&&yc(b,c,d));for(d=0;d<b.a.length;d++)if(e=b.index(d),
f=e.f,"_default_"!=f&&!e.h&&!e.a&&("DATE"==e.type||b.M)&&(g=jc(a[f],e.type),r(g)))for(var f=c,h=0;h<e.d.length;h++)h==e.d.length-1?f[e.d[h]]=g:B(f[e.d[h]])||(f[e.d[h]]={});return c}
function Td(a,b,c,d,e,f,g){function h(a,c){if(null==f[a])if(p++,p==f.length)J(b,n,t);else{var e=a+2;e<f.length&&h(e,c)}var L;L=r(g)?zc(k,f[a],g[a]):zc(k,f[a]);e=m+O(k)+" ("+L.Ba.join(", ")+") VALUES ("+L.Ga.join(", ")+");";c.executeSql(e,L.t,function(e,g){function G(a,b){var d=m+sa("ydn.db.me:"+k.getName()+":"+a.getName())+" ("+k.b+", "+a.e+") VALUES (?, ?)",e=[ec(S,k.type),ec(b,a.type)];c.executeSql(d,e,function(){},function(){return!1})}p++;var S=r(L.key)?L.key:g.insertId;1>g.rowsAffected&&(t=!0,
S=new vd(S+" no-op"));for(var T=0,Vb=k.a.length;T<Vb;T++){var ab=k.index(T);if(ab.a)for(var Ea=zb(f[a],ab.keyPath),Wb=(Ea?Ea.length:0)||0,Jc=0;Jc<Wb;Jc++)G(ab,Ea[Jc])}d?J(b,S):(n[a]=S,p==f.length?J(b,n,t):(T=a+2,T<f.length&&h(T,e)))},function(c,e){p++;t=!0;6==e.code&&(e.name="ConstraintError");if(d)J(b,e,!0);else if(n[a]=e,p==f.length)J(b,n,t);else{var g=a+2;g<f.length&&h(g,c)}return!1})}c=!c;var k=R(a.a,e),m=c?"INSERT INTO ":"INSERT OR REPLACE INTO ";a=b.a;var n=[],p=0,t=!1;if(0<f.length)for(e=0;2>
e&&e<f.length;e++)h(e,a);else J(b,[])}
function Vd(a,b,c,d){if(0==d.length)J(b,[]);else{for(var e=[],f=0,g=0,h=function(h,k){for(var m=[],n=wc(R(a.a,h)),p=n?void 0:[],t=0;t<k.length;t++)m.push(c[k[t]]),n||p.push(d[k[t]].a);n=Kb(b);gb(n,function(a){for(var c=0;c<k.length;c++)e[k[c]]=a[c];f++;f==g&&J(b,e)},function(){f++;f==g&&J(b,e,!0)});Td(a,n,!1,!1,h,m,p)},k="",m=[],n=[],p=0;p<d.length;p++){var t=d[p].b,u=d[p].a;t!=k?(g++,0<m.length&&h(k,m),m=[p],n=[u],k=t):(m.push(p),n.push(u))}0<m.length&&h(k,m)}}
function Pd(a,b,c,d){var e=b.a,f=R(a.a,c);a=f.b;d=[ec(d,f.type)];a="SELECT * FROM "+O(f)+" WHERE "+a+" = ?";e.executeSql(a,d,function(a,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=le(d,f),J(b,d)):J(b,void 0)}else J(b,void 0)},function(a,c){J(b,c,!0);return!1})}
function Rd(a,b,c,d){function e(a,c){var f=k.b,t=[ec(d[a],k.type)],f="SELECT * FROM "+O(k)+" WHERE "+f+" = ?";c.executeSql(f,t,function(c,f){h++;if(0<f.rows.length){var n=f.rows.item(0);null!=n&&(g[a]=le(n,k))}else g[a]=void 0;h==d.length?J(b,g):(n=a+10,n<d.length&&e(n,c))},function(c){h++;if(h==d.length)J(b,g);else{var f=a+10;f<d.length&&e(f,c)}return!1})}var f=b.a,g=[],h=0,k=R(a.a,c);if(0<d.length)for(a=0;10>a&&a<d.length;a++)e(a,f);else J(b,[])}
function Sd(a,b,c){function d(e,h){var n=c[e],p=R(a.a,n.b),t=Zb(n),n=p.b,t=[ec(t,p.type)],n="SELECT * FROM "+O(p)+" WHERE "+n+" = ?";h.executeSql(n,t,function(a,h){g++;if(0<h.rows.length){var m=h.rows.item(0);null!=m&&(f[e]=le(m,p))}else f[e]=void 0;g==c.length?J(b,f):(m=e+10,m<c.length&&d(m,a))},function(a,c){J(b,c,!0);return!1})}var e=b.a,f=[],g=0;if(0<c.length)for(var h=0;10>h&&h<c.length;h++)d(h,e);else J(b,[])}
function Xd(a,b,c){function d(e,g){function h(a){a="DELETE FROM  "+sa("ydn.db.me:"+k.getName()+":"+a.getName());g.executeSql(a,[])}var k=R(a.a,c[e]),m="DELETE FROM  "+O(k);g.executeSql(m,[],function(a){e==c.length-1?J(b,c.length):d(e+1,a)},function(a,c){J(b,c,!0);return!1});for(var m=0,n=k.a.length;m<n;m++){var p=k.index(m);p.a&&h(p)}}var e=b.a;0<c.length?d(0,e):J(b,0)}
function Zd(a,b,c){function d(h){if(h>=c.length)J(b,f,g);else{var k=R(a.a,c[h].b),m=ec(c[h].a,k.type),n=" WHERE "+k.b+" = ?",p="DELETE FROM "+O(k)+n;e.executeSql(p,[m],function(){f++;d(h)},function(){g=!0;d(h);return!1});h++;for(var p=function(a){a="DELETE FROM  "+sa("ydn.db.me:"+k.getName()+":"+a.getName())+n;e.executeSql(a,[m])},t=0,u=k.a.length;t<u;t++){var A=k.index(t);A.a&&p(A)}}}var e=b.a,f=0,g=!1;d(0)}
function Yd(a,b,c,d){function e(a){a="DELETE FROM  "+sa("ydn.db.me:"+g.getName()+":"+a.getName())+k;f.executeSql(a,[h])}var f=b.a,g=R(a.a,c),h=ec(d,g.type),k=" WHERE "+g.b+" = ?";a="DELETE FROM "+O(g)+k;f.executeSql(a,[h],function(a,c){J(b,c.rowsAffected)},function(a,c){J(b,c,!0);return!1});a=0;for(c=g.a.length;a<c;a++)d=g.index(a),d.a&&e(d)}
function Wd(a,b,c,d,e){function f(a){a="DELETE FROM  "+sa("ydn.db.me:"+h.getName()+":"+a.getName())+m;g.executeSql(a,k)}var g=b.a,h=R(a.a,c);a="DELETE FROM "+O(h);c=[];var k=[],m="";null!=e&&(r(d)?(d=rc(h,d),dc(d.e,d.type,e,k,c)):dc(h.b,h.type,e,k,c),m=" WHERE "+k.join(" AND "));g.executeSql(a+m,c,function(a,c){J(b,c.rowsAffected)},function(a,c){J(b,c,!0);return!1});e=0;for(d=h.a.length;e<d;e++)a=h.index(e),a.a&&f(a)}
function Nd(a,b,c){function d(a){var h="SELECT COUNT(*) FROM "+sa(c[a]);e.executeSql(h,[],function(e,h){var n=h.rows.item(0);f[a]=parseInt(n["COUNT(*)"],10);a++;a==c.length?J(b,f):d(a)},function(a,c){J(b,c,!0);return!1})}var e=b.a,f=[];0==c.length?J(b,0):d(0)}function Od(a,b,c,d,e,f){var g=[];a=pc(R(a.a,c),g,6,e,d,!1,f);b.a.executeSql(a,g,function(a,c){var d;a:{if(d=c.rows.item(0))for(var e in d)if(d.hasOwnProperty(e)){d=d[e];break a}d=void 0}J(b,d)},function(a,c){J(b,c,!0);return!1})}
function Qd(a,b,c,d,e,f,g,h,k,m){var n=[],p=R(a.a,d),t=p.e,u=p.type,A=u;a=null!=e&&e!==t?rc(p,e):null;var G=e||t;a&&(A=a.type);e=[];f=pc(p,e,c,G,f,k,m);y(g)&&(f+=" LIMIT "+g);y(h)&&(f+=" OFFSET "+h);P(e);b.a.executeSql(f,e,function(a,d){for(var e=d.rows.length,f,g=0;g<e;g++)f=d.rows.item(g),2==c?n[g]=jc(f[t],u):1==c?n[g]=jc(f[G],A):3==c?n[g]=[jc(f[G],A),jc(f[t],u)]:null!=f&&(n[g]=le(f,p));J(b,n)},function(a,c){J(b,c,!0);return!1})};function Md(a,b){this.a=b}C(Md,ne);function be(a,b,c){a=R(a.a,c);return new ke(b,0,a,void 0)};function oe(a,b){this.a=r(a)?a:4194304;this.b=b||"websql"}
function Zc(a,b,c){function d(b,c){var d=b.version?parseInt(b.version,10):0,f=!1,g=0;b.changeVersion(b.version,(c.c?isNaN(d)?1:d+1:c.version)+"",function(d){Uc(a,function(a){f=!0;for(var b=0;b<c.stores.length;b++){var e=R(a,c.b(b).getName()),e=e?vc(e,c.b(b)):null;pe(d,c.b(b),function(a){a&&g++},e)}for(b=0;b<a.stores.length;b++)e=a.b(b),Kc(c,e.getName())||(c instanceof Mc?c.stores.push(e):(e="DROP TABLE "+O(e),d.executeSql(e,[],function(){},function(a,b){throw b;})))},d,b)},function(a){throw a;},function(){f&&
e(b)})}function e(b,c){r(c)?(a.n=null,g.k(c)):(a.n=b,g.callback(parseFloat(f)))}var f=NaN,g=new D,h=null;try{"sqlite"==a.b?q.sqlitePlugin?(h=q.sqlitePlugin.openDatabase(b,"",b,a.a),h.readTransaction||(h.readTransaction=h.transaction),h.changeVersion=function(a,b,c,d,e){h.transaction(c,d,e)}):(h=null,a.ia=Error("sqlitePlugin not found.")):h=q.openDatabase(b,"",b,a.a)}catch(k){if("SECURITY_ERR"==k.name)h=null,a.ia=new zd(k);else throw k;}h?(f=h.version||"",null!=c.version&&c.version==h.version?e(h):
Uc(a,function(a){Lc(c,a)?d(h,c):e(h)},null,h)):e(null,a.ia);return g}l=oe.prototype;l.ia=null;l.n=null;l.lb=function(){};l.kb=function(){};
function qe(a){var b=a.j,c="CREATE TABLE IF NOT EXISTS "+O(a)+" (",d=a.b,c=c+(d+" "+b+" PRIMARY KEY ");a.c&&(c+=" AUTOINCREMENT ");if(!a.M||!a.keyPath&&0==a.a.length)c+=" ,_default_ BLOB";for(var e=[],f=[d],g=0,h=a.a.length;g<h;g++){var k=a.index(g),m="";if(k.a)m=k.b?" UNIQUE ":"",k="CREATE TABLE IF NOT EXISTS "+sa("ydn.db.me:"+a.getName()+":"+k.getName())+" ("+d+" "+b+", "+k.e+" "+k.i+m+")",e.push(k);else{k.b&&(m=" UNIQUE ");var n=k.e;-1==f.indexOf(n)&&(c+=", "+n+" "+k.i+m,f.push(n))}}e.unshift(c+
")");return e}
function Uc(a,b,c,d){function e(a,b){throw b;}function f(a,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var f="sql"in e?e.sql:void 0,u=f.substr(f.indexOf("("),f.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),A=void 0,G,f=[],L=!1,ka=!1,ma=0;for(;ma<u.length;ma++){var Z=u[ma].match(/\w+|"[^"]+"/g),S=va(Z,function(a){return a.toUpperCase()}),T=pa(Z[0]),Z=hc(S[1]);if(-1!=S.indexOf("PRIMARY")&&-1!=
S.indexOf("KEY")){G=Z;if(x(T)&&!/^[\s\xa0]*$/.test(T)&&"_ROWID_"!=T){var Vb=T.split(","),A=T;1<Vb.length&&(A=Vb,G=void 0)}-1!=S.indexOf("AUTOINCREMENT")&&(L=!0)}else if("_ROWID_"!=T)if("_default_"==T)ka=!0;else{var ab="UNIQUE"==S[2];0==T.lastIndexOf(e.tbl_name+"-",0)&&(T=T.substr(e.tbl_name.length+1));S=new gc(T,Z,ab);f.push(S)}}if(0==e.name.lastIndexOf("ydn.db.me:",0)){var Ea=e.name.split(":");if(3<=Ea.length){var Wb=Ea[1],A=new gc(Ea[2],Z,ab,!0),u=ya(f,function(a){return a.getName()==Ea[2]});0<=
u?f[u]=A:f.push(A);u=ya(h,function(a){return a.getName()===Wb});0<=u?(A=h[u],h[u]=new nc(A.getName(),A.keyPath,L,G,f,void 0,!ka)):h.push(new nc(Wb,void 0,!1,void 0,[A]))}}else ma=ya(h,function(a){return a.getName()===e.name}),0<=ma?(u=h[ma].index(0),f.push(u),h[ma]=new nc(e.name,A,L,G,f,void 0,!ka)):(f=new nc(e.name,A,L,G,f,void 0,!ka),h.push(f))}}d=new Hc(g,h);b(d)}}var g=(d=d||a.n)&&d.version?parseFloat(d.version):void 0,g=isNaN(g)?void 0:g,h=[];c?c.executeSql("SELECT * FROM sqlite_master",[],f,
e):d.readTransaction(function(c){Uc(a,b,c,d)},function(a){throw a;},f)}function pe(a,b,c,d){function e(b){a.executeSql(b,[],function(){f++;f==g.length&&(c(!0),c=null)},function(a,b){f++;f==g.length&&(c(!1),c=null);throw new yd(b,'"');})}var f=0,g=qe(b);if(d){if(0==Ac(b,d).length){c(!0);c=null;return}g.unshift("DROP TABLE IF EXISTS "+sa(b.getName()))}for(b=0;b<g.length;b++)e(g[b])}l.close=function(){this.n=null};
function ad(a,b,c,d){function e(a){d("abort",a)}function f(){d("complete",{type:"complete"})}function g(a){b(a)}null===a.n&&(b(null),d("abort",a.ia));c==F?a.n.readTransaction(g,e,f):c==xb?a.n.changeVersion(a.n.version,a.n.version+1+"",g,e,f):a.n.transaction(g,e,f)}
Ob.push(function(a,b){if(z(q.openDatabase)&&(!b||"websql"==b)){var c=new oe,d=new Mc,d=Zc(c,a,d),e=function(){};d.C(function(){ad(c,function(a){a.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(b,c){if(c&&c.rows)for(var d=c.rows.length,e=0,n=0;n<d;n++){var p=c.rows.item(n);"__WebKitDatabaseInfoTable__"!=p.name&&"sqlite_sequence"!=p.name&&(e++,a.executeSql("DROP TABLE "+p.name))}},function(a,b){throw b;})},H,e)});d.za(function(){})}});oe.prototype.c=function(){};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
he.prototype.sa=function(a){return"websql"==a&&z(q.openDatabase)?new oe(this.i):"sqlite"==a&&q.sqlitePlugin?new oe(this.i,"sqlite"):null};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
he.prototype.branch=he.prototype.La;he.prototype.getTxNo=he.prototype.rb;Ld.prototype.getTxNo=Ld.prototype.e;he.prototype.run=he.prototype.Ua;Y.prototype.branch=Y.prototype.La;Y.prototype.add=Y.prototype.pa;Y.prototype.get=Y.prototype.I;Y.prototype.keys=Y.prototype.W;Y.prototype.values=Y.prototype.t;Y.prototype.put=Y.prototype.X;Y.prototype.clear=Y.prototype.clear;Y.prototype.remove=Y.prototype.qa;Y.prototype.count=Y.prototype.V;X.prototype.add=X.prototype.pa;X.prototype.get=X.prototype.I;X.prototype.keys=X.prototype.W;X.prototype.values=X.prototype.t;X.prototype.put=X.prototype.X;X.prototype.clear=X.prototype.clear;
X.prototype.remove=X.prototype.qa;X.prototype.count=X.prototype.V;ja("ydn.db.Key",Yb);Yb.prototype.id=Yb.prototype.Na;Yb.prototype.parent=Yb.prototype.ib;Yb.prototype.storeName=Yb.prototype.jb;ja("ydn.db.KeyRange",N);N.upperBound=N.upperBound;N.lowerBound=N.lowerBound;N.bound=N.bound;N.only=N.only;N.starts=ac;Sb.prototype.store_name=Sb.prototype.b;Sb.prototype.getStoreName=Sb.prototype.a;function re(a,b,c){Y.call(this,a,b,c)}C(re,je);ja("ydn.db.Storage",re);je.prototype.scan=je.prototype.nb;je.prototype.map=je.prototype.map;je.prototype.reduce=je.prototype.oa;je.prototype.open=je.prototype.open;$d.prototype.scan=$d.prototype.Ha;$d.prototype.map=$d.prototype.map;$d.prototype.reduce=$d.prototype.oa;$d.prototype.open=$d.prototype.open;bd.prototype.getKey=bd.prototype.ob;bd.prototype.getPrimaryKey=bd.prototype.u;bd.prototype.getValue=bd.prototype.T;bd.prototype.update=bd.prototype.pb;bd.prototype.clear=bd.prototype.clear;ja("ydn.db.Iterator",V);
ja("ydn.db.KeyIterator",id);ja("ydn.db.ValueIterator",kd);ja("ydn.db.IndexIterator",jd);ja("ydn.db.IndexValueIterator",ld);V.prototype.getState=V.prototype.Qa;V.prototype.getKeyRange=V.prototype.ab;V.prototype.getIndexName=V.prototype.Za;V.prototype.getStoreName=V.prototype.cb;V.prototype.isReversed=V.prototype.Z;V.prototype.isUnique=V.prototype.la;V.prototype.isKeyIterator=V.prototype.eb;V.prototype.isIndexIterator=V.prototype.Ra;V.prototype.getPrimaryKey=V.prototype.bb;V.prototype.getKey=V.prototype.$a;
V.prototype.resume=V.prototype.gb;V.prototype.reset=V.prototype.fb;V.prototype.reverse=V.prototype.hb;id.where=function(a,b,c,d,e){return new id(a,fc(b,c,d,e))};kd.where=function(a,b,c,d,e){return new kd(a,fc(b,c,d,e))};jd.where=function(a,b,c,d,e,f){return new jd(a,b,fc(c,d,e,f))};ld.where=function(a,b,c,d,e,f){return new ld(a,b,fc(c,d,e,f))};ja("ydn.db.Streamer",qd);qd.prototype.push=qd.prototype.push;qd.prototype.collect=qd.prototype.D;qd.prototype.setSink=qd.prototype.Wa;function se(a,b){td.call(this,a,b)}C(se,td);se.prototype.f=function(){return!1};se.prototype.c=function(a,b){function c(b){r(a[b])?(e=!1,d[b]=!0):(d[b]=!1,0<=b-1&&c(b-1))}var d=[],e=!0;c(a.length-1);e&&(d=[]);return ud(this,d,b)};function te(a,b){td.call(this,a,b)}C(te,td);
te.prototype.c=function(a,b){var c=[],d=b[0];if(null==d)return[];for(var e=!0,f=!1,g=d,h=[],k=1;k<a.length;k++)if(null!=b[k]){var m=M(d,b[k]);h[k]=m;this.b?-1==m?e=!1:1==m&&(e=!1,f=!0,-1==M(b[k],g)&&(g=b[k])):1==m?e=!1:-1==m&&(e=!1,f=!0,1==M(b[k],g)&&(g=b[k]))}else e=!1,f=!0;if(e)for(f=0;f<a.length;f++)null!=b[f]&&(c[f]=!0);else if(f)for(f=0;f<a.length;f++)null!=b[f]&&(this.b?-1==M(g,b[f])&&(c[f]=g):1==M(g,b[f])&&(c[f]=g));else for(k=this.b?-1:1,f=1;f<a.length;f++)h[f]===k&&(c[f]=d);return e?(this.e++,
this.a&&this.a.push(g),c):{continuePrimary:c}};function ue(a,b){td.call(this,a,b)}C(ue,td);
ue.prototype.c=function(a,b){function c(a,b){var c=a.slice(0,a.length-1);c.push(b);return c}function d(a){return a[a.length-1]}var e=[];if(0==a.length||null==a[0]||null==a[0])return[];for(var f=!0,g=0,h=d(a[g]),k=[],m=1;m<a.length;m++)if(null!=a[m]){var n=d(a[m]),p=M(h,n);k[m]=p;this.b?-1==p?f=!1:1==p&&(f=!1,h=n,g=1):1==p?f=!1:-1==p&&(f=!1,h=n,g=1)}else return[];m=this.b?-1:1;if(f){for(f=0;f<a.length;f++)null!=a[f]&&(e[f]=!0);this.a&&(this.d?this.a.push(b[0],h):this.a.push(b[0]));return e}if(0==g)for(f=
1;f<a.length;f++)k[f]==m&&(e[f]=c(a[f],h));else for(f=0;f<a.length;f++)f!=g&&null!=a[f]&&M(h,d(a[f]))===m&&(e[f]=c(a[f],h));return{"continue":e}};ja("ydn.db.algo.NestedLoop",se);ja("ydn.db.algo.ZigzagMerge",ue);ja("ydn.db.algo.SortedMerge",te); 

//# sourceMappingURL=ydn.db-s-core-cur.js.map
return ydn;}, (this || {}));
            